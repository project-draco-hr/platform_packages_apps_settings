{
  List<PickAdapter.Item> items=new ArrayList<PickAdapter.Item>();
  final Intent intent=getIntent();
  int categoryFilter=AppWidgetProviderInfo.WIDGET_CATEGORY_HOME_SCREEN;
  if (intent.getExtras().containsKey(AppWidgetManager.EXTRA_CATEGORY_FILTER)) {
    categoryFilter=intent.getExtras().getInt(AppWidgetManager.EXTRA_CATEGORY_FILTER);
  }
  int featuresFilter=AppWidgetProviderInfo.WIDGET_FEATURES_NONE;
  if (intent.getExtras().containsKey(AppWidgetManager.EXTRA_FEATURES_FILTER)) {
    featuresFilter=intent.getExtras().getInt(AppWidgetManager.EXTRA_CATEGORY_FILTER);
  }
  putInstalledAppWidgets(items,categoryFilter,featuresFilter);
  putCustomAppWidgets(items);
  Collections.sort(items,new Comparator<PickAdapter.Item>(){
    Collator mCollator=Collator.getInstance();
    public int compare(    PickAdapter.Item lhs,    PickAdapter.Item rhs){
      return mCollator.compare(lhs.label,rhs.label);
    }
  }
);
  return items;
}
