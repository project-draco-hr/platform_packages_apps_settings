{
  if (address == null) {
    return;
  }
  BluetoothListItem p;
  if (mDeviceMap.containsKey(address)) {
    p=(BluetoothListItem)mDeviceMap.get(address);
    if (summary != null && summary.equals(STR_NOT_CONNECTED)) {
      if (mBluetooth.hasBonding(address)) {
        summary=STR_PAIRED;
      }
    }
    CharSequence oldSummary=p.getSummary();
    if (oldSummary != null && oldSummary.equals(STR_CONNECTED)) {
      summary=STR_CONNECTED;
      mLastConnected=address;
    }
  }
 else {
    p=new BluetoothListItem(this,null);
  }
  if (name == null) {
    name=mBluetooth.getRemoteName(address);
  }
  if (name == null) {
    name=address;
  }
  p.setTitle(name);
  p.setSummary(summary);
  p.setKey(BT_KEY_PREFIX + address);
  if (DeviceClass.getMajorClass(mBluetooth.getRemoteClass(address)) == DeviceClass.MAJOR_CLASS_AUDIO_VIDEO) {
    p.setHeadset(true);
  }
  p.setWeight(rssi);
  if (!mDeviceMap.containsKey(address)) {
    mBTDeviceList.addPreference(p);
    mDeviceMap.put(address,p);
  }
}
