{
  if (!(menuInfo instanceof AdapterContextMenuInfo)) {
    return;
  }
  int position=((AdapterContextMenuInfo)menuInfo).position;
  Preference pref=(Preference)getPreferenceScreen().getRootAdapter().getItem(position);
  if (!(pref instanceof BluetoothListItem)) {
    return;
  }
  String address=getAddressFromKey(pref.getKey());
  String name=mBluetooth.getRemoteName(address);
  menu.setHeaderTitle(name != null ? name : address);
  int n=0;
  if (mBluetoothHeadset.isConnected(address)) {
    menu.add(0,MENU_DISCONNECT,n++,R.string.bluetooth_disconnect);
  }
 else {
    menu.add(0,MENU_CONNECT,n++,R.string.bluetooth_connect);
  }
  if (mBluetooth.hasBonding(address)) {
    menu.add(0,MENU_UNPAIR,n++,R.string.bluetooth_unpair);
  }
 else {
    menu.add(0,MENU_PAIR,n++,R.string.bluetooth_pair);
  }
}
