{
  int deviceCount=mBTDeviceList.getPreferenceCount();
  String[] addresses=new String[deviceCount];
  String[] states=new String[deviceCount];
  int[] weights=new int[deviceCount];
  for (int i=0; i < deviceCount; i++) {
    BluetoothListItem p=(BluetoothListItem)mBTDeviceList.getPreference(i);
    CharSequence summary=p.getSummary();
    if (summary != null) {
      states[i]=summary.toString();
    }
 else {
      states[i]=STR_NOT_CONNECTED;
    }
    addresses[i]=getAddressFromKey(p.getKey());
    weights[i]=p.getWeight();
  }
  icicle.putStringArray(FREEZE_ADDRESSES,addresses);
  icicle.putStringArray(FREEZE_TYPES,states);
  icicle.putIntArray(FREEZE_RSSI,weights);
  icicle.putLong(FREEZE_DISCOVERABLE_START,mDiscoverableStartTime);
  if (mPinDialog != null && mPinDialog.isShowing()) {
    icicle.putString(FREEZE_PIN,mPinEdit.getText().toString());
    icicle.putString(FREEZE_PIN_ADDRESS,mPinAddress);
  }
  super.onSaveInstanceState(icicle);
}
