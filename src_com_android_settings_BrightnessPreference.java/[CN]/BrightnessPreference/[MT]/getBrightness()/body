{
  int mode=getBrightnessMode(0);
  float brightness=0;
  if (false && mode == Settings.System.SCREEN_BRIGHTNESS_MODE_AUTOMATIC) {
    brightness=Settings.System.getFloat(getContext().getContentResolver(),Settings.System.SCREEN_AUTO_BRIGHTNESS_ADJ,0);
    brightness=(brightness + 1) / 2;
  }
 else {
    if (mCurBrightness < 0) {
      brightness=Settings.System.getInt(getContext().getContentResolver(),Settings.System.SCREEN_BRIGHTNESS,100);
    }
 else {
      brightness=mCurBrightness;
    }
    brightness=(brightness - mScreenBrightnessMinimum) / (mScreenBrightnessMaximum - mScreenBrightnessMinimum);
  }
  return (int)(brightness * SEEK_BAR_RANGE);
}
