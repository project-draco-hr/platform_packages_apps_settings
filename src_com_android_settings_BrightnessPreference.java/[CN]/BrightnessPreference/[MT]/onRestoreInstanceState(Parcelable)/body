{
  if (state == null || !state.getClass().equals(SavedState.class)) {
    super.onRestoreInstanceState(state);
    return;
  }
  SavedState myState=(SavedState)state;
  super.onRestoreInstanceState(myState.getSuperState());
  mOldBrightness=myState.oldProgress;
  mOldAutomatic=myState.oldAutomatic ? 1 : 0;
  setMode(myState.automatic ? 1 : 0);
  setBrightness(myState.progress,false);
  mCurBrightness=myState.curBrightness;
}
