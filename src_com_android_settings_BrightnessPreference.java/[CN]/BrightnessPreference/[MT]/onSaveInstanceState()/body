{
  final Parcelable superState=super.onSaveInstanceState();
  if (getDialog() == null || !getDialog().isShowing())   return superState;
  final SavedState myState=new SavedState(superState);
  myState.automatic=mCheckBox.isChecked();
  myState.progress=mSeekBar.getProgress();
  myState.oldAutomatic=mOldAutomatic == 1;
  myState.oldProgress=mOldBrightness;
  myState.curBrightness=mCurBrightness;
  restoreOldState();
  return myState;
}
