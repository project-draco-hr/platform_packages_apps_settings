{
  if (mAutomaticMode) {
    if (false) {
      float valf=(((float)brightness * 2) / SEEK_BAR_RANGE) - 1.0f;
      try {
        IPowerManager power=IPowerManager.Stub.asInterface(ServiceManager.getService("power"));
        if (power != null) {
          power.setAutoBrightnessAdjustment(valf);
        }
        if (write) {
          final ContentResolver resolver=getContext().getContentResolver();
          Settings.System.putFloat(resolver,Settings.System.SCREEN_AUTO_BRIGHTNESS_ADJ,valf);
        }
      }
 catch (      RemoteException doe) {
      }
    }
  }
 else {
    int range=(MAXIMUM_BACKLIGHT - mScreenBrightnessDim);
    brightness=(brightness * range) / SEEK_BAR_RANGE + mScreenBrightnessDim;
    try {
      IPowerManager power=IPowerManager.Stub.asInterface(ServiceManager.getService("power"));
      if (power != null) {
        power.setBacklightBrightness(brightness);
      }
      if (write) {
        mCurBrightness=-1;
        final ContentResolver resolver=getContext().getContentResolver();
        Settings.System.putInt(resolver,Settings.System.SCREEN_BRIGHTNESS,brightness);
      }
 else {
        mCurBrightness=brightness;
      }
    }
 catch (    RemoteException doe) {
    }
  }
}
