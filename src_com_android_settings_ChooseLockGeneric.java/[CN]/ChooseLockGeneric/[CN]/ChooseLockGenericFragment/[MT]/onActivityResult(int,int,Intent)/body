{
  super.onActivityResult(requestCode,resultCode,data);
  mWaitingForConfirmation=false;
  if (requestCode == CONFIRM_EXISTING_REQUEST && resultCode == Activity.RESULT_OK) {
    mPasswordConfirmed=true;
    updatePreferencesOrFinish();
  }
 else   if (requestCode == ENABLE_ENCRYPTION_REQUEST && resultCode == Activity.RESULT_OK) {
    mRequirePassword=data.getBooleanExtra(EncryptionInterstitial.EXTRA_REQUIRE_PASSWORD,true);
    updateUnlockMethodAndFinish(mEncryptionRequestQuality,mEncryptionRequestDisabled);
  }
 else   if (requestCode == CHOOSE_LOCK_REQUEST) {
    getActivity().setResult(resultCode,data);
    finish();
  }
 else {
    getActivity().setResult(Activity.RESULT_CANCELED);
    finish();
  }
}
