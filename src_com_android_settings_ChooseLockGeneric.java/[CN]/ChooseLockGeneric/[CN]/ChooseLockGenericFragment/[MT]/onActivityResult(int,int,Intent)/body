{
  super.onActivityResult(requestCode,resultCode,data);
  mWaitingForConfirmation=false;
  if (requestCode == CONFIRM_EXISTING_REQUEST && resultCode == Activity.RESULT_OK) {
    mPasswordConfirmed=true;
    mUserPassword=data.getStringExtra(ChooseLockSettingsHelper.EXTRA_KEY_PASSWORD);
    updatePreferencesOrFinish();
  }
 else   if (requestCode == CHOOSE_LOCK_REQUEST || requestCode == ENABLE_ENCRYPTION_REQUEST) {
    if (resultCode != RESULT_CANCELED) {
      getActivity().setResult(resultCode,data);
      finish();
    }
  }
 else {
    getActivity().setResult(Activity.RESULT_CANCELED);
    finish();
  }
}
