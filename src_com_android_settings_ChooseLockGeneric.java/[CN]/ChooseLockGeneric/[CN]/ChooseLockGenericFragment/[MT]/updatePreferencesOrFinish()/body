{
  Intent intent=getActivity().getIntent();
  int quality=intent.getIntExtra(LockPatternUtils.PASSWORD_TYPE_KEY,-1);
  if (quality == -1) {
    quality=intent.getIntExtra(MINIMUM_QUALITY_KEY,-1);
    quality=upgradeQuality(quality);
    final PreferenceScreen prefScreen=getPreferenceScreen();
    if (prefScreen != null) {
      prefScreen.removeAll();
    }
    addPreferencesFromResource(R.xml.security_settings_picker);
    disableUnusablePreferences(quality);
  }
 else {
    updateUnlockMethodAndFinish(quality,false);
  }
}
