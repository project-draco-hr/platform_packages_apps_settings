{
  int quality=getActivity().getIntent().getIntExtra(LockPatternUtils.PASSWORD_TYPE_KEY,-1);
  if (quality == -1) {
    quality=mDPM.getPasswordQuality(null);
    quality=upgradeQualityForEncryption(quality);
    final PreferenceScreen prefScreen=getPreferenceScreen();
    if (prefScreen != null) {
      prefScreen.removeAll();
    }
    addPreferencesFromResource(R.xml.security_settings_picker);
    disableUnusablePreferences(quality);
  }
 else {
    quality=upgradeQualityForEncryption(quality);
    updateUnlockMethodAndFinish(quality,false);
  }
}
