{
  super.onCreate(savedInstanceState);
  mDPM=(DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
  mChooseLockSettingsHelper=new ChooseLockSettingsHelper(this);
  if (savedInstanceState != null) {
    mPasswordConfirmed=savedInstanceState.getBoolean(PASSWORD_CONFIRMED);
  }
  if (!mPasswordConfirmed) {
    ChooseLockSettingsHelper helper=new ChooseLockSettingsHelper(this);
    if (!helper.launchConfirmationActivity(CONFIRM_EXISTING_REQUEST,null,null)) {
      mPasswordConfirmed=true;
      updatePreferencesOrFinish();
    }
  }
 else {
    updatePreferencesOrFinish();
  }
}
