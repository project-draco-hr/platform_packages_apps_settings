{
  String password=mPasswordEntry.getText().toString();
  final int length=password.length();
  if (mUiStage == Stage.Introduction && length > 0) {
    if (length < mPasswordMinLength) {
      String msg=getString(mIsAlphaMode ? R.string.lockpassword_password_too_short : R.string.lockpassword_pin_too_short,mPasswordMinLength);
      mHeaderText.setText(msg);
      mNextButton.setEnabled(false);
    }
 else {
      String error=validatePassword(password);
      if (error != null) {
        mHeaderText.setText(error);
        mNextButton.setEnabled(false);
      }
 else {
        mHeaderText.setText(R.string.lockpassword_press_continue);
        mNextButton.setEnabled(true);
      }
    }
  }
 else {
    mHeaderText.setText(mIsAlphaMode ? mUiStage.alphaHint : mUiStage.numericHint);
    mNextButton.setEnabled(length > 0);
  }
  mNextButton.setText(mUiStage.buttonText);
}
