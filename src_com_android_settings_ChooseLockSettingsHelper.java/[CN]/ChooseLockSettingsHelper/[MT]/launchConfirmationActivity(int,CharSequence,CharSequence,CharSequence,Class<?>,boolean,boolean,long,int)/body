{
  final Intent intent=new Intent();
  intent.putExtra(ConfirmDeviceCredentialBaseFragment.TITLE_TEXT,title);
  intent.putExtra(ConfirmDeviceCredentialBaseFragment.HEADER_TEXT,header);
  intent.putExtra(ConfirmDeviceCredentialBaseFragment.DETAILS_TEXT,message);
  intent.putExtra(ConfirmDeviceCredentialBaseFragment.ALLOW_FP_AUTHENTICATION,external);
  intent.putExtra(ConfirmDeviceCredentialBaseFragment.DARK_THEME,external);
  intent.putExtra(ConfirmDeviceCredentialBaseFragment.SHOW_CANCEL_BUTTON,external);
  intent.putExtra(ConfirmDeviceCredentialBaseFragment.SHOW_WHEN_LOCKED,external);
  intent.putExtra(ChooseLockSettingsHelper.EXTRA_KEY_HAS_CHALLENGE,hasChallenge);
  intent.putExtra(ChooseLockSettingsHelper.EXTRA_KEY_CHALLENGE,challenge);
  intent.putExtra(ChooseLockGeneric.KEY_USER_ID,userId);
  intent.setClassName(ConfirmDeviceCredentialBaseFragment.PACKAGE,activityClass.getName());
  if (external) {
    intent.addFlags(Intent.FLAG_ACTIVITY_FORWARD_RESULT);
    if (mFragment != null) {
      IntentSender intentSender=mFragment.getActivity().getIntent().getParcelableExtra(Intent.EXTRA_INTENT);
      if (intentSender != null) {
        intent.putExtra(Intent.EXTRA_INTENT,intentSender);
      }
      mFragment.startActivity(intent);
    }
 else {
      IntentSender intentSender=mActivity.getIntent().getParcelableExtra(Intent.EXTRA_INTENT);
      if (intentSender != null) {
        intent.putExtra(Intent.EXTRA_INTENT,intentSender);
      }
      mActivity.startActivity(intent);
    }
  }
 else {
    if (mFragment != null) {
      mFragment.startActivityForResult(intent,request);
    }
 else {
      mActivity.startActivityForResult(intent,request);
    }
  }
  return true;
}
