{
  final int storedQuality=mLockPatternUtils.getKeyguardStoredPasswordQuality();
  View view=inflater.inflate(R.layout.confirm_lock_password,null);
  view.findViewById(R.id.cancel_button).setOnClickListener(this);
  mContinueButton=(Button)view.findViewById(R.id.next_button);
  mContinueButton.setOnClickListener(this);
  mContinueButton.setEnabled(false);
  mPasswordEntry=(TextView)view.findViewById(R.id.password_entry);
  mPasswordEntry.setOnEditorActionListener(this);
  mPasswordEntry.addTextChangedListener(this);
  mKeyboardView=(PasswordEntryKeyboardView)view.findViewById(R.id.keyboard);
  mHeaderText=(TextView)view.findViewById(R.id.headerText);
  final boolean isAlpha=DevicePolicyManager.PASSWORD_QUALITY_ALPHABETIC == storedQuality || DevicePolicyManager.PASSWORD_QUALITY_ALPHANUMERIC == storedQuality || DevicePolicyManager.PASSWORD_QUALITY_COMPLEX == storedQuality;
  mHeaderText.setText(isAlpha ? R.string.lockpassword_confirm_your_password_header : R.string.lockpassword_confirm_your_pin_header);
  final Activity activity=getActivity();
  mKeyboardHelper=new PasswordEntryKeyboardHelper(activity,mKeyboardView,mPasswordEntry);
  mKeyboardHelper.setKeyboardMode(isAlpha ? PasswordEntryKeyboardHelper.KEYBOARD_MODE_ALPHA : PasswordEntryKeyboardHelper.KEYBOARD_MODE_NUMERIC);
  mKeyboardView.requestFocus();
  int currentType=mPasswordEntry.getInputType();
  mPasswordEntry.setInputType(isAlpha ? currentType : (InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_VARIATION_PASSWORD));
  if (activity instanceof SettingsActivity) {
    final SettingsActivity sa=(SettingsActivity)activity;
    int id=isAlpha ? R.string.lockpassword_confirm_your_password_header : R.string.lockpassword_confirm_your_pin_header;
    CharSequence title=getText(id);
    sa.setTitle(title);
  }
  return view;
}
