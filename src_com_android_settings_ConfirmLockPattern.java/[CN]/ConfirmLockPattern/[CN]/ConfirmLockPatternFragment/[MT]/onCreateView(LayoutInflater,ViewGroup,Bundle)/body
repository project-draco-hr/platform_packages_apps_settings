{
  View view=inflater.inflate(R.layout.confirm_lock_pattern,null);
  mHeaderTextView=(TextView)view.findViewById(R.id.headerText);
  mLockPatternView=(LockPatternView)view.findViewById(R.id.lockPattern);
  mDetailsTextView=(TextView)view.findViewById(R.id.detailsText);
  mErrorTextView=(TextView)view.findViewById(R.id.errorText);
  mLeftSpacerLandscape=view.findViewById(R.id.leftSpacer);
  mRightSpacerLandscape=view.findViewById(R.id.rightSpacer);
  final LinearLayoutWithDefaultTouchRecepient topLayout=(LinearLayoutWithDefaultTouchRecepient)view.findViewById(R.id.topLayout);
  topLayout.setDefaultTouchRecepient(mLockPatternView);
  Intent intent=getActivity().getIntent();
  if (intent != null) {
    mHeaderText=intent.getCharSequenceExtra(ConfirmDeviceCredentialBaseFragment.HEADER_TEXT);
    mDetailsText=intent.getCharSequenceExtra(ConfirmDeviceCredentialBaseFragment.DETAILS_TEXT);
  }
  mLockPatternView.setTactileFeedbackEnabled(mLockPatternUtils.isTactileFeedbackEnabled());
  mLockPatternView.setOnPatternListener(mConfirmExistingLockPatternListener);
  updateStage(Stage.NeedToUnlock);
  if (savedInstanceState != null) {
    mNumWrongConfirmAttempts=savedInstanceState.getInt(KEY_NUM_WRONG_ATTEMPTS);
  }
 else {
    if (!mLockPatternUtils.isLockPatternEnabled()) {
      getActivity().setResult(Activity.RESULT_OK);
      getActivity().finish();
    }
  }
  return view;
}
