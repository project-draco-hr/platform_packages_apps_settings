{
  View view=inflater.inflate(R.layout.confirm_lock_pattern,null);
  mHeaderTextView=(TextView)view.findViewById(R.id.headerText);
  mLockPatternView=(LockPatternView)view.findViewById(R.id.lockPattern);
  mFooterTextView=(TextView)view.findViewById(R.id.footerText);
  final LinearLayoutWithDefaultTouchRecepient topLayout=(LinearLayoutWithDefaultTouchRecepient)view.findViewById(R.id.topLayout);
  topLayout.setDefaultTouchRecepient(mLockPatternView);
  Intent intent=getActivity().getIntent();
  if (intent != null) {
    mHeaderText=intent.getCharSequenceExtra(HEADER_TEXT);
    mFooterText=intent.getCharSequenceExtra(FOOTER_TEXT);
    mHeaderWrongText=intent.getCharSequenceExtra(HEADER_WRONG_TEXT);
    mFooterWrongText=intent.getCharSequenceExtra(FOOTER_WRONG_TEXT);
  }
  mLockPatternView.setTactileFeedbackEnabled(mLockPatternUtils.isTactileFeedbackEnabled());
  mLockPatternView.setOnPatternListener(mConfirmExistingLockPatternListener);
  updateStage(Stage.NeedToUnlock);
  if (savedInstanceState != null) {
    mNumWrongConfirmAttempts=savedInstanceState.getInt(KEY_NUM_WRONG_ATTEMPTS);
  }
 else {
    if (!mLockPatternUtils.savedPatternExists()) {
      getActivity().setResult(Activity.RESULT_OK);
      getActivity().finish();
    }
  }
  return view;
}
