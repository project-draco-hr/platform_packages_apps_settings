{
  View view=View.inflate(this,R.layout.credentials_dialog,null);
  ((TextView)view.findViewById(R.id.hint)).setText(R.string.credentials_password_hint);
  if (!firstTime) {
    view.findViewById(R.id.old_password_prompt).setVisibility(View.VISIBLE);
    mOldPassword=(TextView)view.findViewById(R.id.old_password);
    mOldPassword.setVisibility(View.VISIBLE);
    mOldPassword.addTextChangedListener(this);
  }
  view.findViewById(R.id.new_passwords).setVisibility(View.VISIBLE);
  mNewPassword=(TextView)view.findViewById(R.id.new_password);
  mNewPassword.addTextChangedListener(this);
  mConfirmPassword=(TextView)view.findViewById(R.id.confirm_password);
  mConfirmPassword.addTextChangedListener(this);
  mError=(TextView)view.findViewById(R.id.error);
  AlertDialog dialog=new AlertDialog.Builder(this).setView(view).setTitle(R.string.credentials_set_password).setPositiveButton(android.R.string.ok,this).setNegativeButton(android.R.string.cancel,this).create();
  dialog.setOnDismissListener(this);
  dialog.show();
  mButton=dialog.getButton(DialogInterface.BUTTON_POSITIVE);
  mButton.setEnabled(false);
}
