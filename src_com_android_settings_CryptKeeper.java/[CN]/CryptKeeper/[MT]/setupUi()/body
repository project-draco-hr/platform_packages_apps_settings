{
  if (mEncryptionGoneBad || isDebugView(FORCE_VIEW_ERROR)) {
    setContentView(R.layout.crypt_keeper_progress);
    showFactoryReset();
    return;
  }
  final String progress=SystemProperties.get("vold.encrypt_progress");
  if (!"".equals(progress) || isDebugView(FORCE_VIEW_PROGRESS)) {
    setContentView(R.layout.crypt_keeper_progress);
    encryptionProgressInit();
  }
 else   if (mValidationComplete || isDebugView(FORCE_VIEW_PASSWORD)) {
    new AsyncTask<Void,Void,Void>(){
      int type=StorageManager.CRYPT_TYPE_PASSWORD;
      String owner_info;
      @Override public Void doInBackground(      Void... v){
        try {
          final IMountService service=getMountService();
          type=service.getPasswordType();
          owner_info=service.getField("OwnerInfo");
        }
 catch (        Exception e) {
          Log.e(TAG,"Error calling mount service " + e);
        }
        return null;
      }
      @Override public void onPostExecute(      java.lang.Void v){
        if (type == StorageManager.CRYPT_TYPE_PIN) {
          setContentView(R.layout.crypt_keeper_pin_entry);
        }
 else         if (type == StorageManager.CRYPT_TYPE_PATTERN) {
          setContentView(R.layout.crypt_keeper_pattern_entry);
          setBackFunctionality(false);
        }
 else {
          setContentView(R.layout.crypt_keeper_password_entry);
        }
        final TextView status=(TextView)findViewById(R.id.owner_info);
        status.setText(owner_info);
        passwordEntryInit();
      }
    }
.execute();
  }
 else   if (!mValidationRequested) {
    new ValidationTask().execute((Void[])null);
    mValidationRequested=true;
  }
}
