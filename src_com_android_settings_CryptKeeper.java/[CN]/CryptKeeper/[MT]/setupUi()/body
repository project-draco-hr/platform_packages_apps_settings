{
  if (mEncryptionGoneBad || isDebugView(FORCE_VIEW_ERROR)) {
    setContentView(R.layout.crypt_keeper_progress);
    showFactoryReset();
    return;
  }
  final String progress=SystemProperties.get("vold.encrypt_progress");
  if (!"".equals(progress) || isDebugView(FORCE_VIEW_PROGRESS)) {
    setContentView(R.layout.crypt_keeper_progress);
    encryptionProgressInit();
  }
 else   if (mValidationComplete || isDebugView(FORCE_VIEW_PASSWORD)) {
    final IMountService service=getMountService();
    int type=StorageManager.CRYPT_TYPE_PASSWORD;
    try {
      type=service.getPasswordType();
    }
 catch (    Exception e) {
      Log.e(TAG,"Error while getting type - showing default dialog" + e);
    }
    if (type == StorageManager.CRYPT_TYPE_PIN) {
      setContentView(R.layout.crypt_keeper_pin_entry);
    }
 else     if (type == StorageManager.CRYPT_TYPE_PATTERN) {
      setContentView(R.layout.crypt_keeper_pattern_entry);
      setBackFunctionality(false);
    }
 else {
      setContentView(R.layout.crypt_keeper_password_entry);
    }
    passwordEntryInit();
  }
 else   if (!mValidationRequested) {
    new ValidationTask().execute((Void[])null);
    mValidationRequested=true;
  }
}
