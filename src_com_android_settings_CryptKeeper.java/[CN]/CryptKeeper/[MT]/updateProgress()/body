{
  String state=SystemProperties.get("vold.encrypt_progress");
  if ("error_partially_encrypted".equals(state)) {
    showFactoryReset();
    return;
  }
  int progress=0;
  try {
    progress=isDebugView() ? 50 : Integer.parseInt(state);
  }
 catch (  Exception e) {
    Log.w(TAG,"Error parsing progress: " + e.toString());
  }
  CharSequence status=getText(R.string.crypt_keeper_setup_description);
  Log.v(TAG,"Encryption progress: " + progress);
  TextView tv=(TextView)findViewById(R.id.status);
  tv.setText(TextUtils.expandTemplate(status,Integer.toString(progress)));
  mHandler.removeMessages(UPDATE_PROGRESS);
  mHandler.sendEmptyMessageDelayed(UPDATE_PROGRESS,5000);
}
