{
  final String state=SystemProperties.get("vold.encrypt_progress");
  if ("error_partially_encrypted".equals(state)) {
    showFactoryReset();
    return;
  }
  int progress=0;
  try {
    progress=isDebugView() ? 50 : Integer.parseInt(state);
  }
 catch (  Exception e) {
    Log.w(TAG,"Error parsing progress: " + e.toString());
  }
  final CharSequence status=getText(R.string.crypt_keeper_setup_description);
  Log.v(TAG,"Encryption progress: " + progress);
  final TextView tv=(TextView)findViewById(R.id.status);
  if (tv != null) {
    tv.setText(TextUtils.expandTemplate(status,Integer.toString(progress)));
  }
  mHandler.removeMessages(MESSAGE_UPDATE_PROGRESS);
  mHandler.sendEmptyMessageDelayed(MESSAGE_UPDATE_PROGRESS,5000);
}
