{
  final Context context=getActivity();
  final AlertDialog.Builder builder=new AlertDialog.Builder(context);
  final LayoutInflater dialogInflater=LayoutInflater.from(builder.getContext());
  final View view=dialogInflater.inflate(R.layout.data_usage_cycle_editor,null,false);
  final NumberPicker cycleDayPicker=(NumberPicker)view.findViewById(R.id.cycle_day);
  final int oldCycleDay=getArguments().getInt(EXTRA_CYCLE_DAY,1);
  cycleDayPicker.setMinValue(1);
  cycleDayPicker.setMaxValue(31);
  cycleDayPicker.setValue(oldCycleDay);
  cycleDayPicker.setWrapSelectorWheel(true);
  builder.setTitle(R.string.data_usage_cycle_editor_title);
  builder.setView(view);
  builder.setPositiveButton(R.string.data_usage_cycle_editor_positive,new DialogInterface.OnClickListener(){
    public void onClick(    DialogInterface dialog,    int which){
      final int cycleDay=cycleDayPicker.getValue();
      final DataUsageSummary target=(DataUsageSummary)getTargetFragment();
      if (target != null) {
        target.setPolicyCycleDay(cycleDay);
      }
    }
  }
);
  return builder.create();
}
