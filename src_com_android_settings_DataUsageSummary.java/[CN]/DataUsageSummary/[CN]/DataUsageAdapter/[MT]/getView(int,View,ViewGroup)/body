{
  final AppItem item=mItems.get(position);
  LayoutInflater inflater=LayoutInflater.from(parent.getContext());
  if (getItemViewType(position) == 1) {
    if (convertView == null) {
      convertView=Utils.inflateCategoryHeader(inflater,parent);
    }
    final TextView title=(TextView)convertView.findViewById(android.R.id.title);
    title.setText(R.string.data_usage_app);
  }
 else {
    if (convertView == null) {
      convertView=inflater.inflate(R.layout.data_usage_item,parent,false);
      inflater.inflate(R.layout.widget_progress_bar,(ViewGroup)convertView.findViewById(android.R.id.widget_frame));
      if (mInsetSide > 0) {
        convertView.setPaddingRelative(mInsetSide,0,mInsetSide,0);
      }
    }
    final Context context=parent.getContext();
    final TextView summary=(TextView)convertView.findViewById(android.R.id.summary);
    final ProgressBar progress=(ProgressBar)convertView.findViewById(android.R.id.progress);
    UidDetailTask.bindView(mProvider,item,convertView);
    if (item.restricted && item.total <= 0) {
      summary.setText(R.string.data_usage_app_restricted);
      progress.setVisibility(View.GONE);
    }
 else {
      summary.setText(Formatter.formatFileSize(context,item.total));
      progress.setVisibility(View.VISIBLE);
    }
    final int percentTotal=mLargest != 0 ? (int)(item.total * 100 / mLargest) : 0;
    progress.setProgress(percentTotal);
  }
  return convertView;
}
