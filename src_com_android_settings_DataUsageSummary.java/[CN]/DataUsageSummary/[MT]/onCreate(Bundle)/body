{
  super.onCreate(savedInstanceState);
  final Context context=getActivity();
  mNetworkService=INetworkManagementService.Stub.asInterface(ServiceManager.getService(Context.NETWORKMANAGEMENT_SERVICE));
  mStatsService=INetworkStatsService.Stub.asInterface(ServiceManager.getService(Context.NETWORK_STATS_SERVICE));
  mPolicyManager=NetworkPolicyManager.from(context);
  mConnService=ConnectivityManager.from(context);
  mPrefs=getActivity().getSharedPreferences(PREF_FILE,Context.MODE_PRIVATE);
  mPolicyEditor=new NetworkPolicyEditor(mPolicyManager);
  mPolicyEditor.read();
  try {
    if (!mNetworkService.isBandwidthControlEnabled()) {
      Log.w(TAG,"No bandwidth control; leaving");
      getActivity().finish();
    }
  }
 catch (  RemoteException e) {
    Log.w(TAG,"No bandwidth control; leaving");
    getActivity().finish();
  }
  try {
    mStatsSession=mStatsService.openSession();
  }
 catch (  RemoteException e) {
    throw new RuntimeException(e);
  }
  mShowWifi=mPrefs.getBoolean(PREF_SHOW_WIFI,false);
  mShowEthernet=mPrefs.getBoolean(PREF_SHOW_ETHERNET,false);
  if (!hasReadyMobileRadio(context)) {
    mShowWifi=true;
    mShowEthernet=true;
  }
  setHasOptionsMenu(true);
}
