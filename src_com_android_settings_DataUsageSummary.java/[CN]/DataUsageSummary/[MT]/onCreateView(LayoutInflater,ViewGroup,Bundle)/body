{
  final Context context=inflater.getContext();
  final View view=inflater.inflate(R.layout.data_usage_summary,container,false);
  mTabHost=(TabHost)view.findViewById(android.R.id.tabhost);
  mTabWidget=(TabWidget)view.findViewById(android.R.id.tabs);
  mListView=(ListView)view.findViewById(android.R.id.list);
  mTabHost.setup();
  mTabHost.setOnTabChangedListener(mTabListener);
  mHeader=inflater.inflate(R.layout.data_usage_header,mListView,false);
  mListView.addHeaderView(mHeader,null,false);
  mDataEnabled=new CheckBoxPreference(context);
  mDisableAtLimit=new CheckBoxPreference(context);
  refreshPreferenceViews();
  mDataEnabledView.setLayoutParams(new LinearLayout.LayoutParams(MATCH_PARENT,72));
  mDisableAtLimitView.setLayoutParams(new LinearLayout.LayoutParams(MATCH_PARENT,72));
  mDataEnabledView.setOnClickListener(mDataEnabledListener);
  mDisableAtLimitView.setOnClickListener(mDisableAtLimitListener);
  mSwitches=(LinearLayout)mHeader.findViewById(R.id.switches);
  mSwitches.addView(mDataEnabledView);
  mSwitches.addView(mDisableAtLimitView);
  mCycleSpinner=(Spinner)mHeader.findViewById(R.id.cycles);
  mCycleAdapter=new CycleAdapter(context);
  mCycleSpinner.setAdapter(mCycleAdapter);
  mCycleSpinner.setOnItemSelectedListener(mCycleListener);
  mChart=new DataUsageChartView(context);
  mChart.setListener(mChartListener);
  mChart.setLayoutParams(new AbsListView.LayoutParams(MATCH_PARENT,350));
  mListView.addHeaderView(mChart,null,false);
  mAdapter=new DataUsageAdapter();
  mListView.setOnItemClickListener(mListListener);
  mListView.setAdapter(mAdapter);
  return view;
}
