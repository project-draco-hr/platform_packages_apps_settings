{
  final Context context=inflater.getContext();
  final View view=inflater.inflate(R.layout.data_usage_summary,container,false);
  mTabHost=(TabHost)view.findViewById(android.R.id.tabhost);
  mTabWidget=(TabWidget)view.findViewById(android.R.id.tabs);
  mListView=(ListView)view.findViewById(android.R.id.list);
  mTabHost.setup();
  mTabHost.setOnTabChangedListener(mTabListener);
  mHeader=inflater.inflate(R.layout.data_usage_header,mListView,false);
  mListView.addHeaderView(mHeader,null,false);
  mDataEnabled=new Switch(inflater.getContext());
  mDataEnabledView=inflatePreference(inflater,mSwitches,mDataEnabled);
  mDataEnabled.setOnCheckedChangeListener(mDataEnabledListener);
  mDisableAtLimit=new CheckBox(inflater.getContext());
  mDisableAtLimitView=inflatePreference(inflater,mSwitches,mDisableAtLimit);
  mDisableAtLimitView.setOnClickListener(mDisableAtLimitListener);
  mSwitches=(LinearLayout)mHeader.findViewById(R.id.switches);
  mSwitches.addView(mDataEnabledView);
  mSwitches.addView(mDisableAtLimitView);
  mCycleSpinner=(Spinner)mHeader.findViewById(R.id.cycles);
  mCycleAdapter=new CycleAdapter(context);
  mCycleSpinner.setAdapter(mCycleAdapter);
  mCycleSpinner.setOnItemSelectedListener(mCycleListener);
  final int chartHeight=getResources().getDimensionPixelSize(R.dimen.data_usage_chart_height);
  mChart=new DataUsageChartView(context);
  mChart.setListener(mChartListener);
  mChart.setLayoutParams(new AbsListView.LayoutParams(MATCH_PARENT,chartHeight));
  mListView.addHeaderView(mChart,null,false);
  mAdapter=new DataUsageAdapter();
  mListView.setOnItemClickListener(mListListener);
  mListView.setAdapter(mAdapter);
  return view;
}
