{
  final Context context=getActivity();
  final boolean appDetailMode=isAppDetailMode();
  mMenuDataRoaming=menu.findItem(R.id.data_usage_menu_roaming);
  mMenuDataRoaming.setVisible(hasReadyMobileRadio(context) && !appDetailMode);
  mMenuDataRoaming.setChecked(getDataRoaming());
  mMenuRestrictBackground=menu.findItem(R.id.data_usage_menu_restrict_background);
  mMenuRestrictBackground.setVisible(hasReadyMobileRadio(context) && !appDetailMode);
  mMenuRestrictBackground.setChecked(mPolicyManager.getRestrictBackground());
  final MenuItem split4g=menu.findItem(R.id.data_usage_menu_split_4g);
  split4g.setVisible(hasReadyMobile4gRadio(context) && !appDetailMode);
  split4g.setChecked(isMobilePolicySplit());
  final MenuItem showWifi=menu.findItem(R.id.data_usage_menu_show_wifi);
  if (hasWifiRadio(context) && hasReadyMobileRadio(context)) {
    showWifi.setVisible(!appDetailMode);
    showWifi.setChecked(mShowWifi);
  }
 else {
    showWifi.setVisible(false);
  }
  final MenuItem showEthernet=menu.findItem(R.id.data_usage_menu_show_ethernet);
  if (hasEthernet(context) && hasReadyMobileRadio(context)) {
    showEthernet.setVisible(!appDetailMode);
    showEthernet.setChecked(mShowEthernet);
  }
 else {
    showEthernet.setVisible(false);
  }
  final MenuItem metered=menu.findItem(R.id.data_usage_menu_metered);
  if (hasReadyMobileRadio(context) || hasWifiRadio(context)) {
    metered.setVisible(!appDetailMode);
  }
 else {
    metered.setVisible(false);
  }
  final MenuItem help=menu.findItem(R.id.data_usage_menu_help);
  String helpUrl;
  if (!TextUtils.isEmpty(helpUrl=getResources().getString(R.string.help_url_data_usage))) {
    Intent helpIntent=new Intent(Intent.ACTION_VIEW,Uri.parse(helpUrl));
    helpIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
    help.setIntent(helpIntent);
    help.setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
  }
 else {
    help.setVisible(false);
  }
}
