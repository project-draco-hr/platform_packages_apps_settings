{
  final Context context=getActivity();
  final boolean appDetailMode=isAppDetailMode();
  final boolean isOwner=ActivityManager.getCurrentUser() == UserHandle.USER_OWNER;
  mMenuShowWifi=menu.findItem(R.id.data_usage_menu_show_wifi);
  if (hasWifiRadio(context) && hasReadyMobileRadio(context)) {
    mMenuShowWifi.setVisible(!appDetailMode);
  }
 else {
    mMenuShowWifi.setVisible(false);
  }
  mMenuShowEthernet=menu.findItem(R.id.data_usage_menu_show_ethernet);
  if (hasEthernet(context) && hasReadyMobileRadio(context)) {
    mMenuShowEthernet.setVisible(!appDetailMode);
  }
 else {
    mMenuShowEthernet.setVisible(false);
  }
  mMenuRestrictBackground=menu.findItem(R.id.data_usage_menu_restrict_background);
  mMenuRestrictBackground.setVisible(hasReadyMobileRadio(context) && isOwner && !appDetailMode);
  final MenuItem metered=menu.findItem(R.id.data_usage_menu_metered);
  if (hasReadyMobileRadio(context) || hasWifiRadio(context)) {
    metered.setVisible(!appDetailMode);
  }
 else {
    metered.setVisible(false);
  }
  mMenuSimCards=menu.findItem(R.id.data_usage_menu_sim_cards);
  mMenuSimCards.setVisible(false);
  mMenuCellularNetworks=menu.findItem(R.id.data_usage_menu_cellular_networks);
  mMenuCellularNetworks.setVisible(hasReadyMobileRadio(context) && !appDetailMode && isOwner);
  final MenuItem help=menu.findItem(R.id.data_usage_menu_help);
  String helpUrl;
  if (!TextUtils.isEmpty(helpUrl=getResources().getString(R.string.help_url_data_usage))) {
    HelpUtils.prepareHelpMenuItem(context,help,helpUrl);
  }
 else {
    help.setVisible(false);
  }
  updateMenuTitles();
}
