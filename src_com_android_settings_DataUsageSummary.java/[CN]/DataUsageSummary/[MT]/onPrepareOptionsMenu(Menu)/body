{
  final Context context=getActivity();
  final boolean appDetailMode=isAppDetailMode();
  final boolean isOwner=ActivityManager.getCurrentUser() == UserHandle.USER_OWNER;
  mMenuDataRoaming=menu.findItem(R.id.data_usage_menu_roaming);
  mMenuDataRoaming.setVisible(hasReadyMobileRadio(context) && !appDetailMode);
  mMenuDataRoaming.setChecked(getDataRoaming());
  mMenuRestrictBackground=menu.findItem(R.id.data_usage_menu_restrict_background);
  mMenuRestrictBackground.setVisible(hasReadyMobileRadio(context) && isOwner && !appDetailMode);
  mMenuRestrictBackground.setChecked(mPolicyManager.getRestrictBackground());
  mMenuAutoSync=menu.findItem(R.id.data_usage_menu_auto_sync);
  mMenuAutoSync.setChecked(ContentResolver.getMasterSyncAutomatically());
  mMenuAutoSync.setVisible(!appDetailMode);
  final MenuItem split4g=menu.findItem(R.id.data_usage_menu_split_4g);
  split4g.setVisible(hasReadyMobile4gRadio(context) && isOwner && !appDetailMode);
  split4g.setChecked(isMobilePolicySplit());
  final MenuItem showWifi=menu.findItem(R.id.data_usage_menu_show_wifi);
  if (hasWifiRadio(context) && hasReadyMobileRadio(context)) {
    showWifi.setVisible(!appDetailMode);
    showWifi.setChecked(mShowWifi);
  }
 else {
    showWifi.setVisible(false);
  }
  final MenuItem showEthernet=menu.findItem(R.id.data_usage_menu_show_ethernet);
  if (hasEthernet(context) && hasReadyMobileRadio(context)) {
    showEthernet.setVisible(!appDetailMode);
    showEthernet.setChecked(mShowEthernet);
  }
 else {
    showEthernet.setVisible(false);
  }
  final MenuItem metered=menu.findItem(R.id.data_usage_menu_metered);
  if (hasReadyMobileRadio(context) || hasWifiRadio(context)) {
    metered.setVisible(!appDetailMode);
  }
 else {
    metered.setVisible(false);
  }
  final MenuItem help=menu.findItem(R.id.data_usage_menu_help);
  String helpUrl;
  if (!TextUtils.isEmpty(helpUrl=getResources().getString(R.string.help_url_data_usage))) {
    HelpUtils.prepareHelpMenuItem(context,help,helpUrl);
  }
 else {
    help.setVisible(false);
  }
}
