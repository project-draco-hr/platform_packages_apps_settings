{
  mBinding=true;
  final Context context=getActivity();
  final String tabTag=mTabHost.getCurrentTabTag();
  final String currentTab;
  if (tabTag != null) {
    currentTab=tabTag;
  }
 else   if (hasMobileRadio(context)) {
    currentTab=TAB_MOBILE;
  }
 else   if (hasWifiRadio(context)) {
    currentTab=TAB_WIFI;
  }
 else {
    throw new IllegalStateException("no mobile or wifi radios");
  }
  final boolean tabChanged=!currentTab.equals(mCurrentTab);
  mCurrentTab=currentTab;
  if (LOGD)   Log.d(TAG,"updateBody() with currentTab=" + currentTab);
  if (TAB_WIFI.equals(currentTab)) {
    mDataEnabledView.setVisibility(View.GONE);
    mDisableAtLimitView.setVisibility(View.GONE);
    mTemplate=new NetworkTemplate(MATCH_WIFI,null);
  }
 else {
    mDataEnabledView.setVisibility(View.VISIBLE);
    mDisableAtLimitView.setVisibility(View.VISIBLE);
  }
  final String subscriberId=getActiveSubscriberId(context);
  if (TAB_MOBILE.equals(currentTab)) {
    setPreferenceTitle(mDataEnabledView,R.string.data_usage_enable_mobile);
    setPreferenceTitle(mDisableAtLimitView,R.string.data_usage_disable_mobile_limit);
    mDataEnabled.setChecked(mConnService.getMobileDataEnabled());
    mTemplate=new NetworkTemplate(MATCH_MOBILE_ALL,subscriberId);
  }
 else   if (TAB_3G.equals(currentTab)) {
    setPreferenceTitle(mDataEnabledView,R.string.data_usage_enable_3g);
    setPreferenceTitle(mDisableAtLimitView,R.string.data_usage_disable_3g_limit);
    mTemplate=new NetworkTemplate(MATCH_MOBILE_3G_LOWER,subscriberId);
  }
 else   if (TAB_4G.equals(currentTab)) {
    setPreferenceTitle(mDataEnabledView,R.string.data_usage_enable_4g);
    setPreferenceTitle(mDisableAtLimitView,R.string.data_usage_disable_4g_limit);
    mTemplate=new NetworkTemplate(MATCH_MOBILE_4G,subscriberId);
  }
  try {
    mHistory=mStatsService.getHistoryForNetwork(mTemplate);
  }
 catch (  RemoteException e) {
    throw new RuntimeException("problem reading network policy or stats",e);
  }
  mChart.bindNetworkStats(mHistory);
  updatePolicy(tabChanged);
  updateAppDetail();
  mListView.smoothScrollToPosition(0);
  mBinding=false;
}
