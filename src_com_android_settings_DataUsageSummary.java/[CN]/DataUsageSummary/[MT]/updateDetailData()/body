{
  if (LOGD)   Log.d(TAG,"updateDetailData()");
  final long start=mChart.getInspectStart();
  final long end=mChart.getInspectEnd();
  final long now=System.currentTimeMillis();
  final Context context=getActivity();
  NetworkStatsHistory.Entry entry=null;
  if (isAppDetailMode() && mDetailHistory != null) {
    entry=mDetailHistoryDefault.getValues(start,end,now,entry);
    final long defaultBytes=entry.rxBytes + entry.txBytes;
    entry=mDetailHistoryForeground.getValues(start,end,now,entry);
    final long foregroundBytes=entry.rxBytes + entry.txBytes;
    mAppPieChart.setOriginAngle(175);
    mAppPieChart.removeAllSlices();
    mAppPieChart.addSlice(foregroundBytes,Color.parseColor("#d88d3a"));
    mAppPieChart.addSlice(defaultBytes,Color.parseColor("#666666"));
    mAppPieChart.generatePath();
    mAppBackground.setText(Formatter.formatFileSize(context,defaultBytes));
    mAppForeground.setText(Formatter.formatFileSize(context,foregroundBytes));
    entry=mDetailHistory.getValues(start,end,now,null);
    getLoaderManager().destroyLoader(LOADER_SUMMARY);
  }
 else {
    entry=mHistory.getValues(start,end,now,null);
    getLoaderManager().restartLoader(LOADER_SUMMARY,SummaryForAllUidLoader.buildArgs(mTemplate,start,end),mSummaryForAllUid);
  }
  final long totalBytes=entry != null ? entry.rxBytes + entry.txBytes : 0;
  final String totalPhrase=Formatter.formatFileSize(context,totalBytes);
  final String rangePhrase=formatDateRange(context,start,end,false);
  mUsageSummary.setText(getString(R.string.data_usage_total_during_range,totalPhrase,rangePhrase));
}
