{
  ListPreference pref=(ListPreference)selectRuntime;
  ArrayList<String> validValues=new ArrayList<String>();
  ArrayList<String> validSummaries=new ArrayList<String>();
  String[] values=getResources().getStringArray(R.array.select_runtime_values);
  String[] summaries=getResources().getStringArray(R.array.select_runtime_summaries);
  for (int i=0; i < values.length; i++) {
    String value=values[i];
    String summary=summaries[i];
    if (new File("/system/lib/" + value).exists()) {
      validValues.add(value);
      validSummaries.add(summary);
    }
  }
  int count=validValues.size();
  if (count <= 1) {
    removePreference(selectRuntime);
  }
 else {
    pref.setEntryValues(validValues.toArray(new String[count]));
    pref.setEntries(validSummaries.toArray(new String[count]));
  }
}
