{
  String currentValue=SystemProperties.get(SELECT_LOGD_DEFAULT_SIZE_PROPERTY);
  if (currentValue != null) {
    DEFAULT_LOG_RING_BUFFER_SIZE_IN_BYTES=currentValue;
  }
  final String size=(newValue != null) ? newValue.toString() : DEFAULT_LOG_RING_BUFFER_SIZE_IN_BYTES;
  SystemProperties.set(SELECT_LOGD_SIZE_PROPERTY,size);
  pokeSystemProperties();
  try {
    Process p=Runtime.getRuntime().exec("logcat -b all -G " + size);
    p.waitFor();
    Log.i(TAG,"Logcat ring buffer sizes set to: " + size);
  }
 catch (  Exception e) {
    Log.w(TAG,"Cannot set logcat ring buffer sizes",e);
  }
  updateLogdSizeValues();
}
