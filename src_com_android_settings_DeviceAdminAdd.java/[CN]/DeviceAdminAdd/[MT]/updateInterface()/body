{
  mAdminIcon.setImageDrawable(mDeviceAdmin.loadIcon(getPackageManager()));
  mAdminName.setText(mDeviceAdmin.loadLabel(getPackageManager()));
  try {
    mAdminDescription.setText(mDeviceAdmin.loadDescription(getPackageManager()));
    mAdminDescription.setVisibility(View.VISIBLE);
  }
 catch (  Resources.NotFoundException e) {
    mAdminDescription.setVisibility(View.GONE);
  }
  if (mAddingProfileOwner) {
    mProfileOwnerWarning.setVisibility(View.VISIBLE);
  }
  if (mAddMsgText != null) {
    mAddMsg.setText(mAddMsgText);
    mAddMsg.setVisibility(View.VISIBLE);
  }
 else {
    mAddMsg.setVisibility(View.GONE);
    mAddMsgExpander.setVisibility(View.GONE);
  }
  if (!mRefreshing && !mAddingProfileOwner && mDPM.isAdminActive(mDeviceAdmin.getComponent())) {
    if (mActivePolicies.size() == 0) {
      ArrayList<DeviceAdminInfo.PolicyInfo> policies=mDeviceAdmin.getUsedPolicies();
      for (int i=0; i < policies.size(); i++) {
        DeviceAdminInfo.PolicyInfo pi=policies.get(i);
        View view=AppSecurityPermissions.getPermissionItemView(this,getText(pi.label),"",true);
        mActivePolicies.add(view);
        mAdminPolicies.addView(view);
      }
    }
    setViewVisibility(mActivePolicies,View.VISIBLE);
    setViewVisibility(mAddingPolicies,View.GONE);
    mAdminWarning.setText(getString(R.string.device_admin_status,mDeviceAdmin.getActivityInfo().applicationInfo.loadLabel(getPackageManager())));
    setTitle(getText(R.string.active_device_admin_msg));
    mActionButton.setText(getText(R.string.remove_device_admin));
    mAdding=false;
  }
 else {
    if (mAddingPolicies.size() == 0) {
      ArrayList<DeviceAdminInfo.PolicyInfo> policies=mDeviceAdmin.getUsedPolicies();
      for (int i=0; i < policies.size(); i++) {
        DeviceAdminInfo.PolicyInfo pi=policies.get(i);
        View view=AppSecurityPermissions.getPermissionItemView(this,getText(pi.label),getText(pi.description),true);
        mAddingPolicies.add(view);
        mAdminPolicies.addView(view);
      }
    }
    setViewVisibility(mAddingPolicies,View.VISIBLE);
    setViewVisibility(mActivePolicies,View.GONE);
    mAdminWarning.setText(getString(R.string.device_admin_warning,mDeviceAdmin.getActivityInfo().applicationInfo.loadLabel(getPackageManager())));
    if (mAddingProfileOwner) {
      setTitle(getText(R.string.profile_owner_add_title));
    }
 else {
      setTitle(getText(R.string.add_device_admin_msg));
    }
    mActionButton.setText(getText(R.string.add_device_admin));
    mAdding=true;
  }
}
