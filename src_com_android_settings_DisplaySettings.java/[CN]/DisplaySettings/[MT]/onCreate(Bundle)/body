{
  super.onCreate(savedInstanceState);
  final ContentResolver resolver=getActivity().getContentResolver();
  addPreferencesFromResource(R.xml.display_settings);
  mScreenSaverPreference=findPreference(KEY_SCREEN_SAVER);
  if (mScreenSaverPreference != null && getResources().getBoolean(com.android.internal.R.bool.config_dreamsSupported) == false) {
    getPreferenceScreen().removePreference(mScreenSaverPreference);
  }
  mScreenTimeoutPreference=(ListPreference)findPreference(KEY_SCREEN_TIMEOUT);
  final long currentTimeout=Settings.System.getLong(resolver,SCREEN_OFF_TIMEOUT,FALLBACK_SCREEN_TIMEOUT_VALUE);
  mScreenTimeoutPreference.setValue(String.valueOf(currentTimeout));
  mScreenTimeoutPreference.setOnPreferenceChangeListener(this);
  disableUnusableTimeouts(mScreenTimeoutPreference);
  updateTimeoutPreferenceDescription(currentTimeout);
  mFontSizePref=(WarnedListPreference)findPreference(KEY_FONT_SIZE);
  mFontSizePref.setOnPreferenceChangeListener(this);
  mFontSizePref.setOnPreferenceClickListener(this);
  if (isAutomaticBrightnessAvailable(getResources())) {
    mAutoBrightnessPreference=(SwitchPreference)findPreference(KEY_AUTO_BRIGHTNESS);
    mAutoBrightnessPreference.setOnPreferenceChangeListener(this);
  }
 else {
    removePreference(KEY_AUTO_BRIGHTNESS);
  }
  if (isLiftToWakeAvailable(getActivity())) {
    mLiftToWakePreference=(SwitchPreference)findPreference(KEY_LIFT_TO_WAKE);
    mLiftToWakePreference.setOnPreferenceChangeListener(this);
  }
 else {
    removePreference(KEY_LIFT_TO_WAKE);
  }
  if (isDozeAvailable(getActivity())) {
    mDozePreference=(SwitchPreference)findPreference(KEY_DOZE);
    mDozePreference.setOnPreferenceChangeListener(this);
  }
 else {
    removePreference(KEY_DOZE);
  }
}
