{
  super.onActivityCreated(savedInstanceState);
  addPreferencesFromResource(R.xml.dream_settings);
  mActivateOnDockPreference=(CheckBoxPreference)findPreference(KEY_ACTIVATE_ON_DOCK);
  final Activity activity=getActivity();
  mEnableSwitch=new Switch(activity);
  if (activity instanceof PreferenceActivity) {
    PreferenceActivity preferenceActivity=(PreferenceActivity)activity;
    if (preferenceActivity.onIsHidingHeaders() || !preferenceActivity.onIsMultiPane()) {
      final int padding=activity.getResources().getDimensionPixelSize(R.dimen.action_bar_switch_padding);
      mEnableSwitch.setPadding(0,0,padding,0);
      activity.getActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,ActionBar.DISPLAY_SHOW_CUSTOM);
      activity.getActionBar().setCustomView(mEnableSwitch,new ActionBar.LayoutParams(ActionBar.LayoutParams.WRAP_CONTENT,ActionBar.LayoutParams.WRAP_CONTENT,Gravity.CENTER_VERTICAL | Gravity.RIGHT));
      activity.getActionBar().setTitle(R.string.screensaver_settings_title);
    }
  }
  mEnabler=new Enabler(activity,mEnableSwitch);
}
