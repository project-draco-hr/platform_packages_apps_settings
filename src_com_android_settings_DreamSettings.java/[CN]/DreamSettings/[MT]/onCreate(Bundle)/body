{
  logd("onCreate(%s)",icicle);
  super.onCreate(icicle);
  Activity activity=getActivity();
  mBackend=new DreamBackend(activity);
  mSwitch=new Switch(activity);
  mSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      if (!mRefreshing) {
        mBackend.setEnabled(isChecked);
        refreshFromBackend();
      }
    }
  }
);
  final int padding=activity.getResources().getDimensionPixelSize(R.dimen.action_bar_switch_padding);
  mSwitch.setPadding(0,0,padding,0);
  activity.getActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,ActionBar.DISPLAY_SHOW_CUSTOM);
  activity.getActionBar().setCustomView(mSwitch,new ActionBar.LayoutParams(ActionBar.LayoutParams.WRAP_CONTENT,ActionBar.LayoutParams.WRAP_CONTENT,Gravity.CENTER_VERTICAL | Gravity.END));
  setHasOptionsMenu(true);
}
