{
  super(context,attrs);
  mContext=context;
  mAdapter=new ArrayAdapter<String>(mContext,android.R.layout.simple_spinner_dropdown_item);
  mSpinner=new Spinner(mContext);
  mSpinner.setVisibility(View.INVISIBLE);
  mSpinner.setAdapter(mAdapter);
  mSpinner.setOnItemSelectedListener(new OnItemSelectedListener(){
    @Override public void onItemSelected(    AdapterView<?> parent,    View v,    int position,    long id){
      setSelectedItem(position);
    }
    @Override public void onNothingSelected(    AdapterView<?> parent){
    }
  }
);
  setPersistent(false);
  setOnPreferenceClickListener(new OnPreferenceClickListener(){
    @Override public boolean onPreferenceClick(    Preference preference){
      mSpinner.performClick();
      return true;
    }
  }
);
}
