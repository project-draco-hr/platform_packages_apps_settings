{
  final HashSet<String> enabled=new HashSet<String>();
  String enabledStr=Settings.Secure.getString(getContentResolver(),Settings.Secure.ENABLED_INPUT_METHODS);
  if (enabledStr != null) {
    final TextUtils.SimpleStringSplitter splitter=mStringColonSplitter;
    splitter.setString(enabledStr);
    while (splitter.hasNext()) {
      enabled.add(splitter.next());
    }
  }
  int N=mInputMethodProperties.size();
  for (int i=0; i < N; ++i) {
    final String id=mInputMethodProperties.get(i).getId();
    CheckBoxPreference pref=(CheckBoxPreference)findPreference(mInputMethodProperties.get(i).getId());
    if (pref != null) {
      boolean isEnabled=enabled.contains(id);
      pref.setChecked(isEnabled);
      setSubtypesPreferenceEnabled(id,isEnabled);
    }
  }
  mLastTickedInputMethodId=null;
}
