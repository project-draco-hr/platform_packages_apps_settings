{
  boolean visible=true;
  if ((mAppInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
    if ((mAppInfo.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) != 0) {
      mAppButtonState=AppButtonStates.FACTORY_RESET;
      mAppButtonText=getText(R.string.app_factory_reset);
    }
 else {
      if ((mAppInfo.flags & ApplicationInfo.FLAG_ALLOW_CLEAR_USER_DATA) == 0) {
        mAppButtonState=AppButtonStates.NONE;
        visible=false;
      }
 else {
        mAppButtonState=AppButtonStates.CLEAR_DATA;
        mAppButtonText=getText(R.string.clear_user_data_text);
      }
    }
  }
 else {
    mAppButtonState=AppButtonStates.UNINSTALL;
    mAppButtonText=getText(R.string.uninstall_text);
  }
  if (visible) {
    mAppButton.setText(mAppButtonText);
    mAppButton.setVisibility(View.VISIBLE);
  }
 else {
    mAppButton.setVisibility(View.GONE);
  }
}
