{
  Item item=mItems.get(position);
  Intent intent=item.getIntent();
  int result;
  if (item.extras != null) {
    result=RESULT_OK;
    setResultData(result,intent);
  }
 else {
    try {
      if (mAddingToKeyguard && mAppWidgetId == AppWidgetManager.INVALID_APPWIDGET_ID) {
        final int KEYGUARD_HOST_ID=0x4B455947;
        int userId=ActivityManager.getCurrentUser();
        mAppWidgetId=AppWidgetHost.allocateAppWidgetIdForPackage(KEYGUARD_HOST_ID,userId,"com.android.keyguard");
      }
      mAppWidgetManager.bindAppWidgetId(mAppWidgetId,intent.getComponent(),mExtraConfigureOptions);
      result=RESULT_OK;
    }
 catch (    IllegalArgumentException e) {
      result=RESULT_CANCELED;
    }
    setResultData(result,null);
  }
  if (mAddingToKeyguard) {
    onActivityResult(REQUEST_PICK_APPWIDGET,result,mResultData);
  }
 else {
    finish();
  }
}
