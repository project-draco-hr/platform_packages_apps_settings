{
  super.onCreate(icicle);
  setContentView(getContentView());
  String[] locales=getAssets().getLocales();
  final int N=locales.length;
  mLocales=new Loc[N];
  for (int i=0; i < N; i++) {
    Locale locale=null;
    String s=locales[i];
    int len=s.length();
    if (len == 0) {
      locale=new Locale("en","US");
    }
 else     if (len == 2) {
      locale=new Locale(s);
    }
 else     if (len == 5) {
      locale=new Locale(s.substring(0,2),s.substring(3,5));
    }
    String displayName="";
    if (locale != null) {
      displayName=locale.getDisplayName();
    }
    if ("zz_ZZ".equals(s)) {
      displayName="Pseudo...";
    }
    mLocales[i]=new Loc(displayName,locale);
  }
  int layoutId=R.layout.locale_picker_item;
  int fieldId=R.id.locale;
  ArrayAdapter<Loc> adapter=new ArrayAdapter<Loc>(this,layoutId,fieldId,mLocales);
  getListView().setAdapter(adapter);
}
