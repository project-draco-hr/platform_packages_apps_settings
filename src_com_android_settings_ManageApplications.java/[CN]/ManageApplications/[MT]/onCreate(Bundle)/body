{
  super.onCreate(savedInstanceState);
  if (localLOGV)   Log.i(TAG,"Activity created");
  long sCreate;
  if (DEBUG_TIME) {
    sCreate=SystemClock.elapsedRealtime();
  }
  Intent intent=getIntent();
  String action=intent.getAction();
  String defaultTabTag=TAB_DOWNLOADED;
  if (action.equals(Intent.ACTION_MANAGE_PACKAGE_STORAGE)) {
    mSortOrder=SORT_ORDER_SIZE;
    mFilterApps=FILTER_APPS_ALL;
    defaultTabTag=TAB_ALL;
    mSizesFirst=true;
  }
  mPm=getPackageManager();
  requestWindowFeature(Window.FEATURE_RIGHT_ICON);
  requestWindowFeature(Window.FEATURE_PROGRESS);
  requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
  showLoadingMsg();
  mDefaultAppIcon=Resources.getSystem().getDrawable(com.android.internal.R.drawable.sym_def_app_icon);
  mInvalidSizeStr=getText(R.string.invalid_size_value);
  mComputingSizeStr=getText(R.string.computing_size);
  mInflater=(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  mRootView=mInflater.inflate(R.layout.compute_sizes,null);
  mReceiver=new PackageIntentReceiver();
  mObserver=new PkgSizeObserver();
  List<ApplicationInfo> appList=getInstalledApps(mSortOrder);
  mAppInfoAdapter=new AppInfoAdapter(this,appList);
  ListView lv=(ListView)mRootView.findViewById(android.R.id.list);
  lv.setOnItemClickListener(this);
  lv.setSaveEnabled(true);
  lv.setItemsCanFocus(true);
  lv.setOnItemClickListener(this);
  lv.setTextFilterEnabled(true);
  mListView=lv;
  if (DEBUG_TIME) {
    Log.i(TAG,"Total time in Activity.create:: " + (SystemClock.elapsedRealtime() - sCreate) + " ms");
  }
  long sStart;
  if (DEBUG_TIME) {
    sStart=SystemClock.elapsedRealtime();
  }
  mCache.loadCache();
  if (DEBUG_TIME) {
    Log.i(TAG,"Took " + (SystemClock.elapsedRealtime() - sStart) + " ms to init cache");
  }
  final TabHost tabHost=getTabHost();
  tabHost.addTab(tabHost.newTabSpec(TAB_DOWNLOADED).setIndicator(getString(R.string.filter_apps_third_party)).setContent(this));
  tabHost.addTab(tabHost.newTabSpec(TAB_RUNNING).setIndicator(getString(R.string.filter_apps_running)).setContent(this));
  tabHost.addTab(tabHost.newTabSpec(TAB_ALL).setIndicator(getString(R.string.filter_apps_all)).setContent(this));
  tabHost.setCurrentTabByTag(defaultTabTag);
  tabHost.setOnTabChangedListener(this);
}
