{
  super.onCreate(savedInstanceState);
  Intent lIntent=getIntent();
  String action=lIntent.getAction();
  if (action.equals(Intent.ACTION_MANAGE_PACKAGE_STORAGE)) {
    mSortOrder=SORT_ORDER_SIZE;
    mSizesFirst=true;
  }
  mPm=getPackageManager();
  requestWindowFeature(Window.FEATURE_RIGHT_ICON);
  requestWindowFeature(Window.FEATURE_PROGRESS);
  requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
  setContentView(R.layout.compute_sizes);
  mDefaultAppIcon=Resources.getSystem().getDrawable(com.android.internal.R.drawable.sym_def_app_icon);
  mInvalidSizeStr=getText(R.string.invalid_size_value);
  mComputingSizeStr=getText(R.string.computing_size);
  mInflater=(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  mReceiver=new PackageIntentReceiver();
  mEmptyView=(TextView)findViewById(R.id.empty_view);
  mObserver=new PkgSizeObserver();
  List<ApplicationInfo> appList=getInstalledApps(mSortOrder);
  mAppInfoAdapter=new AppInfoAdapter(this,appList);
  ListView lv=(ListView)findViewById(android.R.id.list);
  lv.setOnItemClickListener(this);
  lv.setSaveEnabled(true);
  lv.setItemsCanFocus(true);
  lv.setOnItemClickListener(this);
  mListView=lv;
  showLoadingMsg();
}
