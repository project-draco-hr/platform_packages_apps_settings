{
  super.onResume();
  boolean prefsEnabled=(mLockPatternUtils.isLockPasswordEnabled() || mLockPatternUtils.isLockPatternEnabled()) && mNfcAdapter.isEnabled();
  CheckBoxPreference unlockPref=(CheckBoxPreference)findPreference(NFC_UNLOCK_ENABLED);
  unlockPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener(){
    @Override public boolean onPreferenceChange(    Preference preference,    Object newValue){
      mNfcUnlock.setNfcUnlockEnabled((Boolean)newValue);
      return true;
    }
  }
);
  Preference pairingPref=findPreference(NFC_PAIRING);
  unlockPref.setEnabled(prefsEnabled);
  pairingPref.setEnabled(prefsEnabled);
  long[] tagRegistryTimes=mNfcUnlock.getTagRegistryTimes();
  unlockPref.setChecked(mNfcUnlock.getNfcUnlockEnabled());
  final PreferenceCategory pairedTags=(PreferenceCategory)findPreference(TAGS_CATEGORY);
  pairedTags.setEnabled(prefsEnabled);
  loadTagList(tagRegistryTimes,pairedTags);
}
