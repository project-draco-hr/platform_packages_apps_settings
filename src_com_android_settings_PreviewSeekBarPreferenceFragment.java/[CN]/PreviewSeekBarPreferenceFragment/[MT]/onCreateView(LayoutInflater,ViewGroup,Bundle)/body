{
  final View root=super.onCreateView(inflater,container,savedInstanceState);
  final ViewGroup listContainer=(ViewGroup)root.findViewById(android.R.id.list_container);
  listContainer.removeAllViews();
  final View content=inflater.inflate(mActivityLayoutResId,listContainer,false);
  listContainer.addView(content);
  mLabel=(TextView)content.findViewById(R.id.current_label);
  final int max=Math.max(1,mEntries.length - 1);
  final SeekBar seekBar=(SeekBar)content.findViewById(R.id.seek_bar);
  seekBar.setMax(max);
  seekBar.setProgress(mInitialIndex);
  seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener(){
    @Override public void onProgressChanged(    SeekBar seekBar,    int progress,    boolean fromUser){
      setPreviewLayer(progress,true);
    }
    @Override public void onStartTrackingTouch(    SeekBar seekBar){
    }
    @Override public void onStopTrackingTouch(    SeekBar seekBar){
    }
  }
);
  mSmaller=content.findViewById(R.id.smaller);
  mSmaller.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final int progress=seekBar.getProgress();
      if (progress > 0) {
        seekBar.setProgress(progress - 1,true);
      }
    }
  }
);
  mLarger=content.findViewById(R.id.larger);
  mLarger.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final int progress=seekBar.getProgress();
      if (progress < seekBar.getMax()) {
        seekBar.setProgress(progress + 1,true);
      }
    }
  }
);
  if (mEntries.length == 1) {
    seekBar.setEnabled(false);
  }
  mPreviewFrame=(FrameLayout)content.findViewById(R.id.preview_frame);
  final Context context=getContext();
  final Configuration origConfig=context.getResources().getConfiguration();
  for (int i=0; i < mEntries.length; ++i) {
    final Configuration config=createConfig(origConfig,i);
    final Context configContext=context.createConfigurationContext(config);
    configContext.setTheme(context.getThemeResId());
    final LayoutInflater configInflater=LayoutInflater.from(configContext);
    final View sampleView=configInflater.inflate(mPreviewSampleResId,mPreviewFrame,false);
    sampleView.setAlpha(0);
    sampleView.setVisibility(View.INVISIBLE);
    mPreviewFrame.addView(sampleView);
  }
  setPreviewLayer(mInitialIndex,false);
  return root;
}
