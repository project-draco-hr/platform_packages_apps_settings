{
  Set<ComponentName> enabledServices=sEnabledServiceNameSet;
  ComponentName toggledService=ComponentName.unflattenFromString(preferenceKey);
  if (enabled) {
    enabledServices.add(toggledService);
  }
 else {
    enabledServices.remove(toggledService);
  }
  StringBuilder enabledServicesBuilder=new StringBuilder();
  for (  ComponentName enabledService : enabledServices) {
    enabledServicesBuilder.append(enabledService.flattenToString());
    enabledServicesBuilder.append(ENABLED_PRINT_SERVICES_SEPARATOR);
  }
  final int enabledServicesBuilderLength=enabledServicesBuilder.length();
  if (enabledServicesBuilderLength > 0) {
    enabledServicesBuilder.deleteCharAt(enabledServicesBuilderLength - 1);
  }
  Settings.Secure.putString(getContentResolver(),Settings.Secure.ENABLED_PRINT_SERVICES,enabledServicesBuilder.toString());
}
