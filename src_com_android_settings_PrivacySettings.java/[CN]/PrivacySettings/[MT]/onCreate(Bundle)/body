{
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.privacy_settings);
  final PreferenceScreen screen=getPreferenceScreen();
  mUseLocation=(CheckBoxPreference)screen.findPreference(USE_LOCATION);
  mBackup=(CheckBoxPreference)screen.findPreference(BACKUP_SETTINGS);
  mAutoRestore=(CheckBoxPreference)screen.findPreference(AUTO_RESTORE);
  if (getPackageManager().resolveContentProvider(GSETTINGS_PROVIDER,0) == null) {
    screen.removePreference(findPreference(LOCATION_CATEGORY));
    screen.removePreference(findPreference(BACKUP_CATEGORY));
  }
  updateToggles();
  boolean doneUseLocation=savedInstanceState == null ? false : savedInstanceState.getBoolean(KEY_DONE_USE_LOCATION,true);
  if (!doneUseLocation && (getIntent().getBooleanExtra("SHOW_USE_LOCATION",false) || savedInstanceState != null)) {
    showUseLocationDialog(true);
  }
}
