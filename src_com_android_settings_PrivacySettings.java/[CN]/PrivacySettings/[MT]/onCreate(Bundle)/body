{
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.privacy_settings);
  final PreferenceScreen screen=getPreferenceScreen();
  mBackupManager=IBackupManager.Stub.asInterface(ServiceManager.getService(Context.BACKUP_SERVICE));
  mBackup=(SwitchPreference)screen.findPreference(BACKUP_DATA);
  mBackup.setOnPreferenceChangeListener(preferenceChangeListener);
  mAutoRestore=(SwitchPreference)screen.findPreference(AUTO_RESTORE);
  mAutoRestore.setOnPreferenceChangeListener(preferenceChangeListener);
  mConfigure=(PreferenceScreen)screen.findPreference(CONFIGURE_ACCOUNT);
  if (UserManager.get(getActivity()).hasUserRestriction(UserManager.DISALLOW_FACTORY_RESET)) {
    screen.removePreference(findPreference(PERSONAL_DATA_CATEGORY));
  }
  if (getActivity().getPackageManager().resolveContentProvider(GSETTINGS_PROVIDER,0) == null) {
    screen.removePreference(findPreference(BACKUP_CATEGORY));
  }
  updateToggles();
}
