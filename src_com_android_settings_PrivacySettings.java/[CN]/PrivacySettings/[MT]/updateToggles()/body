{
  ContentResolver res=getContentResolver();
  boolean backupEnabled=false;
  Intent configIntent=null;
  String configSummary=null;
  try {
    backupEnabled=mBackupManager.isBackupEnabled();
    String transport=mBackupManager.getCurrentTransport();
    configIntent=mBackupManager.getConfigurationIntent(transport);
    configSummary=mBackupManager.getDestinationString(transport);
    mBackup.setSummary(backupEnabled ? R.string.accessibility_feature_state_on : R.string.accessibility_feature_state_off);
  }
 catch (  RemoteException e) {
    mBackup.setEnabled(false);
  }
  mAutoRestore.setChecked(Settings.Secure.getInt(res,Settings.Secure.BACKUP_AUTO_RESTORE,1) == 1);
  mAutoRestore.setEnabled(backupEnabled);
  final boolean configureEnabled=(configIntent != null) && backupEnabled;
  mConfigure.setEnabled(configureEnabled);
  mConfigure.setIntent(configIntent);
  setConfigureSummary(configSummary);
  RestrictedPreference networkResetPref=(RestrictedPreference)findPreference(NETWORK_RESET);
  if (networkResetPref != null) {
    networkResetPref.checkRestrictionAndSetDisabled(UserManager.DISALLOW_NETWORK_RESET);
  }
}
