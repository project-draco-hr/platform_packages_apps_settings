{
  final Activity activity=getActivity();
  String hostname=null;
  int port=-1;
  String exclList=null;
  if (useDefault) {
    hostname=Proxy.getDefaultHost();
    port=Proxy.getDefaultPort();
  }
 else {
    ContentResolver res=getActivity().getContentResolver();
    hostname=Proxy.getHost(activity);
    port=Proxy.getPort(activity);
    exclList=Settings.Secure.getString(res,Settings.Secure.HTTP_PROXY_EXCLUSION_LIST);
  }
  if (hostname == null) {
    hostname="";
  }
  mHostnameField.setText(hostname);
  String portStr=port == -1 ? "" : Integer.toString(port);
  mPortField.setText(portStr);
  mExclusionListField.setText(exclList);
  final Intent intent=activity.getIntent();
  String buttonLabel=intent.getStringExtra("button-label");
  if (!TextUtils.isEmpty(buttonLabel)) {
    mOKButton.setText(buttonLabel);
  }
  String title=intent.getStringExtra("title");
  if (!TextUtils.isEmpty(title)) {
    activity.setTitle(title);
  }
}
