{
  StringBuilder sb=new StringBuilder("========DATA=======\n");
  List<DataConnection> dcs=phone.getCurrentDataConnectionList();
  for (  DataConnection dc : dcs) {
    sb.append("    State: ").append(dc.getStateAsString()).append("\n");
    if (dc.isActive()) {
      long timeElapsed=(System.currentTimeMillis() - dc.getConnectionTime()) / 1000;
      sb.append("    connected at ").append(DateUtils.timeString(dc.getConnectionTime())).append(" and elapsed ").append(DateUtils.formatElapsedTime(timeElapsed));
      if (dc instanceof GsmDataConnection) {
        GsmDataConnection pdp=(GsmDataConnection)dc;
        sb.append("\n    to ").append(pdp.getApn().toString());
      }
      String[] activeApnTypes=phone.getActiveApnTypes();
      if (activeApnTypes.length > 0) {
        sb.append("\ninterface: ").append(phone.getInterfaceName(activeApnTypes[0])).append("\naddress: ").append(phone.getIpAddress(activeApnTypes[0])).append("\ngateway: ").append(phone.getGateway(activeApnTypes[0]));
        String[] dns=phone.getDnsServers(activeApnTypes[0]);
        if (dns != null) {
          sb.append("\ndns: ").append(dns[0]).append(", ").append(dns[1]);
        }
      }
    }
 else     if (dc.isInactive()) {
      sb.append("    disconnected with last try at ").append(DateUtils.timeString(dc.getLastFailTime())).append("\n    fail because ").append(dc.getLastFailCause().toString());
    }
 else {
      if (dc instanceof GsmDataConnection) {
        GsmDataConnection pdp=(GsmDataConnection)dc;
        sb.append("    is connecting to ").append(pdp.getApn().toString());
      }
 else {
        sb.append("    is connecting");
      }
    }
    sb.append("\n===================");
  }
  disconnects.setText(sb.toString());
}
