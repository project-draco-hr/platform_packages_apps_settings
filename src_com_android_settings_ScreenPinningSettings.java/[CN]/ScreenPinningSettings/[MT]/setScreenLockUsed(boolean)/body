{
  if (isEnabled) {
    LockPatternUtils lockPatternUtils=new LockPatternUtils(getActivity());
    if (lockPatternUtils.getKeyguardStoredPasswordQuality() == DevicePolicyManager.PASSWORD_QUALITY_UNSPECIFIED) {
      Intent chooseLockIntent=new Intent(DevicePolicyManager.ACTION_SET_NEW_PASSWORD);
      chooseLockIntent.putExtra(ChooseLockGeneric.ChooseLockGenericFragment.MINIMUM_QUALITY_KEY,DevicePolicyManager.PASSWORD_QUALITY_SOMETHING);
      startActivityForResult(chooseLockIntent,CHANGE_LOCK_METHOD_REQUEST);
      return false;
    }
  }
  Settings.Secure.putInt(getContentResolver(),Settings.Secure.LOCK_TO_APP_EXIT_LOCKED,isEnabled ? 1 : 0);
  return true;
}
