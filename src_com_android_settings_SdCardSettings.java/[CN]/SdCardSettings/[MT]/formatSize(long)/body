{
  String suffix=null;
  if (size >= 1024) {
    suffix="K";
    size/=1024;
    if (size >= 1024) {
      suffix="M";
      size/=1024;
    }
  }
  StringBuilder resultBuffer=new StringBuilder(Long.toString(size));
  int commaOffset=resultBuffer.length() - 3;
  while (commaOffset > 0) {
    resultBuffer.insert(commaOffset,',');
    commaOffset-=3;
  }
  if (suffix != null)   resultBuffer.append(suffix);
  return resultBuffer.toString();
}
