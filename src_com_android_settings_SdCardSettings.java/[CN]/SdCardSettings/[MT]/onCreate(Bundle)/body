{
  super.onCreate(icicle);
  setContentView(R.layout.sdcard_settings_screen);
  mStorageManager=(StorageManager)getSystemService(Context.STORAGE_SERVICE);
  mMountService=IMountService.Stub.asInterface(ServiceManager.getService("mount"));
  mRemovedLayout=findViewById(R.id.removed);
  mMountedLayout=findViewById(R.id.mounted);
  mUnmountedLayout=findViewById(R.id.unmounted);
  mScanningLayout=findViewById(R.id.scanning);
  mSharedLayout=findViewById(R.id.shared);
  mBadRemovalLayout=findViewById(R.id.bad_removal);
  mReadOnlyStatus=findViewById(R.id.read_only);
  mMassStorage=(CheckBox)findViewById(R.id.mass_storage);
  mMassStorage.setOnClickListener(mMassStorageListener);
  Button unmountButton=(Button)findViewById(R.id.sdcard_unmount);
  unmountButton.setOnClickListener(mUnmountButtonHandler);
  Button formatButton=(Button)findViewById(R.id.sdcard_format);
  formatButton.setOnClickListener(mFormatButtonHandler);
  mTotalSize=(TextView)findViewById(R.id.total);
  mUsedSize=(TextView)findViewById(R.id.used);
  mAvailableSize=(TextView)findViewById(R.id.available);
  IntentFilter intentFilter=new IntentFilter(Intent.ACTION_MEDIA_REMOVED);
  intentFilter.addAction(Intent.ACTION_MEDIA_UNMOUNTED);
  intentFilter.addAction(Intent.ACTION_MEDIA_MOUNTED);
  intentFilter.addAction(Intent.ACTION_MEDIA_SHARED);
  intentFilter.addAction(Intent.ACTION_MEDIA_CHECKING);
  intentFilter.addAction(Intent.ACTION_MEDIA_NOFS);
  intentFilter.addAction(Intent.ACTION_MEDIA_BAD_REMOVAL);
  intentFilter.addAction(Intent.ACTION_MEDIA_SCANNER_STARTED);
  intentFilter.addAction(Intent.ACTION_MEDIA_SCANNER_FINISHED);
  intentFilter.addDataScheme("file");
  registerReceiver(mReceiver,intentFilter);
}
