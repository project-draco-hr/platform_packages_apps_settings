{
  if (mSubmit && !isFinishing()) {
    mSubmit=false;
    if (!checkPassword((Dialog)dialog)) {
      ((Dialog)dialog).show();
      return;
    }
  }
  updatePreferences(mState);
  if (mExternal) {
    finish();
  }
}
