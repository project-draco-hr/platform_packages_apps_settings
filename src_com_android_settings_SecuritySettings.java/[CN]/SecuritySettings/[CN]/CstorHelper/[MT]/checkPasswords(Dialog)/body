{
  hideError();
  String oldPasswd=getText(R.id.cstor_old_password);
  String newPasswd=getText(R.id.cstor_new_password);
  String confirmPasswd=getText(R.id.cstor_confirm_password);
  if ((mDialogId == CSTOR_CHANGE_PASSWORD_DIALOG) && TextUtils.isEmpty(oldPasswd)) {
    showError(R.string.cstor_password_empty_error);
  }
 else   if (TextUtils.isEmpty(newPasswd) || TextUtils.isEmpty(confirmPasswd)) {
    showError(R.string.cstor_passwords_empty_error);
  }
 else   if (newPasswd.length() < CSTOR_MIN_PASSWORD_LENGTH) {
    showError(R.string.cstor_password_verification_error);
  }
 else   if (!newPasswd.equals(confirmPasswd)) {
    showError(R.string.cstor_passwords_error);
  }
 else {
    if (mDialogId == CSTOR_CHANGE_PASSWORD_DIALOG) {
      return !checkError(changeCstorPassword(oldPasswd,newPasswd));
    }
 else {
      initCstor(newPasswd);
      return true;
    }
  }
  return false;
}
