{
  final CharSequence[] entries=mLockAfter.getEntries();
  final CharSequence[] values=mLockAfter.getEntryValues();
  long maxTimeoutSelectable=0;
  int maxTimeoutEntryIndex=-1;
  for (int i=0; i < values.length; i++) {
    long timeout=Long.parseLong(values[i].toString());
    if (timeout > maxTimeout) {
      break;
    }
    maxTimeoutSelectable=timeout;
    maxTimeoutEntryIndex=i;
  }
  if (maxTimeoutSelectable == 0) {
    mLockAfter.setDisabledByAdmin(admin);
    return;
  }
 else {
    mLockAfter.setDisabledByAdmin(null);
  }
  mLockAfter.clearRestrictedItems();
  for (int i=maxTimeoutEntryIndex + 1; i < values.length; i++) {
    mLockAfter.addRestrictedItem(new RestrictedItem(entries[i],values[i],admin));
  }
  final int userPreference=Integer.valueOf(mLockAfter.getValue());
  if (userPreference <= maxTimeout) {
    mLockAfter.setValue(String.valueOf(userPreference));
  }
 else   if (maxTimeoutSelectable == maxTimeout) {
    mLockAfter.setValue(String.valueOf(maxTimeout));
  }
 else {
  }
}
