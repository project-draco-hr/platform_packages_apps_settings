{
  if (value == null) {
    int mode=mLockPatternUtils.getKeyguardStoredPasswordQuality();
    if (DevicePolicyManager.PASSWORD_QUALITY_SOMETHING == mode) {
      value="pattern";
    }
 else     if (DevicePolicyManager.PASSWORD_QUALITY_ALPHABETIC == mode || DevicePolicyManager.PASSWORD_QUALITY_ALPHANUMERIC == mode) {
      value="password";
    }
 else     if (DevicePolicyManager.PASSWORD_QUALITY_NUMERIC == mode) {
      value="pin";
    }
 else {
      throw new IllegalStateException("Unknown password mode: " + value);
    }
  }
  if ("none".equals(value)) {
    if (mDPM.getPasswordQuality(null) == DevicePolicyManager.PASSWORD_QUALITY_UNSPECIFIED) {
      mChooseLockSettingsHelper.launchConfirmationActivity(CONFIRM_EXISTING_REQUEST);
    }
  }
 else {
    int reqMode;
    if ("password".equals(value)) {
      reqMode=DevicePolicyManager.PASSWORD_QUALITY_ALPHABETIC;
    }
 else     if ("pin".equals(value)) {
      reqMode=DevicePolicyManager.PASSWORD_QUALITY_NUMERIC;
    }
 else {
      reqMode=DevicePolicyManager.PASSWORD_QUALITY_SOMETHING;
    }
    int minMode=mDPM.getPasswordQuality(null);
    if (reqMode < minMode) {
      reqMode=minMode;
    }
    Intent intent=new Intent();
    intent.setClass(this,ChooseLockGeneric.class);
    intent.putExtra(LockPatternUtils.PASSWORD_TYPE_KEY,reqMode);
    startActivityForResult(intent,UPDATE_PASSWORD_REQUEST);
  }
}
