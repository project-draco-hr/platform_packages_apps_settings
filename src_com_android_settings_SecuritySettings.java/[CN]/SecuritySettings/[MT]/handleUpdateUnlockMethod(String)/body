{
  if (value == null) {
    int mode=mLockPatternUtils.getPasswordMode();
    if (LockPatternUtils.MODE_PATTERN == mode) {
      value="pattern";
    }
 else     if (LockPatternUtils.MODE_PASSWORD == mode) {
      value="password";
    }
 else     if (LockPatternUtils.MODE_PIN == mode) {
      value="pin";
    }
 else {
      throw new IllegalStateException("Unknown password mode: " + value);
    }
  }
  if ("none".equals(value)) {
    if (mDPM.getPasswordQuality(null) == DevicePolicyManager.PASSWORD_QUALITY_UNSPECIFIED) {
      mChooseLockSettingsHelper.launchConfirmationActivity(CONFIRM_EXISTING_REQUEST);
    }
  }
 else {
    int reqMode;
    if ("password".equals(value)) {
      reqMode=LockPatternUtils.MODE_PASSWORD;
    }
 else     if ("pin".equals(value)) {
      reqMode=LockPatternUtils.MODE_PIN;
    }
 else {
      reqMode=LockPatternUtils.MODE_PATTERN;
    }
    int minMode=mDPM.getPasswordQuality(null);
    if (reqMode < minMode) {
      reqMode=minMode;
    }
    Intent intent=new Intent();
    intent.setClass(this,ChooseLockGeneric.class);
    intent.putExtra(LockPatternUtils.PASSWORD_TYPE_KEY,reqMode);
    startActivityForResult(intent,UPDATE_PASSWORD_REQUEST);
  }
}
