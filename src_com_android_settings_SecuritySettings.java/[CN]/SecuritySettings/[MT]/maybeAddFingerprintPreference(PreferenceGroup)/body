{
  FingerprintManager fpm=(FingerprintManager)getActivity().getSystemService(Context.FINGERPRINT_SERVICE);
  if (!fpm.isHardwareDetected()) {
    Log.v(TAG,"No fingerprint hardware detected!!");
    return;
  }
  Preference fingerprintPreference=new Preference(securityCategory.getContext());
  fingerprintPreference.setKey(KEY_FINGERPRINT_SETTINGS);
  fingerprintPreference.setTitle(R.string.security_settings_fingerprint_preference_title);
  Intent intent=new Intent();
  final List<Fingerprint> items=fpm.getEnrolledFingerprints();
  final int fingerprintCount=items != null ? items.size() : 0;
  final String clazz;
  boolean hasPassword=mChooseLockSettingsHelper.utils().getActivePasswordQuality(MY_USER_ID) != DevicePolicyManager.PASSWORD_QUALITY_UNSPECIFIED;
  if (fingerprintCount > 0) {
    fingerprintPreference.setSummary(getResources().getQuantityString(R.plurals.security_settings_fingerprint_preference_summary,fingerprintCount,fingerprintCount));
    clazz=FingerprintSettings.class.getName();
  }
 else {
    clazz=FingerprintEnrollIntroduction.class.getName();
    intent.putExtra(FingerprintEnrollIntroduction.EXTRA_HAS_PASSWORD,hasPassword);
  }
  intent.setClassName("com.android.settings",clazz);
  fingerprintPreference.setIntent(intent);
  securityCategory.addPreference(fingerprintPreference);
}
