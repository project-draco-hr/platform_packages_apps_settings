{
  ListPreference result=(ListPreference)pm.findPreference(LOCK_AFTER_TIMEOUT_KEY);
  if (result != null) {
    int lockAfterValue=Settings.Secure.getInt(getContentResolver(),Settings.Secure.LOCK_SCREEN_LOCK_AFTER_TIMEOUT,FALLBACK_LOCK_AFTER_TIMEOUT_VALUE);
    result.setValue(String.valueOf(lockAfterValue));
    result.setOnPreferenceChangeListener(this);
    final long adminTimeout=mDPM != null ? mDPM.getMaximumTimeToLock(null) : 0;
    final ContentResolver cr=getContentResolver();
    final long displayTimeout=Math.max(0,Settings.System.getInt(cr,SCREEN_OFF_TIMEOUT,0));
    if (adminTimeout > 0) {
      disableUnusableTimeouts(result,Math.max(0,adminTimeout - displayTimeout));
    }
  }
  return result;
}
