{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.settings_top_level);
  mPrefsPane=findViewById(R.id.prefs);
  mMainPane=findViewById(R.id.top_level);
  mSinglePane=mMainPane == null;
  if (mSinglePane)   mMainPane=mPrefsPane;
  final Intent intent=getIntent();
  String initialFragment=intent.getStringExtra(EXTRA_SHOW_FRAGMENT);
  Bundle initialArguments=intent.getBundleExtra(EXTRA_SHOW_FRAGMENT_ARGUMENTS);
  if (mSinglePane) {
    if (initialFragment != null) {
      showFragment(initialFragment,initialArguments);
    }
 else {
      if (intent.getComponent().getClassName().equals(this.getClass().getName())) {
        showFragment(TopLevelSettings.class.getName(),null);
      }
 else {
        showFragment(intent.getComponent().getClassName(),intent.getExtras());
      }
    }
  }
 else {
    if (!intent.getComponent().getClassName().equals(this.getClass().getName())) {
      if (showFragment(intent.getComponent().getClassName(),intent.getExtras())) {
        mMainPane.setVisibility(View.GONE);
      }
    }
 else {
      Fragment topLevel=getFragmentManager().findFragmentById(R.id.top_level);
      if (topLevel != null) {
        ((TopLevelSettings)topLevel).selectFirst();
      }
    }
  }
}
