{
  int i=0;
  while (i < target.size()) {
    Header header=target.get(i);
    int id=(int)header.id;
    if (id == R.id.dock_settings) {
      if (!needsDockSettings())       target.remove(header);
    }
 else     if (id == R.id.operator_settings || id == R.id.manufacturer_settings) {
      Utils.updateHeaderToSpecificActivityFromMetaDataOrRemove(this,target,header);
    }
 else     if (id == R.id.wifi_settings) {
      if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_WIFI)) {
        target.remove(header);
      }
    }
 else     if (id == R.id.bluetooth_settings) {
      if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH)) {
        target.remove(header);
      }
    }
    if (target.get(i) == header) {
      if (mFirstHeader == null && HeaderAdapter.getHeaderType(header) != HeaderAdapter.HEADER_TYPE_CATEGORY) {
        mFirstHeader=header;
      }
      mHeaderIndexMap.put(id,i);
      i++;
    }
  }
}
