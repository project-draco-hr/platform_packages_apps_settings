{
  final Activity activity=getActivity();
  final Intent intent=activity.getIntent();
  final View buttonBar=activity.findViewById(com.android.internal.R.id.button_bar);
  if (!intent.getBooleanExtra(EXTRA_PREFS_SHOW_BUTTON_BAR,false) || buttonBar == null) {
    return;
  }
  buttonBar.setVisibility(View.VISIBLE);
  View tmpView=activity.findViewById(com.android.internal.R.id.back_button);
  if (tmpView != null) {
    try {
      final Button backButton=(Button)tmpView;
      backButton.setOnClickListener(new OnClickListener(){
        public void onClick(        View v){
          activity.setResult(Activity.RESULT_CANCELED);
          activity.finish();
        }
      }
);
      if (intent.hasExtra(EXTRA_PREFS_SET_BACK_TEXT)) {
        String buttonText=intent.getStringExtra(EXTRA_PREFS_SET_BACK_TEXT);
        if (TextUtils.isEmpty(buttonText)) {
          backButton.setVisibility(View.GONE);
        }
 else {
          backButton.setText(buttonText);
        }
      }
    }
 catch (    ClassCastException e) {
      Log.w(TAG,"The view originally for back_button is used not as Button. " + "Ignored.");
    }
  }
  tmpView=activity.findViewById(com.android.internal.R.id.skip_button);
  if (tmpView != null) {
    try {
      final Button skipButton=(Button)tmpView;
      skipButton.setOnClickListener(new OnClickListener(){
        public void onClick(        View v){
          activity.setResult(Activity.RESULT_OK);
          activity.finish();
        }
      }
);
      if (intent.getBooleanExtra(EXTRA_PREFS_SHOW_SKIP,false)) {
        skipButton.setVisibility(View.VISIBLE);
      }
    }
 catch (    ClassCastException e) {
      Log.w(TAG,"The view originally for skip_button is used not as Button. " + "Ignored.");
    }
  }
  tmpView=activity.findViewById(com.android.internal.R.id.next_button);
  if (tmpView != null) {
    try {
      mNextButton=(Button)tmpView;
      mNextButton.setOnClickListener(new OnClickListener(){
        public void onClick(        View v){
          activity.setResult(Activity.RESULT_OK);
          activity.finish();
        }
      }
);
      if (intent.hasExtra(EXTRA_PREFS_SET_NEXT_TEXT)) {
        String buttonText=intent.getStringExtra(EXTRA_PREFS_SET_NEXT_TEXT);
        if (TextUtils.isEmpty(buttonText)) {
          mNextButton.setVisibility(View.GONE);
        }
 else {
          mNextButton.setText(buttonText);
        }
      }
    }
 catch (    ClassCastException e) {
      Log.w(TAG,"The view originally for next_button is used not as Button. " + "Ignored.");
      mNextButton=null;
    }
  }
}
