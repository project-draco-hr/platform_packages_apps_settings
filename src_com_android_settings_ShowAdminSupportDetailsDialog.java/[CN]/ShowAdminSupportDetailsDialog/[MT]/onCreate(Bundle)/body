{
  super.onCreate(savedInstanceState);
  mDpm=getSystemService(DevicePolicyManager.class);
  ComponentName admin=null;
  int userId=UserHandle.myUserId();
  Intent intent=getIntent();
  if (intent != null) {
    IActivityManager am=ActivityManagerNative.getDefault();
    try {
      int uid=am.getLaunchedFromUid(getActivityToken());
      if (UserHandle.isSameApp(uid,android.os.Process.myUid())) {
        admin=intent.getParcelableExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN);
        userId=intent.getIntExtra(Intent.EXTRA_USER_ID,UserHandle.myUserId());
      }
    }
 catch (    RemoteException e) {
      Log.e(TAG,"Could not talk to activity manager.",e);
    }
  }
  View rootView=LayoutInflater.from(this).inflate(R.layout.admin_support_details_dialog,null);
  setAdminSupportDetails(rootView,admin,userId);
  new AlertDialog.Builder(this).setView(rootView).setPositiveButton(R.string.okay,null).setOnDismissListener(this).show();
}
