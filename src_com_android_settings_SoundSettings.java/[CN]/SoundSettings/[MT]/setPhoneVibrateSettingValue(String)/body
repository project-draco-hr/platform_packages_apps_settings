{
  boolean vibeInSilent;
  int callsVibrateSetting;
  if (value.equals(VALUE_VIBRATE_UNLESS_SILENT)) {
    callsVibrateSetting=AudioManager.VIBRATE_SETTING_ON;
    vibeInSilent=false;
  }
 else   if (value.equals(VALUE_VIBRATE_NEVER)) {
    callsVibrateSetting=AudioManager.VIBRATE_SETTING_OFF;
    vibeInSilent=false;
  }
 else   if (value.equals(VALUE_VIBRATE_ONLY_SILENT)) {
    callsVibrateSetting=AudioManager.VIBRATE_SETTING_ONLY_SILENT;
    vibeInSilent=true;
  }
 else {
    callsVibrateSetting=AudioManager.VIBRATE_SETTING_ON;
    vibeInSilent=true;
  }
  Settings.System.putInt(getContentResolver(),Settings.System.VIBRATE_IN_SILENT,vibeInSilent ? 1 : 0);
  if (mSilent.isChecked()) {
    mAudioManager.setRingerMode(vibeInSilent ? AudioManager.RINGER_MODE_VIBRATE : AudioManager.RINGER_MODE_SILENT);
  }
  mAudioManager.setVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER,callsVibrateSetting);
}
