{
  final int ringerMode=mAudioManager.getRingerMode();
  final boolean silentOrVibrateMode=ringerMode != AudioManager.RINGER_MODE_NORMAL;
  if (silentOrVibrateMode != mSilent.isChecked() || force) {
    mSilent.setChecked(silentOrVibrateMode);
  }
  mVibrateInSilent.setChecked(Settings.System.getInt(getContentResolver(),Settings.System.VIBRATE_IN_SILENT,1) == 1);
  String phoneVibrateSetting=String.valueOf(mAudioManager.getVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER));
  if (!phoneVibrateSetting.equals(mPhoneVibrate.getValue()) || force) {
    mPhoneVibrate.setValue(phoneVibrateSetting);
  }
  int silentModeStreams=Settings.System.getInt(getContentResolver(),Settings.System.MODE_RINGER_STREAMS_AFFECTED,0);
  boolean isAlarmInclSilentMode=(silentModeStreams & (1 << AudioManager.STREAM_ALARM)) != 0;
  mSilent.setSummary(isAlarmInclSilentMode ? R.string.silent_mode_incl_alarm_summary : R.string.silent_mode_summary);
}
