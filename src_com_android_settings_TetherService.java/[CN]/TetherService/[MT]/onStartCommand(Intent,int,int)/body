{
  if (intent.hasExtra(TetherUtil.EXTRA_ADD_TETHER_TYPE)) {
    int type=intent.getIntExtra(TetherUtil.EXTRA_ADD_TETHER_TYPE,TetherUtil.TETHERING_INVALID);
    if (!mCurrentTethers.contains(type)) {
      if (DEBUG)       Log.d(TAG,"Adding tether " + type);
      mCurrentTethers.add(type);
    }
  }
  if (intent.hasExtra(TetherUtil.EXTRA_REM_TETHER_TYPE)) {
    if (!mInProvisionCheck) {
      int type=intent.getIntExtra(TetherUtil.EXTRA_REM_TETHER_TYPE,TetherUtil.TETHERING_INVALID);
      int index=mCurrentTethers.indexOf(type);
      if (DEBUG)       Log.d(TAG,"Removing tether " + type + ", index "+ index);
      if (index >= 0) {
        mCurrentTethers.remove(index);
        if (DEBUG)         Log.d(TAG,"mCurrentTypeIndex: " + mCurrentTypeIndex);
        if (index <= mCurrentTypeIndex && mCurrentTypeIndex > 0) {
          mCurrentTypeIndex--;
        }
      }
      cancelAlarmIfNecessary();
    }
 else {
      if (DEBUG)       Log.d(TAG,"Don't cancel alarm during provisioning");
    }
  }
  if (intent.getBooleanExtra(TetherUtil.EXTRA_SET_ALARM,false) && mCurrentTethers.size() == 1) {
    scheduleAlarm();
  }
  if (intent.getBooleanExtra(TetherUtil.EXTRA_ENABLE_WIFI_TETHER,false)) {
    mEnableWifiAfterCheck=true;
  }
  if (intent.getBooleanExtra(TetherUtil.EXTRA_RUN_PROVISION,false)) {
    startProvisioning(mCurrentTypeIndex);
  }
 else   if (!mInProvisionCheck) {
    stopSelf();
    return START_NOT_STICKY;
  }
  return START_REDELIVER_INTENT;
}
