{
  super.onStart();
  if (mUnavailable) {
    TextView emptyView=(TextView)getView().findViewById(android.R.id.empty);
    setEmptyView(emptyView);
    if (emptyView != null) {
      emptyView.setText(R.string.tethering_settings_not_available);
    }
    return;
  }
  final Activity activity=getActivity();
  mMassStorageActive=Environment.MEDIA_SHARED.equals(Environment.getExternalStorageState());
  mTetherChangeReceiver=new TetherChangeReceiver();
  IntentFilter filter=new IntentFilter(ConnectivityManager.ACTION_TETHER_STATE_CHANGED);
  Intent intent=activity.registerReceiver(mTetherChangeReceiver,filter);
  filter=new IntentFilter();
  filter.addAction(UsbManager.ACTION_USB_STATE);
  activity.registerReceiver(mTetherChangeReceiver,filter);
  filter=new IntentFilter();
  filter.addAction(Intent.ACTION_MEDIA_SHARED);
  filter.addAction(Intent.ACTION_MEDIA_UNSHARED);
  filter.addDataScheme("file");
  activity.registerReceiver(mTetherChangeReceiver,filter);
  filter=new IntentFilter();
  filter.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);
  activity.registerReceiver(mTetherChangeReceiver,filter);
  if (intent != null)   mTetherChangeReceiver.onReceive(activity,intent);
  if (mWifiApEnabler != null) {
    mEnableWifiAp.setOnPreferenceChangeListener(this);
    mWifiApEnabler.resume();
  }
  updateState();
}
