{
  Context context=getActivity();
  List<EngineInfo> engines=mTts.getEngines();
  for (  EngineInfo engine : engines) {
    final String engineName=engine.name;
    if (!engine.system) {
      CheckBoxPreference enablePref=new CheckBoxPreference(context);
      enablePref.setKey(KEY_PLUGIN_ENABLED_PREFIX + engineName);
      enablePref.setTitle(engine.label);
      enablePref.setOnPreferenceClickListener(this);
      mEnginesGroup.addPreference(enablePref);
    }
    if (engineHasSettings(engineName)) {
      Preference pref=new Preference(context);
      pref.setKey(KEY_PLUGIN_SETTINGS_PREFIX + engineName);
      pref.setTitle(engine.label);
      CharSequence settingsLabel=getResources().getString(R.string.tts_engine_name_settings,engine.label);
      pref.setSummary(settingsLabel);
      pref.setOnPreferenceClickListener(new OnPreferenceClickListener(){
        public boolean onPreferenceClick(        Preference preference){
          Intent i=new Intent();
          i.setClassName(engineName,engineName + ".EngineSettings");
          startActivity(i);
          return true;
        }
      }
);
      mEnginesGroup.addPreference(pref);
    }
  }
}
