{
  Context context=getActivity();
  List<TextToSpeech.EngineInfo> engines=mTts.getEngines();
  for (  TextToSpeech.EngineInfo engine : engines) {
    String prefKey="";
    final String engineName=engine.name;
    if (!engineName.equals(TextToSpeech.Engine.DEFAULT_ENGINE)) {
      CheckBoxPreference enablePref=new CheckBoxPreference(context);
      prefKey=KEY_PLUGIN_ENABLED_PREFIX + engineName;
      enablePref.setKey(prefKey);
      enablePref.setTitle(engine.label);
      enablePref.setOnPreferenceClickListener(this);
      mEnginesGroup.addPreference(enablePref);
    }
    if (engineHasSettings(engineName)) {
      Preference pref=new Preference(context);
      prefKey=KEY_PLUGIN_SETTINGS_PREFIX + engineName;
      pref.setKey(prefKey);
      pref.setTitle(engine.label);
      CharSequence settingsLabel=getResources().getString(R.string.tts_engine_name_settings,engine.label);
      pref.setSummary(settingsLabel);
      pref.setOnPreferenceClickListener(new OnPreferenceClickListener(){
        public boolean onPreferenceClick(        Preference preference){
          Intent i=new Intent();
          i.setClassName(engineName,engineName + ".EngineSettings");
          startActivity(i);
          return true;
        }
      }
);
      mEnginesGroup.addPreference(pref);
    }
  }
}
