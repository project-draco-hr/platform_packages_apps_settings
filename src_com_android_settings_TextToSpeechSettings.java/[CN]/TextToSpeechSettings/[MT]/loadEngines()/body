{
  List<EngineInfo> engines=mEnginesHelper.getEngines();
  CharSequence entries[]=new CharSequence[engines.size()];
  CharSequence values[]=new CharSequence[engines.size()];
  final int count=engines.size();
  for (int i=0; i < count; ++i) {
    final EngineInfo engine=engines.get(i);
    entries[i]=engine.label;
    values[i]=engine.name;
  }
  mDefaultSynthPref.setEntries(entries);
  mDefaultSynthPref.setEntryValues(values);
  String selectedEngine=Settings.Secure.getString(getContentResolver(),TTS_DEFAULT_SYNTH);
  int selectedEngineIndex=mDefaultSynthPref.findIndexOfValue(selectedEngine);
  if (selectedEngineIndex == -1) {
    selectedEngineIndex=mDefaultSynthPref.findIndexOfValue(mEnginesHelper.getHighestRankedEngineName());
  }
  if (selectedEngineIndex >= 0) {
    mDefaultSynthPref.setValueIndex(selectedEngineIndex);
  }
}
