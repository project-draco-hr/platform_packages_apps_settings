{
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.tts_settings);
  getActivity().setVolumeControlStream(TextToSpeech.Engine.DEFAULT_STREAM);
  mEnableDemo=false;
  mTtsStarted=false;
  Locale currentLocale=Locale.getDefault();
  mDefaultLanguage=currentLocale.getISO3Language();
  mDefaultCountry=currentLocale.getISO3Country();
  mDefaultLocVariant=currentLocale.getVariant();
  mPlayExample=findPreference(KEY_TTS_PLAY_EXAMPLE);
  mPlayExample.setOnPreferenceClickListener(this);
  mInstallData=findPreference(KEY_TTS_INSTALL_DATA);
  mInstallData.setOnPreferenceClickListener(this);
  mDefaultSynthPref=(ListPreference)findPreference(KEY_TTS_DEFAULT_SYNTH);
  mDefaultRatePref=(ListPreference)findPreference(KEY_TTS_DEFAULT_RATE);
  mDefaultLocPref=(ListPreference)findPreference(KEY_TTS_DEFAULT_LANG);
  mEngineSettings=findPreference(KEY_TTS_ENGINE_SETTINGS);
  mEngineSettings.setEnabled(false);
  mTts=new TextToSpeech(getActivity().getApplicationContext(),this);
  mEnginesHelper=new TtsEngines(getActivity().getApplicationContext());
  initDefaultSettings();
  initEngineSpecificSettings();
}
