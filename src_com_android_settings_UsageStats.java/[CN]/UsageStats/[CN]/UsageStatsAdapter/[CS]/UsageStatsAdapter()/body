{
  mUsageStats=new ArrayList<PkgUsageStats>();
  mAppLabelMap=new HashMap<String,CharSequence>();
  PkgUsageStats[] stats;
  try {
    stats=mUsageStatsService.getAllPkgUsageStats();
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Failed initializing usage stats service");
    return;
  }
  if (stats == null) {
    return;
  }
  for (  PkgUsageStats ps : stats) {
    mUsageStats.add(ps);
    CharSequence label;
    try {
      ApplicationInfo appInfo=mPm.getApplicationInfo(ps.packageName,0);
      label=appInfo.loadLabel(mPm);
    }
 catch (    NameNotFoundException e) {
      label=ps.packageName;
    }
    mAppLabelMap.put(ps.packageName,label);
  }
  mLaunchCountComparator=new LaunchCountComparator();
  mUsageTimeComparator=new UsageTimeComparator();
  mAppLabelComparator=new AppNameComparator(mAppLabelMap);
  sortList();
}
