{
  mUsageStats=new ArrayList<android.app.UsageStats.PackageStats>();
  mAppLabelMap=new HashMap<String,CharSequence>();
  android.app.UsageStats.PackageStats[] stats;
  try {
    stats=mUsageStatsService.getAllPkgUsageStats(getPackageName());
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Failed initializing usage stats service");
    return;
  }
  if (stats == null) {
    return;
  }
  for (  android.app.UsageStats.PackageStats ps : stats) {
    mUsageStats.add(ps);
    CharSequence label;
    try {
      ApplicationInfo appInfo=mPm.getApplicationInfo(ps.getPackageName(),0);
      label=appInfo.loadLabel(mPm);
    }
 catch (    NameNotFoundException e) {
      label=ps.getPackageName();
    }
    mAppLabelMap.put(ps.getPackageName(),label);
  }
  mLaunchCountComparator=new LaunchCountComparator();
  mUsageTimeComparator=new UsageTimeComparator();
  mAppLabelComparator=new AppNameComparator(mAppLabelMap);
  sortList();
}
