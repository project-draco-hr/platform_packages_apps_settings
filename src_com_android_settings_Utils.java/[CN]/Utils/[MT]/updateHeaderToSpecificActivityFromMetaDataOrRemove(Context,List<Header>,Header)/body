{
  Intent intent=header.intent;
  if (intent != null) {
    PackageManager pm=context.getPackageManager();
    List<ResolveInfo> list=pm.queryIntentActivities(intent,PackageManager.GET_META_DATA);
    int listSize=list.size();
    for (int i=0; i < listSize; i++) {
      ResolveInfo resolveInfo=list.get(i);
      if ((resolveInfo.activityInfo.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
        Drawable icon=null;
        String title=null;
        String summary=null;
        try {
          Resources res=pm.getResourcesForApplication(resolveInfo.activityInfo.packageName);
          Bundle metaData=resolveInfo.activityInfo.metaData;
          if (res != null && metaData != null) {
            icon=res.getDrawable(metaData.getInt(META_DATA_PREFERENCE_ICON));
            title=res.getString(metaData.getInt(META_DATA_PREFERENCE_TITLE));
            summary=res.getString(metaData.getInt(META_DATA_PREFERENCE_SUMMARY));
          }
        }
 catch (        NameNotFoundException e) {
        }
catch (        NotFoundException e) {
        }
        if (TextUtils.isEmpty(title)) {
          title=resolveInfo.loadLabel(pm).toString();
        }
        header.title=title;
        header.summary=summary;
        header.intent=new Intent().setClassName(resolveInfo.activityInfo.packageName,resolveInfo.activityInfo.name);
        return true;
      }
    }
  }
  if (target.remove(header))   System.err.println("Removed " + header.id);
  return false;
}
