{
  Intent intent=tile.intent;
  if (intent != null) {
    PackageManager pm=context.getPackageManager();
    List<ResolveInfo> list=tile.userHandle.size() != 0 ? pm.queryIntentActivitiesAsUser(intent,PackageManager.GET_META_DATA,tile.userHandle.get(0).getIdentifier()) : pm.queryIntentActivities(intent,PackageManager.GET_META_DATA);
    int listSize=list.size();
    for (int i=0; i < listSize; i++) {
      ResolveInfo resolveInfo=list.get(i);
      if ((resolveInfo.activityInfo.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
        int icon=0;
        CharSequence title=null;
        String summary=null;
        try {
          Resources res=pm.getResourcesForApplication(resolveInfo.activityInfo.packageName);
          Bundle metaData=resolveInfo.activityInfo.metaData;
          if (res != null && metaData != null) {
            if (metaData.containsKey(META_DATA_PREFERENCE_ICON)) {
              icon=metaData.getInt(META_DATA_PREFERENCE_ICON);
            }
            if (metaData.containsKey(META_DATA_PREFERENCE_TITLE)) {
              title=res.getString(metaData.getInt(META_DATA_PREFERENCE_TITLE));
            }
            if (metaData.containsKey(META_DATA_PREFERENCE_SUMMARY)) {
              summary=res.getString(metaData.getInt(META_DATA_PREFERENCE_SUMMARY));
            }
          }
        }
 catch (        NameNotFoundException|NotFoundException e) {
        }
        if (TextUtils.isEmpty(title)) {
          title=resolveInfo.loadLabel(pm).toString();
        }
        if (icon == 0) {
          icon=resolveInfo.activityInfo.icon;
        }
        tile.iconRes=icon;
        tile.iconPkg=resolveInfo.activityInfo.packageName;
        tile.title=title;
        tile.summary=summary;
        tile.intent=new Intent().setClassName(resolveInfo.activityInfo.packageName,resolveInfo.activityInfo.name);
        return true;
      }
    }
  }
  return false;
}
