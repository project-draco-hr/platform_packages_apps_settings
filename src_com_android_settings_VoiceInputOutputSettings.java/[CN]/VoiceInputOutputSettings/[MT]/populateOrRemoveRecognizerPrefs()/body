{
  List<ResolveInfo> availableRecognitionServices=mFragment.getPackageManager().queryIntentServices(new Intent(RecognitionService.SERVICE_INTERFACE),PackageManager.GET_META_DATA);
  int numAvailable=availableRecognitionServices.size();
  if (numAvailable == 0) {
    mVoiceCategory.removePreference(mRecognizerPref);
    mVoiceCategory.removePreference(mRecognizerSettingsPref);
    return false;
  }
  if (numAvailable == 1) {
    mVoiceCategory.removePreference(mRecognizerPref);
    ResolveInfo resolveInfo=availableRecognitionServices.get(0);
    String recognizerComponent=new ComponentName(resolveInfo.serviceInfo.packageName,resolveInfo.serviceInfo.name).flattenToShortString();
    mAvailableRecognizersMap.put(recognizerComponent,resolveInfo);
    String currentSetting=Settings.Secure.getString(mFragment.getContentResolver(),Settings.Secure.VOICE_RECOGNITION_SERVICE);
    updateSettingsLink(currentSetting);
  }
 else {
    populateRecognizerPreference(availableRecognitionServices);
  }
  return true;
}
