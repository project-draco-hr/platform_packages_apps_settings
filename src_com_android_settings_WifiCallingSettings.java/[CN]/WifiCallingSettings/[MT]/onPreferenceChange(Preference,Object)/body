{
  final Context context=getActivity();
  if (preference == mButtonWfcMode) {
    mButtonWfcMode.setValue((String)newValue);
    int buttonMode=Integer.valueOf((String)newValue);
    int currentMode=ImsManager.getWfcMode(context);
    if (buttonMode != currentMode) {
      ImsManager.setWfcMode(context,buttonMode);
      mButtonWfcMode.setSummary(getWfcModeSummary(context,buttonMode));
    }
    boolean wfcHandoffEnabled=(buttonMode != ImsConfig.WfcModeFeatureValueConstants.WIFI_ONLY);
    mButtonWfcRoam.setEnabled(wfcHandoffEnabled);
    mButtonWfcRoam.setChecked(wfcHandoffEnabled && ImsManager.isWfcRoamingEnabledByUser(context));
  }
 else   if (preference == mButtonWfcRoam) {
    SwitchPreference wfcRoamPref=(SwitchPreference)preference;
    wfcRoamPref.setChecked(!wfcRoamPref.isChecked());
    ImsManager.setWfcRoamingSetting(context,wfcRoamPref.isChecked());
  }
  return true;
}
