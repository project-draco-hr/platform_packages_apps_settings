{
  super.onResume();
  final Context context=getActivity();
  if (ImsManager.isWfcEnabledByPlatform(context)) {
    TelephonyManager tm=(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    tm.listen(mPhoneStateListener,PhoneStateListener.LISTEN_CALL_STATE);
    mSwitchBar.addOnSwitchChangeListener(this);
  }
  boolean wfcEnabled=ImsManager.isWfcEnabledByUser(context) && ImsManager.isNonTtyOrTtyOnVolteEnabled(context);
  mSwitch.setChecked(wfcEnabled);
  int wfcMode=ImsManager.getWfcMode(context);
  mButtonWfcMode.setValue(Integer.toString(wfcMode));
  mButtonWfcMode.setSummary(getWfcModeSummary(context,ImsManager.getWfcMode(context)));
  mButtonWfcRoam.setChecked(wfcEnabled && (wfcMode != ImsConfig.WfcModeFeatureValueConstants.WIFI_ONLY) && ImsManager.isWfcRoamingEnabledByUser(context));
}
