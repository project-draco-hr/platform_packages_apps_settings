{
  Preference airplanePreference=findPreference(KEY_TOGGLE_AIRPLANE);
  Preference wifiPreference=findPreference(KEY_TOGGLE_WIFI);
  Preference btPreference=findPreference(KEY_TOGGLE_BLUETOOTH);
  Preference wifiSettings=findPreference(KEY_WIFI_SETTINGS);
  Preference btSettings=findPreference(KEY_BT_SETTINGS);
  Preference vpnSettings=findPreference(KEY_VPN_SETTINGS);
  IBinder b=ServiceManager.getService(BluetoothAdapter.BLUETOOTH_SERVICE);
  if (b == null) {
    btSettings.setEnabled(false);
  }
  mWifiEnabler=new WifiEnabler(this,(WifiManager)getSystemService(WIFI_SERVICE),(CheckBoxPreference)wifiPreference);
  mAirplaneModeEnabler=new AirplaneModeEnabler(this,(CheckBoxPreference)airplanePreference);
  mBtEnabler=new BluetoothEnabler(this,(CheckBoxPreference)btPreference);
  String toggleableRadios=Settings.System.getString(getContentResolver(),Settings.System.AIRPLANE_MODE_TOGGLEABLE_RADIOS);
  if (toggleableRadios == null || !toggleableRadios.contains(Settings.System.RADIO_WIFI)) {
    wifiPreference.setDependency(airplanePreference.getKey());
    wifiSettings.setDependency(airplanePreference.getKey());
    vpnSettings.setDependency(airplanePreference.getKey());
  }
  if (toggleableRadios == null || !toggleableRadios.contains(Settings.System.RADIO_BLUETOOTH)) {
    btPreference.setDependency(airplanePreference.getKey());
    btSettings.setDependency(airplanePreference.getKey());
  }
}
