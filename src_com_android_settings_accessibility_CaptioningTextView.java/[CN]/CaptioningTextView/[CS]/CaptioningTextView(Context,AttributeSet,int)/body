{
  super(context,attrs);
  final Theme theme=context.getTheme();
  final TypedArray a=theme.obtainStyledAttributes(attrs,android.R.styleable.TextView,defStyle,0);
  CharSequence text="";
  int textSize=15;
  final int n=a.getIndexCount();
  for (int i=0; i < n; i++) {
    int attr=a.getIndex(i);
switch (attr) {
case android.R.styleable.TextView_text:
      text=a.getText(attr);
    break;
case android.R.styleable.TextView_lineSpacingExtra:
  mSpacingAdd=a.getDimensionPixelSize(attr,(int)mSpacingAdd);
break;
case android.R.styleable.TextView_lineSpacingMultiplier:
mSpacingMult=a.getFloat(attr,mSpacingMult);
break;
case android.R.styleable.TextAppearance_textSize:
textSize=a.getDimensionPixelSize(attr,textSize);
break;
}
}
final DisplayMetrics m=getContext().getResources().getDisplayMetrics();
mCornerRadius=TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,CORNER_RADIUS,m);
mOutlineWidth=TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,OUTLINE_WIDTH,m);
mShadowRadius=TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,SHADOW_RADIUS,m);
mShadowOffsetX=TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,SHADOW_OFFSET_Y,m);
mShadowOffsetY=TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,SHADOW_OFFSET_X,m);
final TextPaint paint=new TextPaint();
paint.setAntiAlias(true);
paint.setSubpixelText(true);
mPaint=paint;
setText(text);
setTextSize(textSize);
}
