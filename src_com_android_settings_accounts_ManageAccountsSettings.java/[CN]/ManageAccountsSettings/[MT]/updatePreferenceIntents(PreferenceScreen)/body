{
  PackageManager pm=getActivity().getPackageManager();
  for (int i=0; i < prefs.getPreferenceCount(); ) {
    Preference pref=prefs.getPreference(i);
    Intent intent=pref.getIntent();
    if (intent != null) {
      if (intent.getAction().equals(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS)) {
        pref.setOnPreferenceClickListener(new FragmentStarter(LocationSettings.class.getName(),R.string.location_settings_title));
      }
 else {
        ResolveInfo ri=pm.resolveActivity(intent,PackageManager.MATCH_DEFAULT_ONLY);
        if (ri == null) {
          prefs.removePreference(pref);
          continue;
        }
 else {
          intent.putExtra(ACCOUNT_KEY,mFirstAccount);
          intent.setFlags(intent.getFlags() | Intent.FLAG_ACTIVITY_NEW_TASK);
        }
      }
    }
    i++;
  }
}
