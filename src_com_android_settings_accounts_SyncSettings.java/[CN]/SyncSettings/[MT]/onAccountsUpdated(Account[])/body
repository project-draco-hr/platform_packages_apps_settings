{
  if (getActivity() == null)   return;
  removeAccountPreferences();
  for (int i=0, n=accounts.length; i < n; i++) {
    final Account account=accounts[i];
    final ArrayList<String> auths=getAuthoritiesForAccountType(account.type);
    boolean showAccount=true;
    if (mAuthorities != null && auths != null) {
      showAccount=false;
      for (      String requestedAuthority : mAuthorities) {
        if (auths.contains(requestedAuthority)) {
          showAccount=true;
          break;
        }
      }
    }
    if (showAccount) {
      final Drawable icon=getDrawableForType(account.type);
      final AccountPreference preference=new AccountPreference(getActivity(),account,icon,auths,true);
      getPreferenceScreen().addPreference(preference);
      preference.setSummary(getLabelForType(account.type));
    }
  }
  onSyncStateUpdated();
}
