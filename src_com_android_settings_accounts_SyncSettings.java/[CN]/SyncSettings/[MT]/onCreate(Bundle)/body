{
  super.onCreate(icicle);
  addPreferencesFromResource(R.xml.sync_settings);
  mAutoSyncPreference=(CheckBoxPreference)getPreferenceScreen().findPreference(KEY_SYNC_SWITCH);
  mAutoSyncPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener(){
    @Override public boolean onPreferenceChange(    Preference preference,    Object newValue){
      if (ActivityManager.isUserAMonkey()) {
        Log.d("SyncSettings","ignoring monkey's attempt to flip sync state");
      }
 else {
        ContentResolver.setMasterSyncAutomatically((Boolean)newValue);
      }
      return true;
    }
  }
);
  setHasOptionsMenu(true);
}
