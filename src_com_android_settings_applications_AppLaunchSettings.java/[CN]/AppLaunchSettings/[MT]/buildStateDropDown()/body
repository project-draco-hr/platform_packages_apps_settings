{
  mAppLinkState=(DropDownPreference)findPreference(KEY_APP_LINK_STATE);
  mAppLinkState.addItem(R.string.app_link_open_always,INTENT_FILTER_DOMAIN_VERIFICATION_STATUS_ALWAYS);
  mAppLinkState.addItem(R.string.app_link_open_ask,INTENT_FILTER_DOMAIN_VERIFICATION_STATUS_ALWAYS_ASK);
  mAppLinkState.addItem(R.string.app_link_open_never,INTENT_FILTER_DOMAIN_VERIFICATION_STATUS_NEVER);
  mAppLinkState.setEnabled(mHasDomainUrls);
  if (mHasDomainUrls) {
    final int state=mPm.getIntentVerificationStatus(mPackageName,UserHandle.myUserId());
    mAppLinkState.setSelectedValue((state == INTENT_FILTER_DOMAIN_VERIFICATION_STATUS_UNDEFINED) ? INTENT_FILTER_DOMAIN_VERIFICATION_STATUS_ALWAYS_ASK : state);
    mAppLinkState.setCallback(new Callback(){
      @Override public boolean onItemSelected(      int pos,      Object value){
        return updateAppLinkState((Integer)value);
      }
    }
);
  }
}
