{
  String actionStr=intent.getAction();
  if (Intent.ACTION_PACKAGE_ADDED.equals(actionStr)) {
    Uri data=intent.getData();
    String pkgName=data.getEncodedSchemeSpecificPart();
    for (int i=0; i < mEntriesMap.size(); i++) {
      addPackage(pkgName,mEntriesMap.keyAt(i));
    }
  }
 else   if (Intent.ACTION_PACKAGE_REMOVED.equals(actionStr)) {
    Uri data=intent.getData();
    String pkgName=data.getEncodedSchemeSpecificPart();
    for (int i=0; i < mEntriesMap.size(); i++) {
      removePackage(pkgName,mEntriesMap.keyAt(i));
    }
  }
 else   if (Intent.ACTION_PACKAGE_CHANGED.equals(actionStr)) {
    Uri data=intent.getData();
    String pkgName=data.getEncodedSchemeSpecificPart();
    for (int i=0; i < mEntriesMap.size(); i++) {
      invalidatePackage(pkgName,mEntriesMap.keyAt(i));
    }
  }
 else   if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(actionStr) || Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(actionStr)) {
    String pkgList[]=intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);
    if (pkgList == null || pkgList.length == 0) {
      return;
    }
    boolean avail=Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(actionStr);
    if (avail) {
      for (      String pkgName : pkgList) {
        for (int i=0; i < mEntriesMap.size(); i++) {
          invalidatePackage(pkgName,mEntriesMap.keyAt(i));
        }
      }
    }
  }
 else   if (Intent.ACTION_USER_ADDED.equals(actionStr)) {
    addUser(intent.getIntExtra(Intent.EXTRA_USER_HANDLE,UserHandle.USER_NULL));
  }
 else   if (Intent.ACTION_USER_REMOVED.equals(actionStr)) {
    removeUser(intent.getIntExtra(Intent.EXTRA_USER_HANDLE,UserHandle.USER_NULL));
  }
}
