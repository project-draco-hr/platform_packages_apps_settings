{
  if (mResumed) {
    return;
  }
  mResumed=true;
  if (mPackageIntentReceiver == null) {
    mPackageIntentReceiver=new PackageIntentReceiver();
    mPackageIntentReceiver.registerReceiver();
  }
  mApplications=mPm.getInstalledApplications(mRetrieveFlags);
  if (mApplications == null) {
    mApplications=new ArrayList<ApplicationInfo>();
  }
  if (mInterestingConfigChanges.applyNewConfig(mContext.getResources())) {
    mEntriesMap.clear();
    mAppEntries.clear();
  }
 else {
    for (int i=0; i < mAppEntries.size(); i++) {
      mAppEntries.get(i).sizeStale=true;
    }
  }
  mHaveDisabledApps=false;
  for (int i=0; i < mApplications.size(); i++) {
    final ApplicationInfo info=mApplications.get(i);
    if (!info.enabled) {
      if (info.enabledSetting != PackageManager.COMPONENT_ENABLED_STATE_DISABLED_USER) {
        mApplications.remove(i);
        i--;
        continue;
      }
      mHaveDisabledApps=true;
    }
    final AppEntry entry=mEntriesMap.get(info.packageName);
    if (entry != null) {
      entry.info=info;
    }
  }
  mCurComputingSizePkg=null;
  if (!mBackgroundHandler.hasMessages(BackgroundHandler.MSG_LOAD_ENTRIES)) {
    mBackgroundHandler.sendEmptyMessage(BackgroundHandler.MSG_LOAD_ENTRIES);
  }
}
