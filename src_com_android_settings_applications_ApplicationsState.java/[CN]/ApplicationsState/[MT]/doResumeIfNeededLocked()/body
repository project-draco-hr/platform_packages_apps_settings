{
  if (mResumed) {
    return;
  }
  mResumed=true;
  if (mPackageIntentReceiver == null) {
    mPackageIntentReceiver=new PackageIntentReceiver();
    mPackageIntentReceiver.registerReceiver();
  }
  mApplications=mPm.getInstalledApplications(PackageManager.GET_UNINSTALLED_PACKAGES | PackageManager.GET_DISABLED_COMPONENTS);
  if (mApplications == null) {
    mApplications=new ArrayList<ApplicationInfo>();
  }
  if (mInterestingConfigChanges.applyNewConfig(mContext.getResources())) {
    mEntriesMap.clear();
    mAppEntries.clear();
  }
 else {
    for (int i=0; i < mAppEntries.size(); i++) {
      mAppEntries.get(i).sizeStale=true;
    }
  }
  for (int i=0; i < mApplications.size(); i++) {
    final ApplicationInfo info=mApplications.get(i);
    if (!info.enabled && info.enabledSetting != PackageManager.COMPONENT_ENABLED_STATE_DISABLED_USER) {
      mApplications.remove(i);
      i--;
      continue;
    }
    final AppEntry entry=mEntriesMap.get(info.packageName);
    if (entry != null) {
      entry.info=info;
    }
  }
  mCurComputingSizePkg=null;
  if (!mBackgroundHandler.hasMessages(BackgroundHandler.MSG_LOAD_ENTRIES)) {
    mBackgroundHandler.sendEmptyMessage(BackgroundHandler.MSG_LOAD_ENTRIES);
  }
}
