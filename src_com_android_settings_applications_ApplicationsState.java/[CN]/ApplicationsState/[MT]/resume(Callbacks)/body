{
  if (DEBUG_LOCKING)   Log.v(TAG,"resume about to acquire lock...");
synchronized (mEntriesMap) {
    mCurCallbacks=callbacks;
    mResumed=true;
    if (mPackageIntentReceiver == null) {
      mPackageIntentReceiver=new PackageIntentReceiver();
      mPackageIntentReceiver.registerReceiver();
    }
    mApplications=mPm.getInstalledApplications(PackageManager.GET_UNINSTALLED_PACKAGES | PackageManager.GET_DISABLED_COMPONENTS);
    if (mApplications == null) {
      mApplications=new ArrayList<ApplicationInfo>();
    }
    for (int i=0; i < mAppEntries.size(); i++) {
      mAppEntries.get(i).sizeStale=true;
    }
    for (int i=0; i < mApplications.size(); i++) {
      final ApplicationInfo info=mApplications.get(i);
      final AppEntry entry=mEntriesMap.get(info.packageName);
      if (entry != null) {
        entry.info=info;
      }
    }
    mCurComputingSizePkg=null;
    if (!mBackgroundHandler.hasMessages(BackgroundHandler.MSG_LOAD_ENTRIES)) {
      mBackgroundHandler.sendEmptyMessage(BackgroundHandler.MSG_LOAD_ENTRIES);
    }
    if (DEBUG_LOCKING)     Log.v(TAG,"...resume releasing lock");
  }
}
