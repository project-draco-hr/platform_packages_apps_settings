{
  mUpdatedSysApp=(mAppInfo.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) != 0;
  boolean enabled=true;
  if (mUpdatedSysApp) {
    mUninstallButton.setText(R.string.app_factory_reset);
  }
 else {
    if ((mAppInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
      enabled=false;
      try {
        PackageInfo pi=mPm.getPackageInfo(mAppInfo.packageName,PackageManager.GET_DISABLED_COMPONENTS | PackageManager.GET_UNINSTALLED_PACKAGES | PackageManager.GET_SIGNATURES);
        PackageInfo sys=mPm.getPackageInfo("android",PackageManager.GET_SIGNATURES);
        Intent intent=new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        intent.setPackage(mAppInfo.packageName);
        List<ResolveInfo> homes=mPm.queryIntentActivities(intent,0);
        if ((homes != null && homes.size() > 0) || sys.signatures[0].equals(pi.signatures[0])) {
          mUninstallButton.setText(R.string.disable_text);
        }
 else         if (mAppInfo.enabled) {
          mUninstallButton.setText(R.string.disable_text);
          enabled=true;
        }
 else {
          mUninstallButton.setText(R.string.enable_text);
          enabled=true;
        }
      }
 catch (      PackageManager.NameNotFoundException e) {
        Log.w(TAG,"Unable to get package info",e);
      }
    }
 else {
      mUninstallButton.setText(R.string.uninstall_text);
    }
  }
  mUninstallButton.setEnabled(enabled);
  if (enabled) {
    mUninstallButton.setOnClickListener(this);
  }
}
