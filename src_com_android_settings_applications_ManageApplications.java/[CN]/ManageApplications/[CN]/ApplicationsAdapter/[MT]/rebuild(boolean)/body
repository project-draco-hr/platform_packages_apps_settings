{
  if (DEBUG)   Log.i(TAG,"Rebuilding app list...");
  ApplicationsState.AppFilter filterObj;
  Comparator<AppEntry> comparatorObj;
  boolean emulated=Environment.isExternalStorageEmulated();
  if (emulated) {
    mWhichSize=SIZE_TOTAL;
  }
 else {
    mWhichSize=SIZE_INTERNAL;
  }
  filterObj=FILTERS[mFilterMode];
switch (mLastSortMode) {
case SORT_ORDER_SIZE:
switch (mWhichSize) {
case SIZE_INTERNAL:
      comparatorObj=ApplicationsState.INTERNAL_SIZE_COMPARATOR;
    break;
case SIZE_EXTERNAL:
  comparatorObj=ApplicationsState.EXTERNAL_SIZE_COMPARATOR;
break;
default :
comparatorObj=ApplicationsState.SIZE_COMPARATOR;
break;
}
break;
default :
comparatorObj=ApplicationsState.ALPHA_COMPARATOR;
break;
}
ArrayList<ApplicationsState.AppEntry> entries=mSession.rebuild(filterObj,comparatorObj);
if (entries == null && !eraseold) {
return;
}
mBaseEntries=entries;
if (mBaseEntries != null) {
mEntries=applyPrefixFilter(mCurFilterPrefix,mBaseEntries);
}
 else {
mEntries=null;
}
notifyDataSetChanged();
if (entries == null) {
mManageApplications.mListContainer.setVisibility(View.INVISIBLE);
mManageApplications.mLoadingContainer.setVisibility(View.VISIBLE);
}
 else {
mManageApplications.mListContainer.setVisibility(View.VISIBLE);
mManageApplications.mLoadingContainer.setVisibility(View.GONE);
}
mManageApplications.setHasDisabled(hasDisabledApps());
}
