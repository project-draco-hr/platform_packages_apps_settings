{
  Activity activity=getActivity();
  View content=activity.findViewById(R.id.main_content);
  ViewGroup contentParent=(ViewGroup)content.getParent();
  mSpinnerHeader=(ViewGroup)activity.getLayoutInflater().inflate(R.layout.apps_filter_spinner,contentParent,false);
  mFilterSpinner=(Spinner)mSpinnerHeader.findViewById(R.id.filter_spinner);
  mFilterAdapter=new FilterSpinnerAdapter(this);
  mFilterSpinner.setAdapter(mFilterAdapter);
  mFilterSpinner.setOnItemSelectedListener(this);
  contentParent.addView(mSpinnerHeader,0);
  mFilterAdapter.enableFilter(getDefaultFilter());
  if (mListType == LIST_TYPE_MAIN || mListType == LIST_TYPE_NOTIFICATION) {
    if (UserManager.get(getActivity()).getUserProfiles().size() > 1) {
      mFilterAdapter.enableFilter(FILTER_APPS_PERSONAL);
      mFilterAdapter.enableFilter(FILTER_APPS_WORK);
    }
  }
  if (mListType == LIST_TYPE_NOTIFICATION) {
    mFilterAdapter.enableFilter(FILTER_APPS_BLOCKED);
    mFilterAdapter.enableFilter(FILTER_APPS_PRIORITY);
    mFilterAdapter.enableFilter(FILTER_APPS_SENSITIVE);
    mFilterAdapter.enableFilter(FILTER_APPS_NO_PEEKING);
  }
  if (mListType == LIST_TYPE_HIGH_POWER) {
    mFilterAdapter.enableFilter(FILTER_APPS_POWER_NO_WHITELIST);
  }
  if (mListType == LIST_TYPE_STORAGE) {
    mApplications.setOverrideFilter(new VolumeFilter(mVolumeUuid));
  }
}
