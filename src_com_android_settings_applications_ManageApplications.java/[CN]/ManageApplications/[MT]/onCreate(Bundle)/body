{
  super.onCreate(savedInstanceState);
  setHasOptionsMenu(true);
  mApplicationsState=ApplicationsState.getInstance(getActivity().getApplication());
  mApplicationsAdapter=new ApplicationsAdapter(mApplicationsState);
  Intent intent=getActivity().getIntent();
  String action=intent.getAction();
  String defaultTabTag=TAB_DOWNLOADED;
  String className=getArguments() != null ? getArguments().getString("classname") : null;
  if (className == null) {
    className=intent.getComponent().getClassName();
  }
  if (className.equals(RunningServicesActivity.class.getName())) {
    defaultTabTag=TAB_RUNNING;
  }
 else   if (className.equals(StorageUseActivity.class.getName()) || action.equals(Intent.ACTION_MANAGE_PACKAGE_STORAGE)) {
    mSortOrder=SORT_ORDER_SIZE;
    mFilterApps=FILTER_APPS_ALL;
    defaultTabTag=TAB_ALL;
  }
 else   if (action.equals(Settings.ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS)) {
    defaultTabTag=TAB_ALL;
  }
  if (savedInstanceState != null) {
    mSortOrder=savedInstanceState.getInt("sortOrder",mSortOrder);
    mFilterApps=savedInstanceState.getInt("filterApps",mFilterApps);
    String tmp=savedInstanceState.getString("defaultTabTag");
    if (tmp != null)     defaultTabTag=tmp;
  }
  mDefaultTab=defaultTabTag;
  mDataFileStats=new StatFs("/data");
  mSDCardFileStats=new StatFs(Environment.getExternalStorageDirectory().toString());
  mInvalidSizeStr=getActivity().getText(R.string.invalid_size_value);
  mComputingSizeStr=getActivity().getText(R.string.computing_size);
}
