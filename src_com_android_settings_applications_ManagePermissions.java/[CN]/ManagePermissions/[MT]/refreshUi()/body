{
  PreferenceScreen screen=getPreferenceScreen();
  if (screen == null) {
    screen=getPreferenceManager().createPreferenceScreen(getActivity());
    setPreferenceScreen(screen);
  }
 else {
    screen.removeAll();
  }
  final int count=screen.getPreferenceCount();
  if (count == 0) {
    List<PermissionGroup> groups=mPermissionsInfo.getGroups();
    for (    PermissionGroup group : groups) {
      if (group.possibleApps.size() == 0)       continue;
      PermissionPreference pref=new PermissionPreference(getActivity(),group);
      pref.refreshUi();
      screen.addPreference(pref);
    }
  }
 else {
    for (int i=0; i < count; i++) {
      ((PermissionPreference)screen.getPreference(i)).refreshUi();
    }
  }
}
