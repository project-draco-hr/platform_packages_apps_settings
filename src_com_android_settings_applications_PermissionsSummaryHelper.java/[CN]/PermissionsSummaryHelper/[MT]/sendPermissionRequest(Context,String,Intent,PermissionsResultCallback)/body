{
  BroadcastReceiver receiver=new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      int[] counts=intent.getIntArrayExtra(Intent.EXTRA_GET_PERMISSIONS_COUNT_RESULT);
      CharSequence[] groups=intent.getCharSequenceArrayExtra(Intent.EXTRA_GET_PERMISSIONS_GROUP_LIST_RESULT);
      callback.onPermissionSummaryResult(counts,groups);
      context.unregisterReceiver(this);
    }
  }
;
  context.registerReceiver(receiver,new IntentFilter(action));
  request.putExtra(Intent.EXTRA_GET_PERMISSIONS_RESPONSE_INTENT,action);
  request.setFlags(Intent.FLAG_RECEIVER_FOREGROUND);
  context.sendBroadcast(request);
}
