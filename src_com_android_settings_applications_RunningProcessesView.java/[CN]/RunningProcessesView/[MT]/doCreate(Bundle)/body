{
  mAm=(ActivityManager)getContext().getSystemService(Context.ACTIVITY_SERVICE);
  mState=RunningState.getInstance(getContext());
  LayoutInflater inflater=(LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  inflater.inflate(R.layout.running_processes_view,this);
  mListView=(ListView)findViewById(android.R.id.list);
  View emptyView=findViewById(com.android.internal.R.id.empty);
  if (emptyView != null) {
    mListView.setEmptyView(emptyView);
  }
  mListView.setOnItemClickListener(this);
  mListView.setRecyclerListener(this);
  mAdapter=new ServiceListAdapter(mState);
  mListView.setAdapter(mAdapter);
  mColorBar=(LinearColorBar)findViewById(R.id.color_bar);
  mBackgroundProcessText=(TextView)findViewById(R.id.backgroundText);
  mBackgroundProcessText.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      mAdapter.setShowBackground(true);
      if (mOwner != null) {
        mOwner.getActivity().invalidateOptionsMenu();
      }
    }
  }
);
  mForegroundProcessText=(TextView)findViewById(R.id.foregroundText);
  mForegroundProcessText.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      mAdapter.setShowBackground(false);
      if (mOwner != null) {
        mOwner.getActivity().invalidateOptionsMenu();
      }
    }
  }
);
  ActivityManager.MemoryInfo memInfo=new ActivityManager.MemoryInfo();
  mAm.getMemoryInfo(memInfo);
  SECONDARY_SERVER_MEM=memInfo.secondaryServerThreshold;
}
