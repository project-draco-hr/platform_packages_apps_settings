{
  StrictMode.ThreadPolicy savedPolicy=StrictMode.allowThreadDiskReads();
  try {
    long memFree=0;
    long memCached=0;
    FileInputStream is=new FileInputStream("/proc/meminfo");
    int len=is.read(mBuffer);
    is.close();
    final int BUFLEN=mBuffer.length;
    for (int i=0; i < len && (memFree == 0 || memCached == 0); i++) {
      if (matchText(mBuffer,i,"MemFree")) {
        i+=7;
        memFree=extractMemValue(mBuffer,i);
      }
 else       if (matchText(mBuffer,i,"Cached")) {
        i+=6;
        memCached=extractMemValue(mBuffer,i);
      }
      while (i < BUFLEN && mBuffer[i] != '\n') {
        i++;
      }
    }
    return memFree + memCached;
  }
 catch (  java.io.FileNotFoundException e) {
  }
catch (  java.io.IOException e) {
  }
 finally {
    StrictMode.setThreadPolicy(savedPolicy);
  }
  return 0;
}
