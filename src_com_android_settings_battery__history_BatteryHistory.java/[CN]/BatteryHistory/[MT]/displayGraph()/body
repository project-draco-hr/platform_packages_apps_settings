{
  Log.i(TAG,"displayGraph");
  collectStatistics();
  mMessageText.setVisibility(View.GONE);
  for (int i=0; i < mButtons.length; i++) {
    mButtons[i].setVisibility(View.INVISIBLE);
  }
  double maxValue=-Double.MAX_VALUE;
  List<? extends Graphable> records=getGraphRecords();
  for (  Graphable g : records) {
    double[] values=g.getValues();
    maxValue=Math.max(maxValue,values[values.length - 1]);
    maxValue=Math.max(maxValue,g.getMaxValue());
  }
  int[] colors=new int[2];
  colors[0]=0xff0000ff;
  colors[1]=0xffff0000;
  for (int i=0; i < mButtons.length; i++) {
    mButtons[i].setVisibility(View.INVISIBLE);
  }
  int numRecords=Math.min(records.size(),mButtons.length);
  if (numRecords == 0) {
    mMessageText.setVisibility(View.VISIBLE);
    mMessageText.setText(R.string.battery_history_no_data);
  }
 else {
    for (int i=0; i < numRecords; i++) {
      Graphable r=records.get(i);
      mButtons[i].setText(r.getLabel());
      mButtons[i].setValues(r.getValues(),maxValue);
      mButtons[i].setVisibility(View.VISIBLE);
    }
  }
}
