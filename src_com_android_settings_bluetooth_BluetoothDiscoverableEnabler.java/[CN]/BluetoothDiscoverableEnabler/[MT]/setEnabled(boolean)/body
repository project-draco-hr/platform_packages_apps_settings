{
  BluetoothAdapter manager=mLocalManager.getBluetoothAdapter();
  if (enable) {
    int timeout=getDiscoverableTimeout();
    manager.setDiscoverableTimeout(timeout);
    mCheckBoxPreference.setSummaryOn(mContext.getResources().getString(R.string.bluetooth_is_discoverable,timeout));
    long endTimestamp=System.currentTimeMillis() + timeout * 1000;
    persistDiscoverableEndTimestamp(endTimestamp);
    manager.setScanMode(BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE);
  }
 else {
    manager.setScanMode(BluetoothAdapter.SCAN_MODE_CONNECTABLE);
  }
}
