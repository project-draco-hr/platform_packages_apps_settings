{
  int mode=mLocalManager.getBluetoothAdapter().getScanMode();
  if (mode != BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {
    return;
  }
  long currentTimestamp=System.currentTimeMillis();
  long endTimestamp=mLocalManager.getSharedPreferences().getLong(SHARED_PREFERENCES_KEY_DISCOVERABLE_END_TIMESTAMP,0);
  if (currentTimestamp > endTimestamp) {
    mCheckBoxPreference.setSummaryOn(null);
    return;
  }
  int timeLeft=(int)((endTimestamp - currentTimestamp) / 1000L);
  updateTimerDisplay(timeLeft);
synchronized (this) {
    mUiHandler.removeCallbacks(mUpdateCountdownSummaryRunnable);
    mUiHandler.postDelayed(mUpdateCountdownSummaryRunnable,1000);
  }
}
