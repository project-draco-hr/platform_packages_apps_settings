{
  int mode=mLocalManager.getBluetoothManager().getMode();
  if (mode != BluetoothDevice.MODE_DISCOVERABLE)   return;
  long currentTimestamp=System.currentTimeMillis();
  long endTimestamp=mLocalManager.getSharedPreferences().getLong(SHARED_PREFERENCES_KEY_DISCOVERABLE_END_TIMESTAMP,0);
  if (currentTimestamp > endTimestamp) {
    mCheckBoxPreference.setSummaryOn(null);
    return;
  }
  String formattedTimeLeft=String.valueOf((endTimestamp - currentTimestamp) / 1000);
  mCheckBoxPreference.setSummaryOn(mContext.getResources().getString(R.string.bluetooth_is_discoverable,formattedTimeLeft));
synchronized (this) {
    mUiHandler.removeCallbacks(mUpdateCountdownSummaryRunnable);
    mUiHandler.postDelayed(mUpdateCountdownSummaryRunnable,1000);
  }
}
