{
  if (mSwitch == switch_)   return;
  mSwitch.setOnCheckedChangeListener(null);
  mSwitch=switch_;
  mSwitch.setOnCheckedChangeListener(mValidListener ? this : null);
  int bluetoothState=BluetoothAdapter.STATE_OFF;
  if (mLocalAdapter != null)   bluetoothState=mLocalAdapter.getBluetoothState();
  boolean isOn=bluetoothState == BluetoothAdapter.STATE_ON;
  boolean isOff=bluetoothState == BluetoothAdapter.STATE_OFF;
  setChecked(isOn);
  mSwitch.setEnabled(isOn || isOff);
}
