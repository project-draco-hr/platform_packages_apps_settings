{
  IntentFilter filter=new IntentFilter();
  filter.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);
  filter.addAction(BluetoothAdapter.ACTION_LOCAL_NAME_CHANGED);
  getContext().registerReceiver(mReceiver,filter);
  EditText et=getEditText();
  if (et != null) {
    et.setFilters(new InputFilter[]{new Utf8ByteLengthFilter(BLUETOOTH_NAME_MAX_LENGTH_BYTES)});
    et.addTextChangedListener(this);
    Dialog d=getDialog();
    if (d instanceof AlertDialog) {
      Button b=((AlertDialog)d).getButton(AlertDialog.BUTTON_POSITIVE);
      b.setEnabled(et.getText().length() > 0);
    }
  }
}
