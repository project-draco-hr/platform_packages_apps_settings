{
  super.onResume();
  mDevicePreferenceMap.clear();
  mDeviceList.removeAll();
  addDevices();
  if (mScreenType == SCREEN_TYPE_SETTINGS) {
    mEnabler.resume();
    mDiscoverableEnabler.resume();
    mNamePreference.resume();
  }
  mLocalManager.registerCallback(this);
  mDeviceList.setProgress(mLocalManager.getBluetoothAdapter().isDiscovering());
  mLocalManager.startScanning(false);
  IntentFilter intentFilter=new IntentFilter();
  intentFilter.addAction(BluetoothIntent.BLUETOOTH_STATE_CHANGED_ACTION);
  intentFilter.addAction(BluetoothIntent.BOND_STATE_CHANGED_ACTION);
  registerReceiver(mReceiver,intentFilter);
  mLocalManager.setForegroundActivity(this);
}
