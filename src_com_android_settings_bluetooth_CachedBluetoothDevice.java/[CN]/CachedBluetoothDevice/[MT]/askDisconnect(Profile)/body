{
  Context context=mLocalManager.getForegroundActivity();
  if (context == null) {
    disconnect(profile);
    return;
  }
  Resources res=context.getResources();
  String name=getName();
  if (TextUtils.isEmpty(name)) {
    name=res.getString(R.string.bluetooth_device);
  }
  int disconnectMessage;
switch (profile) {
case A2DP:
    disconnectMessage=R.string.bluetooth_disconnect_a2dp_profile;
  break;
case HEADSET:
disconnectMessage=R.string.bluetooth_disconnect_headset_profile;
break;
case HID:
disconnectMessage=R.string.bluetooth_disconnect_hid_profile;
break;
case PAN:
disconnectMessage=R.string.bluetooth_disconnect_pan_profile;
break;
default :
Log.w(TAG,"askDisconnect: unexpected profile " + profile);
disconnectMessage=R.string.bluetooth_disconnect_blank;
break;
}
String message=res.getString(disconnectMessage,name);
DialogInterface.OnClickListener disconnectListener=new DialogInterface.OnClickListener(){
public void onClick(DialogInterface dialog,int which){
disconnect(profile);
}
}
;
showDisconnectDialog(context,disconnectListener,message);
}
