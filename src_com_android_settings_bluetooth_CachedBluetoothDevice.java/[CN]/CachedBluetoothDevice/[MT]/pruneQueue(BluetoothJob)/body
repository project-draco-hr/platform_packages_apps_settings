{
  boolean removedStaleItems=false;
  long now=System.currentTimeMillis();
  Iterator<BluetoothJob> it=workQueue.iterator();
  while (it.hasNext()) {
    BluetoothJob existingJob=it.next();
    if (job != null && job.command == BluetoothCommand.DISCONNECT) {
      if (existingJob.timeSent == 0 && existingJob.command == BluetoothCommand.CONNECT && existingJob.cachedDevice.mDevice.equals(job.cachedDevice.mDevice) && existingJob.profile == job.profile) {
        if (D) {
          Log.d(TAG,"Removed because of a pending disconnect. " + existingJob);
        }
        it.remove();
        continue;
      }
    }
    if (existingJob.timeSent != 0 && (now - existingJob.timeSent) >= MAX_WAIT_TIME_FOR_FRAMEWORK) {
      Log.w(TAG,"Timeout. Removing Job:" + existingJob.toString());
      it.remove();
      removedStaleItems=true;
      continue;
    }
  }
  return removedStaleItems;
}
