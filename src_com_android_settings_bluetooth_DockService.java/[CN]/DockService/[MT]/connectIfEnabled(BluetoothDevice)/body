{
  CachedBluetoothDevice cachedDevice=getCachedBluetoothDevice(mContext,mBtManager,device);
  List<Profile> profiles=cachedDevice.getConnectableProfiles();
  for (int i=0; i < profiles.size(); i++) {
    LocalBluetoothProfileManager profileManager=LocalBluetoothProfileManager.getProfileManager(mBtManager,profiles.get(i));
    int auto;
    if (Profile.A2DP == profiles.get(i)) {
      auto=BluetoothA2dp.PRIORITY_AUTO_CONNECT;
    }
 else     if (Profile.HEADSET == profiles.get(i)) {
      auto=BluetoothHeadset.PRIORITY_AUTO_CONNECT;
    }
 else {
      continue;
    }
    if (profileManager.getPreferred(device) == auto) {
      cachedDevice.connect(false);
      break;
    }
  }
}
