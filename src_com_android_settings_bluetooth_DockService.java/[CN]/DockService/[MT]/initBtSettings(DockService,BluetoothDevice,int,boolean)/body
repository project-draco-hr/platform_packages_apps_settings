{
  int numOfProfiles;
switch (state) {
case Intent.EXTRA_DOCK_STATE_DESK:
    numOfProfiles=1;
  break;
case Intent.EXTRA_DOCK_STATE_CAR:
numOfProfiles=2;
break;
default :
return null;
}
mProfiles=new Profile[numOfProfiles];
mCheckedItems=new boolean[numOfProfiles];
CharSequence[] items=new CharSequence[numOfProfiles];
switch (state) {
case Intent.EXTRA_DOCK_STATE_CAR:
items[0]=service.getString(R.string.bluetooth_dock_settings_headset);
items[1]=service.getString(R.string.bluetooth_dock_settings_a2dp);
mProfiles[0]=Profile.HEADSET;
mProfiles[1]=Profile.A2DP;
if (firstTime) {
mCheckedItems[0]=true;
mCheckedItems[1]=true;
}
 else {
mCheckedItems[0]=LocalBluetoothProfileManager.getProfileManager(mBtManager,Profile.HEADSET).isPreferred(device);
mCheckedItems[1]=LocalBluetoothProfileManager.getProfileManager(mBtManager,Profile.A2DP).isPreferred(device);
}
break;
case Intent.EXTRA_DOCK_STATE_DESK:
items[0]=service.getString(R.string.bluetooth_dock_settings_a2dp);
mProfiles[0]=Profile.A2DP;
if (firstTime) {
mCheckedItems[0]=false;
}
 else {
mCheckedItems[0]=LocalBluetoothProfileManager.getProfileManager(mBtManager,Profile.A2DP).isPreferred(device);
}
break;
}
return items;
}
