{
  if (intent == null) {
    return false;
  }
  mLocalManager=LocalBluetoothManager.getInstance(this);
  if (mLocalManager == null) {
    if (DEBUG)     Log.d(TAG,"Error: there's a problem starting bluetooth");
    return false;
  }
  mDevice=intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
  if (mDevice == null) {
    if (DEBUG)     Log.d(TAG,"device == null");
    return false;
  }
  mState=intent.getIntExtra(Intent.EXTRA_DOCK_STATE,Intent.EXTRA_DOCK_STATE_UNDOCKED);
  if (mState == Intent.EXTRA_DOCK_STATE_UNDOCKED) {
    handleUndocked(this,mLocalManager,mDevice);
    return false;
  }
  mCachedDevice=getCachedBluetoothDevice(this,mLocalManager,mDevice);
  mA2dpMgr=LocalBluetoothProfileManager.getProfileManager(mLocalManager,Profile.A2DP);
  mHeadsetMgr=LocalBluetoothProfileManager.getProfileManager(mLocalManager,Profile.HEADSET);
  return true;
}
