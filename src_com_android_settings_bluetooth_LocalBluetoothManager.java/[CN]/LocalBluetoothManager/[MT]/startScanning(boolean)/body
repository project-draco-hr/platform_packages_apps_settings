{
  if (mAdapter.isDiscovering()) {
    dispatchScanningStateChanged(true);
  }
 else {
    if (!force) {
      if (mLastScan + SCAN_EXPIRATION_MS > System.currentTimeMillis()) {
        return;
      }
      Set<BluetoothDevice> sinks=mBluetoothA2dp.getConnectedSinks();
      if (sinks != null) {
        for (        BluetoothDevice sink : sinks) {
          if (mBluetoothA2dp.getSinkState(sink) == BluetoothA2dp.STATE_PLAYING) {
            return;
          }
        }
      }
    }
    if (mAdapter.startDiscovery()) {
      mLastScan=System.currentTimeMillis();
    }
  }
}
