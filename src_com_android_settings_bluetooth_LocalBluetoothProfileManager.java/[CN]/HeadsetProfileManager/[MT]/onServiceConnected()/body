{
  profileReady=true;
  mUiHandler.post(new Runnable(){
    public void run(){
      BluetoothDevice device=mService.getCurrentHeadset();
      if (device == null)       return;
      mLocalManager.getCachedDeviceManager().onProfileStateChanged(device,Profile.HEADSET,BluetoothHeadset.STATE_CONNECTED);
    }
  }
);
  if (mServiceListeners.size() > 0) {
    Iterator<ServiceListener> it=mServiceListeners.iterator();
    while (it.hasNext()) {
      it.next().onServiceConnected();
    }
  }
}
