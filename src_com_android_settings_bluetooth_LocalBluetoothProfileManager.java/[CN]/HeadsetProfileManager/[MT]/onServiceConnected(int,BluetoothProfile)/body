{
  mService=(BluetoothHeadset)proxy;
  profileReady=true;
  mUiHandler.post(new Runnable(){
    public void run(){
      List<BluetoothDevice> deviceList=mService.getConnectedDevices();
      if (deviceList.size() == 0)       return;
      mLocalManager.getCachedDeviceManager().onProfileStateChanged(deviceList.get(0),Profile.HEADSET,BluetoothProfile.STATE_CONNECTED);
    }
  }
);
  if (mServiceListeners.size() > 0) {
    Iterator<ServiceListener> it=mServiceListeners.iterator();
    while (it.hasNext()) {
      it.next().onServiceConnected();
    }
  }
}
