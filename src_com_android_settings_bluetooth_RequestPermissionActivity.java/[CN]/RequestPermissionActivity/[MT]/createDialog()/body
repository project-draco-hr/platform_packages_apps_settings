{
  AlertDialog.Builder builder=new AlertDialog.Builder(this);
  if (mNeededToEnableBluetooth) {
    builder.setMessage(getString(R.string.bluetooth_turning_on));
    builder.setCancelable(false);
  }
 else   if (mExtraIntent == EXTRA_INTENT_DISCOVERY) {
    if (mTimeout == BluetoothDiscoverableEnabler.DISCOVERABLE_TIMEOUT_NEVER) {
      builder.setMessage(getString(R.string.bluetooth_ask_lasting_discovery));
    }
 else {
      builder.setMessage(getString(R.string.bluetooth_ask_discovery,mTimeout));
    }
    builder.setPositiveButton(getString(R.string.allow),this);
    builder.setNegativeButton(getString(R.string.deny),this);
  }
 else   if (mExtraIntent == EXTRA_INTENT_START_ADVERTISING) {
    builder.setMessage(getString(R.string.bluetooth_ask_start_broadcast,Utils.getCallingApp(this)));
    builder.setPositiveButton(getString(R.string.allow),this);
    builder.setNegativeButton(getString(R.string.deny),this);
  }
  mDialog=builder.create();
  mDialog.show();
  if (getResources().getBoolean(R.bool.auto_confirm_bluetooth_activation_dialog) == true) {
    onClick(null,DialogInterface.BUTTON_POSITIVE);
  }
}
