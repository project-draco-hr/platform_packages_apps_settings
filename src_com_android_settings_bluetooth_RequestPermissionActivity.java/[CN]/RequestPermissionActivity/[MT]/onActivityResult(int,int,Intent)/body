{
  if (requestCode != REQUEST_CODE_START_BT) {
    Log.e(TAG,"Unexpected onActivityResult " + requestCode + " "+ resultCode);
    setResult(Activity.RESULT_CANCELED);
    finish();
    return;
  }
  if (resultCode != RESULT_BT_STARTING_OR_STARTED) {
    setResult(resultCode);
    finish();
  }
  mUserConfirmed=true;
  if (mLocalManager.getBluetoothState() == BluetoothAdapter.STATE_ON) {
    proceedAndFinish(false);
  }
 else {
    createDialog();
  }
}
