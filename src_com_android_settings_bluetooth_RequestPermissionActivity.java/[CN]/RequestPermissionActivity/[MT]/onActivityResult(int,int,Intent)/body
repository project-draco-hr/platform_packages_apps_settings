{
  if (requestCode != REQUEST_CODE_START_BT) {
    Log.e(TAG,"Unexpected onActivityResult " + requestCode + ' '+ resultCode);
    setResult(RESULT_CANCELED);
    finish();
    return;
  }
  if (resultCode != RESULT_BT_STARTING_OR_STARTED) {
    setResult(resultCode);
    finish();
    return;
  }
  mUserConfirmed=true;
  if (mLocalAdapter.getBluetoothState() == BluetoothAdapter.STATE_ON) {
    proceedAndFinish();
  }
 else {
    createDialog();
  }
}
