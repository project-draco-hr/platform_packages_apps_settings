{
  if (!mDataValid && convertView == null) {
    throw new IllegalStateException("this should only be called when the cursor is valid");
  }
  if (!mCursor.moveToPosition(position)) {
    throw new IllegalStateException("couldn't move cursor to position " + position);
  }
  View view;
  TextView textTitle;
  TextView textSummary;
  ImageView imageView;
  if (convertView == null) {
    view=mInflater.inflate(R.layout.search_result_item,parent,false);
  }
 else {
    view=convertView;
  }
  textTitle=(TextView)view.findViewById(R.id.title);
  textSummary=(TextView)view.findViewById(R.id.summary);
  imageView=(ImageView)view.findViewById(R.id.icon);
  SearchResult result=(SearchResult)getItem(position);
  textTitle.setText(result.title);
  String summaryOn=result.summaryOn;
  String entries=result.entries;
  final StringBuilder sb=new StringBuilder();
  if (!TextUtils.isEmpty(summaryOn) && !summaryOn.contains(PERCENT_RECLACE) && !summaryOn.contains(DOLLAR_REPLACE)) {
    sb.append(summaryOn);
    sb.append(ELLIPSIS);
  }
 else   if (!TextUtils.isEmpty(entries)) {
    final int index=entries.indexOf(Index.ENTRIES_SEPARATOR);
    if (index > 0) {
      final String firstEntriesValue=entries.substring(0,index);
      sb.append(firstEntriesValue);
    }
 else {
      sb.append(entries);
    }
    sb.append(ELLIPSIS);
  }
  textSummary.setText(sb.toString());
  if (result.iconResId != R.drawable.empty_icon) {
    final Context packageContext=result.context;
    final Drawable drawable;
    try {
      drawable=packageContext.getDrawable(result.iconResId);
      imageView.setImageDrawable(drawable);
    }
 catch (    Resources.NotFoundException nfe) {
      Log.e(LOG_TAG,"Cannot load Drawable for " + result.title);
    }
    imageView.setBackgroundResource(R.color.temporary_background_icon);
  }
 else {
    imageView.setImageDrawable(null);
    imageView.setBackgroundResource(R.drawable.empty_icon);
  }
  return view;
}
