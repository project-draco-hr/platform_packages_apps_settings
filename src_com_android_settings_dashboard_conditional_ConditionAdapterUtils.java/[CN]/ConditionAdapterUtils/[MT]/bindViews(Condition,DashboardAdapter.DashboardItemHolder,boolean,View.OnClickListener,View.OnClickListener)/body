{
  view.itemView.setTag(condition);
  view.itemView.setOnClickListener(onClickListener);
  view.icon.setImageIcon(condition.getIcon());
  view.title.setText(condition.getTitle());
  ImageView expand=(ImageView)view.itemView.findViewById(R.id.expand_indicator);
  expand.setTag(condition);
  expand.setImageResource(isExpanded ? R.drawable.ic_expand_less : R.drawable.ic_expand_more);
  expand.setOnClickListener(onExpandListener);
  View detailGroup=view.itemView.findViewById(R.id.detail_group);
  if (isExpanded != (detailGroup.getVisibility() == View.VISIBLE)) {
    animateChange(view.itemView,view.itemView.findViewById(R.id.content),detailGroup,isExpanded);
  }
  if (isExpanded) {
    view.summary.setText(condition.getSummary());
    CharSequence[] actions=condition.getActions();
    for (int i=0; i < 2; i++) {
      Button button=(Button)detailGroup.findViewById(i == 0 ? R.id.first_action : R.id.second_action);
      if (actions.length > i) {
        button.setVisibility(View.VISIBLE);
        button.setText(actions[i]);
        final int index=i;
        button.setOnClickListener(new View.OnClickListener(){
          @Override public void onClick(          View v){
            condition.onActionClick(index);
          }
        }
);
      }
 else {
        button.setVisibility(View.GONE);
      }
    }
  }
}
