{
  super.onCreate(icicle);
  mUsbManager=(UsbManager)getSystemService(Context.USB_SERVICE);
  if (mStorageManager == null) {
    mStorageManager=(StorageManager)getSystemService(Context.STORAGE_SERVICE);
    mStorageManager.registerListener(mStorageListener);
  }
  addPreferencesFromResource(R.xml.device_info_memory);
  if (!Environment.isExternalStorageEmulated()) {
    addCategoryForVolume(null);
  }
  final StorageVolume[] storageVolumes=mStorageManager.getVolumeList();
  for (  StorageVolume volume : storageVolumes) {
    addCategoryForVolume(volume);
  }
  setHasOptionsMenu(true);
}
