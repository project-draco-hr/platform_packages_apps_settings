{
  super.onCreate(icicle);
  if (mStorageManager == null) {
    mStorageManager=(StorageManager)getSystemService(Context.STORAGE_SERVICE);
    mStorageManager.registerListener(mStorageListener);
  }
  addPreferencesFromResource(R.xml.device_info_memory);
  mRes=getResources();
  mSdSize=findPreference(MEMORY_SD_SIZE);
  mSdAvail=findPreference(MEMORY_SD_AVAIL);
  mSdMountToggle=findPreference(MEMORY_SD_MOUNT_TOGGLE);
  mSdFormat=findPreference(MEMORY_SD_FORMAT);
  mPtpModeToggle=(CheckBoxPreference)findPreference(PTP_MODE_TOGGLE);
  if (Usb.isFunctionSupported(Usb.USB_FUNCTION_MTP)) {
    mPtpModeToggle.setChecked(Settings.System.getInt(getContentResolver(),Settings.System.USE_PTP_INTERFACE,0) != 0);
  }
 else {
    getPreferenceScreen().removePreference(mPtpModeToggle);
  }
}
