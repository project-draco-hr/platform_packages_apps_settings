{
  super.onCreate(icicle);
  final Context context=getActivity();
  mStorageManager=context.getSystemService(StorageManager.class);
  if (DocumentsContract.ACTION_DOCUMENT_ROOT_SETTINGS.equals(getActivity().getIntent().getAction())) {
    final Uri rootUri=getActivity().getIntent().getData();
    final String fsUuid=DocumentsContract.getRootId(rootUri);
    mVolume=mStorageManager.findVolumeByUuid(fsUuid);
  }
 else {
    final String volId=getArguments().getString(VolumeInfo.EXTRA_VOLUME_ID);
    mVolume=mStorageManager.findVolumeById(volId);
  }
  if (mVolume == null) {
    Log.d(TAG,"Leaving details fragment due to missing volume");
    finish();
    return;
  }
  Preconditions.checkState(mVolume.getType() == VolumeInfo.TYPE_PUBLIC);
  mDisk=mStorageManager.findDiskById(mVolume.getDiskId());
  Preconditions.checkNotNull(mDisk);
  mVolumeId=mVolume.getId();
  addPreferencesFromResource(R.xml.device_info_storage_volume);
  mSummary=new StorageSummaryPreference(context);
  mMount=buildAction(R.string.storage_menu_mount);
  mUnmount=buildAction(R.string.storage_menu_unmount);
  mFormatPublic=buildAction(R.string.storage_menu_format);
  mFormatPrivate=buildAction(R.string.storage_menu_format_private);
}
