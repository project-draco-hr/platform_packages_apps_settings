{
  getActivity().setTitle(mStorageManager.getBestVolumeDescription(mVolume.id));
  final Context context=getActivity();
  final PreferenceScreen screen=getPreferenceScreen();
  screen.removeAll();
  if (mVolume.state == VolumeInfo.STATE_MOUNTED) {
    screen.addPreference(mGraph);
    screen.addPreference(mTotal);
    screen.addPreference(mAvailable);
  }
  if (mVolume.state == VolumeInfo.STATE_UNMOUNTED) {
    screen.addPreference(mMount);
  }
  if (mVolume.state == VolumeInfo.STATE_MOUNTED) {
    screen.addPreference(mUnmount);
  }
  screen.addPreference(mFormat);
  if (SystemProperties.getBoolean(PREF_FORMAT_INTERNAL,false)) {
    screen.addPreference(mFormatInternal);
  }
  final File file=new File(mVolume.path);
  mTotalSize=file.getTotalSpace();
  mAvailSize=file.getFreeSpace();
  mTotal.setSummary(Formatter.formatFileSize(context,mTotalSize));
  mAvailable.setSummary(Formatter.formatFileSize(context,mAvailSize));
  mGraph.clear();
  mGraph.addEntry(0,(mTotalSize - mAvailSize) / (float)mTotalSize,android.graphics.Color.GRAY);
  mGraph.commit();
}
