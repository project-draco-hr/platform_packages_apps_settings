{
  super.onCreate(icicle);
  Preference removablePref;
  mHandler=new MyHandler(this);
  mTelephonyManager=(TelephonyManager)getSystemService(TELEPHONY_SERVICE);
  addPreferencesFromResource(R.xml.device_info_status);
  mBatteryLevel=findPreference("battery_level");
  mBatteryStatus=findPreference("battery_status");
  mRes=getResources();
  if (sUnknown == null) {
    sUnknown=mRes.getString(R.string.device_info_default);
  }
  mPhone=PhoneFactory.getDefaultPhone();
  mSignalStrength=findPreference("signal_strength");
  mUptime=findPreference("up_time");
  if (mPhone.getPhoneName().equals("CDMA")) {
    setSummaryText("meid_number",mPhone.getMeid());
    setSummaryText("min_number",mPhone.getCdmaMin());
    setSummaryText("prl_version",mPhone.getCdmaPrlVersion());
    removablePref=findPreference("imei");
    if (removablePref != null) {
      getPreferenceScreen().removePreference(removablePref);
    }
    removablePref=findPreference("imei_sv");
    if (removablePref != null) {
      getPreferenceScreen().removePreference(removablePref);
    }
  }
 else {
    setSummaryText("imei",mPhone.getDeviceId());
    setSummaryText("imei_sv",((TelephonyManager)getSystemService(TELEPHONY_SERVICE)).getDeviceSoftwareVersion());
    removablePref=findPreference("prl_version");
    if (removablePref != null) {
      getPreferenceScreen().removePreference(removablePref);
    }
    removablePref=findPreference("meid_number");
    if (removablePref != null) {
      getPreferenceScreen().removePreference(removablePref);
    }
    removablePref=findPreference("min_number");
    if (removablePref != null) {
      getPreferenceScreen().removePreference(removablePref);
    }
  }
  setSummaryText("number",PhoneNumberUtils.formatNumber(mPhone.getLine1Number()));
  mPhoneStateReceiver=new PhoneStateIntentReceiver(this,mHandler);
  mPhoneStateReceiver.notifySignalStrength(EVENT_SIGNAL_STRENGTH_CHANGED);
  mPhoneStateReceiver.notifyServiceState(EVENT_SERVICE_STATE_CHANGED);
  setWifiStatus();
  setBtStatus();
}
