{
switch (msg.what) {
case MSG_MEASURE:
{
      if (mCached != null) {
        sendExactUpdate(mCached);
        break;
      }
      final Context context=(mContext != null) ? mContext.get() : null;
      if (context == null) {
        return;
      }
synchronized (mLock) {
        if (mBound) {
          removeMessages(MSG_DISCONNECT);
          sendMessage(obtainMessage(MSG_CONNECTED,mDefaultContainer));
        }
 else {
          Intent service=new Intent().setComponent(DEFAULT_CONTAINER_COMPONENT);
          context.bindService(service,mDefContainerConn,Context.BIND_AUTO_CREATE,UserHandle.USER_OWNER);
        }
      }
      break;
    }
case MSG_CONNECTED:
{
    IMediaContainerService imcs=(IMediaContainerService)msg.obj;
    measureApproximateStorage(imcs);
    measureExactStorage(imcs);
    break;
  }
case MSG_DISCONNECT:
{
synchronized (mLock) {
    if (mBound) {
      final Context context=(mContext != null) ? mContext.get() : null;
      if (context == null) {
        return;
      }
      mBound=false;
      context.unbindService(mDefContainerConn);
    }
  }
  break;
}
case MSG_COMPLETED:
{
mCached=(MeasurementDetails)msg.obj;
sendExactUpdate(mCached);
break;
}
case MSG_INVALIDATE:
{
mCached=null;
break;
}
}
}
