{
  if (mIsInternal) {
    long codeSize=stats.codeSize;
    long dataSize=stats.dataSize;
    long cacheSize=stats.cacheSize;
    if (Environment.isExternalStorageEmulated()) {
      codeSize+=stats.externalCodeSize + stats.externalObbSize;
      dataSize+=stats.externalDataSize + stats.externalMediaSize;
      cacheSize+=stats.externalCacheSize;
    }
    if (stats.userHandle == mCurrentUser) {
      mDetails.appsSize+=codeSize;
      mDetails.appsSize+=dataSize;
    }
    addValue(mDetails.usersSize,stats.userHandle,dataSize);
    mDetails.cacheSize+=cacheSize;
  }
 else {
    mDetails.appsSize+=stats.externalCodeSize + stats.externalDataSize + stats.externalMediaSize+ stats.externalObbSize;
    mDetails.cacheSize+=stats.externalCacheSize;
  }
}
