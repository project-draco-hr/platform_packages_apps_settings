{
  if (mShowingApprox) {
    mUsageBarPreference.clear();
    mShowingApprox=false;
  }
  findPreference(KEY_TOTAL_SIZE).setSummary(formatSize(totalSize));
  if (mLocalMeasure.isExternalSDCard()) {
    final long usedSize=totalSize - availSize;
    mUsageBarPreference.addEntry(0,usedSize / (float)totalSize,android.graphics.Color.GRAY);
  }
  updatePreference(appsSize,totalSize,KEY_APPLICATIONS);
  long totalMediaSize=0;
  for (int i=0; i < sMediaCategories.length; i++) {
    final String category=sMediaCategories[i].mCategory;
    final long size=mediaSizes[i];
    updatePreference(size,totalSize,category);
    totalMediaSize+=size;
  }
  updatePreference(downloadsSize,totalSize,KEY_DOWNLOADS);
  updatePreference(miscSize,totalSize,KEY_MISC);
  updatePreference(availSize,totalSize,KEY_AVAILABLE,false);
  mUsageBarPreference.commit();
}
