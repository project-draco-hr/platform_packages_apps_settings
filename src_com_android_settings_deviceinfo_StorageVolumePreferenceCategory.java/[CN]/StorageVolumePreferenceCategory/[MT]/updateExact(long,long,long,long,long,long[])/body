{
  mUsageBarPreference.clear();
  mPreferences[TOTAL_SIZE].setSummary(formatSize(totalSize));
  if (!mMeasurement.isPrimary()) {
    final long usedSize=totalSize - availSize;
    mUsageBarPreference.addEntry(usedSize / (float)totalSize,android.graphics.Color.GRAY);
  }
  updatePreference(appsSize,totalSize,APPLICATIONS);
  long totalMediaSize=0;
  for (int i=0; i < sMediaCategories.length; i++) {
    final int category=sMediaCategories[i].mCategory;
    final long size=mediaSizes[i];
    updatePreference(size,totalSize,category);
    totalMediaSize+=size;
  }
  updatePreference(downloadsSize,totalSize,DOWNLOADS);
  updatePreference(miscSize,totalSize,MISC);
  updatePreference(availSize,totalSize,AVAILABLE);
  mUsageBarPreference.commit();
}
