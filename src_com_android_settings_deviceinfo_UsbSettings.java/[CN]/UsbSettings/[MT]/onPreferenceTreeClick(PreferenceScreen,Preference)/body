{
  if (Utils.isMonkeyRunning()) {
    return true;
  }
  if (preference instanceof CheckBoxPreference) {
    CheckBoxPreference checkBox=(CheckBoxPreference)preference;
    if (!checkBox.isChecked()) {
      checkBox.setChecked(true);
      return true;
    }
  }
  if (preference == mMtp) {
    mUsbManager.setCurrentFunction(UsbManager.USB_FUNCTION_MTP,true);
  }
 else   if (preference == mPtp) {
    mUsbManager.setCurrentFunction(UsbManager.USB_FUNCTION_PTP,true);
  }
  updateToggles();
  return true;
}
