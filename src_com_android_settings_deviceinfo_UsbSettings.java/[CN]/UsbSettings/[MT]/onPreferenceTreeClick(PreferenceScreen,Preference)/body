{
  if (Utils.isMonkeyRunning()) {
    return true;
  }
  UserManager um=(UserManager)getActivity().getSystemService(Context.USER_SERVICE);
  if (um.hasUserRestriction(UserManager.DISALLOW_USB_FILE_TRANSFER)) {
    return true;
  }
  String function="none";
  if (preference == mMtp && mMtp.isChecked()) {
    function=UsbManager.USB_FUNCTION_MTP;
  }
 else   if (preference == mPtp && mPtp.isChecked()) {
    function=UsbManager.USB_FUNCTION_PTP;
  }
 else   if (preference == mMidi && mMidi.isChecked()) {
    function=UsbManager.USB_FUNCTION_MIDI;
  }
  mUsbManager.setCurrentFunction(function,true);
  updateToggles(function);
  return true;
}
