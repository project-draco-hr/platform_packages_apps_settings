{
  super(context,attrs);
  mBatteryBackgroundPaint.setARGB(255,128,128,128);
  mBatteryBackgroundPaint.setStyle(Paint.Style.FILL);
  mBatteryGoodPaint.setARGB(128,0,255,0);
  mBatteryGoodPaint.setStyle(Paint.Style.STROKE);
  mBatteryWarnPaint.setARGB(128,255,255,0);
  mBatteryWarnPaint.setStyle(Paint.Style.STROKE);
  mBatteryCriticalPaint.setARGB(192,255,0,0);
  mBatteryCriticalPaint.setStyle(Paint.Style.STROKE);
  mChargingPaint.setARGB(255,0,128,0);
  mChargingPaint.setStyle(Paint.Style.STROKE);
  mScreenOnPaint.setStyle(Paint.Style.STROKE);
  mGpsOnPaint.setStyle(Paint.Style.STROKE);
  mWifiRunningPaint.setStyle(Paint.Style.STROKE);
  mCpuRunningPaint.setStyle(Paint.Style.STROKE);
  mPhoneSignalChart.setColors(new int[]{0x00000000,0xffa00000,0xffa07000,0xffa0a000,0xff80a000,0xff409000,0xff008000});
  TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.BatteryHistoryChart,0,0);
  final TextAttrs mainTextAttrs=new TextAttrs();
  final TextAttrs headTextAttrs=new TextAttrs();
  mainTextAttrs.retrieve(context,a,R.styleable.BatteryHistoryChart_android_textAppearance);
  headTextAttrs.retrieve(context,a,R.styleable.BatteryHistoryChart_headerAppearance);
  int shadowcolor=0;
  float dx=0, dy=0, r=0;
  int n=a.getIndexCount();
  for (int i=0; i < n; i++) {
    int attr=a.getIndex(i);
switch (attr) {
case R.styleable.BatteryHistoryChart_android_shadowColor:
      shadowcolor=a.getInt(attr,0);
    break;
case R.styleable.BatteryHistoryChart_android_shadowDx:
  dx=a.getFloat(attr,0);
break;
case R.styleable.BatteryHistoryChart_android_shadowDy:
dy=a.getFloat(attr,0);
break;
case R.styleable.BatteryHistoryChart_android_shadowRadius:
r=a.getFloat(attr,0);
break;
case R.styleable.BatteryHistoryChart_android_textColor:
mainTextAttrs.textColor=a.getColorStateList(attr);
headTextAttrs.textColor=a.getColorStateList(attr);
break;
case R.styleable.BatteryHistoryChart_android_textSize:
mainTextAttrs.textSize=a.getDimensionPixelSize(attr,mainTextAttrs.textSize);
headTextAttrs.textSize=a.getDimensionPixelSize(attr,headTextAttrs.textSize);
break;
case R.styleable.BatteryHistoryChart_android_typeface:
mainTextAttrs.typefaceIndex=a.getInt(attr,mainTextAttrs.typefaceIndex);
headTextAttrs.typefaceIndex=a.getInt(attr,headTextAttrs.typefaceIndex);
break;
case R.styleable.BatteryHistoryChart_android_textStyle:
mainTextAttrs.styleIndex=a.getInt(attr,mainTextAttrs.styleIndex);
headTextAttrs.styleIndex=a.getInt(attr,headTextAttrs.styleIndex);
break;
}
}
a.recycle();
mainTextAttrs.apply(context,mTextPaint);
headTextAttrs.apply(context,mHeaderTextPaint);
if (shadowcolor != 0) {
mTextPaint.setShadowLayer(r,dx,dy,shadowcolor);
mHeaderTextPaint.setShadowLayer(r,dx,dy,shadowcolor);
}
}
