{
  super.onActivityCreated(savedInstanceState);
  if (mCreated)   return;
  mCreated=true;
  addPreferencesFromResource(R.xml.battery_saver_settings);
  mContext=getActivity();
  mAlwaysOnPref=new SettingPref(SettingPref.TYPE_GLOBAL,KEY_ALWAYS_ON,Global.LOW_POWER_MODE,0){
    @Override protected boolean setSetting(    Context context,    int value){
      mHandler.removeCallbacks(mStartMode);
      if (value == 0) {
        return super.setSetting(context,value);
      }
 else {
        mHandler.postDelayed(mStartMode,WAIT_FOR_SWITCH_ANIM);
        return true;
      }
    }
  }
;
  mTriggerPref=new SettingPref(SettingPref.TYPE_GLOBAL,KEY_TURN_ON_AUTOMATICALLY,Global.LOW_POWER_MODE_TRIGGER_LEVEL,mContext.getResources().getInteger(com.android.internal.R.integer.config_lowBatteryWarningLevel),getResources().getIntArray(R.array.battery_saver_trigger_values)){
    @Override protected String getCaption(    Resources res,    int value){
      if (value > 0 && value < 100) {
        return res.getString(R.string.battery_saver_turn_on_automatically_pct,value);
      }
      return res.getString(R.string.battery_saver_turn_on_automatically_never);
    }
  }
;
  mAlwaysOnPref.init(this);
  mTriggerPref.init(this);
}
