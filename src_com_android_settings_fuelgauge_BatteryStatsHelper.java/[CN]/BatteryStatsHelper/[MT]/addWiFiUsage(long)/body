{
  long onTimeMs=mStats.getWifiOnTime(uSecNow,mStatsType) / 1000;
  long runningTimeMs=mStats.getGlobalWifiRunningTime(uSecNow,mStatsType) / 1000;
  if (DEBUG)   Log.i(TAG,"WIFI runningTime=" + runningTimeMs + " app runningTime="+ mAppWifiRunning);
  runningTimeMs-=mAppWifiRunning;
  if (runningTimeMs < 0)   runningTimeMs=0;
  double wifiPower=(onTimeMs * 0 * mPowerProfile.getAveragePower(PowerProfile.POWER_WIFI_ON) + runningTimeMs * mPowerProfile.getAveragePower(PowerProfile.POWER_WIFI_ON)) / 1000;
  if (DEBUG)   Log.i(TAG,"WIFI power=" + wifiPower + " from procs="+ mWifiPower);
  BatterySipper bs=addEntry(mActivity.getString(R.string.power_wifi),DrainType.WIFI,runningTimeMs,R.drawable.ic_settings_wifi,wifiPower + mWifiPower);
  aggregateSippers(bs,mWifiSippers,"WIFI");
}
