{
  final Bundle args=getArguments();
  mTitle=args.getString(EXTRA_TITLE);
  final int percentage=args.getInt(EXTRA_PERCENT,1);
  final int gaugeValue=args.getInt(EXTRA_GAUGE,1);
  mUsageSince=args.getInt(EXTRA_USAGE_SINCE,USAGE_SINCE_UNPLUGGED);
  mUid=args.getInt(EXTRA_UID,0);
  mDrainType=(BatterySipper.DrainType)args.getSerializable(EXTRA_DRAIN_TYPE);
  mNoCoverage=args.getDouble(EXTRA_NO_COVERAGE,0);
  String iconPackage=args.getString(EXTRA_ICON_PACKAGE);
  int iconId=args.getInt(EXTRA_ICON_ID,0);
  mShowLocationButton=args.getBoolean(EXTRA_SHOW_LOCATION_BUTTON);
  if (!TextUtils.isEmpty(iconPackage)) {
    try {
      final PackageManager pm=getActivity().getPackageManager();
      ApplicationInfo ai=pm.getPackageInfo(iconPackage,0).applicationInfo;
      if (ai != null) {
        mAppIcon=ai.loadIcon(pm);
      }
    }
 catch (    NameNotFoundException nnfe) {
    }
  }
 else   if (iconId != 0) {
    mAppIcon=getActivity().getDrawable(iconId);
  }
  if (mAppIcon == null) {
    mAppIcon=getActivity().getPackageManager().getDefaultActivityIcon();
  }
  final TextView summary=(TextView)mRootView.findViewById(android.R.id.summary);
  summary.setText(getDescriptionForDrainType());
  summary.setVisibility(View.VISIBLE);
  mTypes=args.getIntArray(EXTRA_DETAIL_TYPES);
  mValues=args.getDoubleArray(EXTRA_DETAIL_VALUES);
  mTitleView=(TextView)mRootView.findViewById(android.R.id.title);
  mTitleView.setText(mTitle);
  final TextView text1=(TextView)mRootView.findViewById(android.R.id.text1);
  text1.setText(Utils.formatPercentage(percentage));
  mTwoButtonsPanel=(ViewGroup)mRootView.findViewById(R.id.two_buttons_panel);
  mForceStopButton=(Button)mRootView.findViewById(R.id.left_button);
  mReportButton=(Button)mRootView.findViewById(R.id.right_button);
  mForceStopButton.setEnabled(false);
  final ProgressBar progress=(ProgressBar)mRootView.findViewById(android.R.id.progress);
  progress.setProgress(gaugeValue);
  final ImageView icon=(ImageView)mRootView.findViewById(android.R.id.icon);
  icon.setImageDrawable(mAppIcon);
  mDetailsParent=(ViewGroup)mRootView.findViewById(R.id.details);
  mControlsParent=(ViewGroup)mRootView.findViewById(R.id.controls);
  mMessagesParent=(ViewGroup)mRootView.findViewById(R.id.messages);
  fillDetailsSection();
  fillPackagesSection(mUid);
  fillControlsSection(mUid);
  fillMessagesSection(mUid);
  if (mUid >= Process.FIRST_APPLICATION_UID) {
    mForceStopButton.setText(R.string.force_stop);
    mForceStopButton.setTag(ACTION_FORCE_STOP);
    mForceStopButton.setOnClickListener(this);
    mReportButton.setText(com.android.internal.R.string.report);
    mReportButton.setTag(ACTION_REPORT);
    mReportButton.setOnClickListener(this);
    int enabled=android.provider.Settings.Global.getInt(getActivity().getContentResolver(),android.provider.Settings.Global.SEND_ACTION_APP_ERROR,0);
    if (enabled != 0) {
      if (mPackages != null && mPackages.length > 0) {
        try {
          mApp=getActivity().getPackageManager().getApplicationInfo(mPackages[0],0);
          mInstaller=ApplicationErrorReport.getErrorReportReceiver(getActivity(),mPackages[0],mApp.flags);
        }
 catch (        NameNotFoundException e) {
        }
      }
      mReportButton.setEnabled(mInstaller != null);
    }
 else {
      mTwoButtonsPanel.setVisibility(View.GONE);
    }
  }
 else {
    mTwoButtonsPanel.setVisibility(View.GONE);
  }
}
