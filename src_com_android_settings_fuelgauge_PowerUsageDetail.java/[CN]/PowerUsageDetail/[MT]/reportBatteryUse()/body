{
  if (mPackages == null)   return;
  final Intent intent=getIntent();
  final int percentage=intent.getIntExtra(EXTRA_PERCENT,1);
  final long duration=intent.getLongExtra(EXTRA_USAGE_DURATION,0);
  ApplicationErrorReport report=new ApplicationErrorReport();
  report.type=ApplicationErrorReport.TYPE_BATTERY;
  report.packageName=mPackages[0];
  report.installerPackageName=mInstaller.getPackageName();
  report.processName=mPackages[0];
  report.time=System.currentTimeMillis();
  report.systemApp=(mApp.flags & ApplicationInfo.FLAG_SYSTEM) != 0;
  StringBuilder builder=new StringBuilder();
  builder.append("Application used " + percentage + "% of battery over "+ Utils.formatElapsedTime(this,duration / 1000));
  builder.append('\n');
  builder.append(intent.getStringExtra(EXTRA_REPORT_DETAILS));
  builder.append('\n');
  builder.append("----------------------------------------------");
  builder.append('\n');
  builder.append(intent.getStringExtra(EXTRA_REPORT_CHECKIN_DETAILS));
  builder.append('\n');
  report.batteryText=builder.toString();
  Intent result=new Intent(Intent.ACTION_APP_ERROR);
  result.setComponent(mInstaller);
  result.putExtra(Intent.EXTRA_BUG_REPORT,report);
  result.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  startActivity(result);
}
