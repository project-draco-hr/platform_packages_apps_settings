{
  if (preference instanceof BatteryHistoryPreference) {
    Parcel hist=Parcel.obtain();
    mStatsHelper.getStats().writeToParcelWithoutUids(hist,0);
    byte[] histData=hist.marshall();
    Bundle args=new Bundle();
    args.putByteArray(BatteryHistoryDetail.EXTRA_STATS,histData);
    PreferenceActivity pa=(PreferenceActivity)getActivity();
    pa.startPreferencePanel(BatteryHistoryDetail.class.getName(),args,R.string.history_details_title,null,null,0);
    return super.onPreferenceTreeClick(preferenceScreen,preference);
  }
  if (!(preference instanceof PowerGaugePreference)) {
    return false;
  }
  PowerGaugePreference pgp=(PowerGaugePreference)preference;
  BatterySipper sipper=pgp.getInfo();
  mStatsHelper.startBatteryDetailPage((PreferenceActivity)getActivity(),sipper,true);
  return super.onPreferenceTreeClick(preferenceScreen,preference);
}
