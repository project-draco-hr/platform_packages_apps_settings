{
  PowerGaugePreference pgp=(PowerGaugePreference)preference;
  BatterySipper sipper=pgp.getInfo();
  Intent intent=new Intent(this,PowerUsageDetail.class);
  intent.putExtra(PowerUsageDetail.EXTRA_TITLE,sipper.name);
  intent.putExtra(PowerUsageDetail.EXTRA_PERCENT,(int)Math.ceil(sipper.getSortValue() * 100 / mTotalPower));
  intent.putExtra(PowerUsageDetail.EXTRA_GAUGE,(int)Math.ceil(sipper.getSortValue() * 100 / mMaxPower));
  intent.putExtra(PowerUsageDetail.EXTRA_ICON_PACKAGE,sipper.defaultPackageName);
  intent.putExtra(PowerUsageDetail.EXTRA_ICON_ID,sipper.iconId);
  if (sipper.uidObj != null) {
    intent.putExtra(PowerUsageDetail.EXTRA_UID,sipper.uidObj.getUid());
  }
  intent.putExtra(PowerUsageDetail.EXTRA_DRAIN_TYPE,sipper.drainType);
switch (sipper.drainType) {
case APP:
{
      Uid uid=sipper.uidObj;
      int[] types=new int[]{R.string.usage_type_cpu,R.string.usage_type_cpu_foreground,R.string.usage_type_gps,R.string.usage_type_data_send,R.string.usage_type_data_recv,R.string.usage_type_audio,R.string.usage_type_video};
      double[] values=new double[]{sipper.cpuTime,sipper.cpuFgTime,sipper.gpsTime,uid != null ? uid.getTcpBytesSent(mStatsType) : 0,uid != null ? uid.getTcpBytesReceived(mStatsType) : 0,0,0};
      intent.putExtra(PowerUsageDetail.EXTRA_DETAIL_TYPES,types);
      intent.putExtra(PowerUsageDetail.EXTRA_DETAIL_VALUES,values);
    }
  break;
default :
{
  int[] types=new int[]{R.string.usage_type_on_time};
  double[] values=new double[]{sipper.usageTime};
  intent.putExtra(PowerUsageDetail.EXTRA_DETAIL_TYPES,types);
  intent.putExtra(PowerUsageDetail.EXTRA_DETAIL_VALUES,values);
}
}
startActivity(intent);
return super.onPreferenceTreeClick(preferenceScreen,preference);
}
