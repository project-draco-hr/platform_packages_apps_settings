{
  int seconds=(int)Math.floor(millis / 1000);
  int days=0, hours=0, minutes=0;
  if (seconds >= SECONDS_PER_DAY) {
    days=seconds / SECONDS_PER_DAY;
    seconds-=days * SECONDS_PER_DAY;
  }
  if (seconds >= SECONDS_PER_HOUR) {
    hours=seconds / SECONDS_PER_HOUR;
    seconds-=hours * SECONDS_PER_HOUR;
  }
  if (seconds >= SECONDS_PER_MINUTE) {
    minutes=seconds / SECONDS_PER_MINUTE;
    seconds-=minutes * SECONDS_PER_MINUTE;
  }
  if (days >= 4) {
    return context.getString(R.string.battery_history_days_only,days);
  }
 else   if (days > 0) {
    return context.getString(R.string.battery_history_days_and_hours,days,hours);
  }
 else   if (hours >= 12) {
    return context.getString(R.string.battery_history_hours_only,hours);
  }
 else   if (hours > 0) {
    return context.getString(R.string.battery_history_hours_and_minutes,hours,minutes);
  }
 else   if (minutes >= 10) {
    return context.getString(R.string.battery_history_minutes_only,minutes);
  }
 else   if (minutes > 0) {
    return context.getString(R.string.battery_history_minutes_and_seconds,minutes,seconds);
  }
 else {
    return context.getString(R.string.battery_history_seconds,seconds);
  }
}
