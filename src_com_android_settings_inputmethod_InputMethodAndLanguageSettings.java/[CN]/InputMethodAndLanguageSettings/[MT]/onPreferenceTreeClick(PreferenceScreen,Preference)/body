{
  if (Utils.isMonkeyRunning()) {
    return false;
  }
  if (preference instanceof PreferenceScreen) {
    if (preference.getFragment() != null) {
    }
 else     if (KEY_CURRENT_INPUT_METHOD.equals(preference.getKey())) {
      final InputMethodManager imm=(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
      imm.showInputMethodPicker();
    }
  }
 else   if (preference instanceof CheckBoxPreference) {
    final CheckBoxPreference chkPref=(CheckBoxPreference)preference;
    if (!mHardKeyboardPreferenceList.isEmpty()) {
      for (int i=0; i < sHardKeyboardKeys.length; ++i) {
        if (chkPref == mHardKeyboardCategory.findPreference(sHardKeyboardKeys[i])) {
          System.putInt(getContentResolver(),sSystemSettingNames[i],chkPref.isChecked() ? 1 : 0);
          return true;
        }
      }
    }
    if (chkPref == mGameControllerCategory.findPreference("vibrate_input_devices")) {
      System.putInt(getContentResolver(),Settings.System.VIBRATE_INPUT_DEVICES,chkPref.isChecked() ? 1 : 0);
      return true;
    }
  }
  return super.onPreferenceTreeClick(preferenceScreen,preference);
}
