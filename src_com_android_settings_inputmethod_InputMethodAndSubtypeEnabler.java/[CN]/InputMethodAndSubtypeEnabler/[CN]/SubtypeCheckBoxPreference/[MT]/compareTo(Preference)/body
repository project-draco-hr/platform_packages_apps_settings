{
  if (p instanceof SubtypeCheckBoxPreference) {
    final SubtypeCheckBoxPreference pref=((SubtypeCheckBoxPreference)p);
    final CharSequence t0=getTitle();
    final CharSequence t1=pref.getTitle();
    if (TextUtils.equals(t0,t1)) {
      return 0;
    }
    if (mIsSystemLocale) {
      return -1;
    }
    if (pref.mIsSystemLocale) {
      return 1;
    }
    if (mIsSystemLanguage) {
      return -1;
    }
    if (pref.mIsSystemLanguage) {
      return 1;
    }
    if (TextUtils.isEmpty(t0)) {
      return 1;
    }
    if (TextUtils.isEmpty(t1)) {
      return -1;
    }
    return t0.toString().compareTo(t1.toString());
  }
 else {
    Log.w(TAG,"Illegal preference type.");
    return -1;
  }
}
