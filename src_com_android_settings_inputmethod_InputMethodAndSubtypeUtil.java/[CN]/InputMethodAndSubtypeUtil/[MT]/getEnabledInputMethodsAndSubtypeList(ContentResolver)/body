{
  final String enabledInputMethodsStr=Settings.Secure.getString(resolver,Settings.Secure.ENABLED_INPUT_METHODS);
  HashMap<String,HashSet<String>> imsList=new HashMap<>();
  if (DEBUG) {
    Log.d(TAG,"--- Load enabled input methods: " + enabledInputMethodsStr);
  }
  if (TextUtils.isEmpty(enabledInputMethodsStr)) {
    return imsList;
  }
  sStringInputMethodSplitter.setString(enabledInputMethodsStr);
  while (sStringInputMethodSplitter.hasNext()) {
    String nextImsStr=sStringInputMethodSplitter.next();
    sStringInputMethodSubtypeSplitter.setString(nextImsStr);
    if (sStringInputMethodSubtypeSplitter.hasNext()) {
      HashSet<String> subtypeHashes=new HashSet<>();
      String imeId=sStringInputMethodSubtypeSplitter.next();
      while (sStringInputMethodSubtypeSplitter.hasNext()) {
        subtypeHashes.add(sStringInputMethodSubtypeSplitter.next());
      }
      imsList.put(imeId,subtypeHashes);
    }
  }
  return imsList;
}
