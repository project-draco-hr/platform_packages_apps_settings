{
  PreferenceScreen preferenceScreen=context.getPreferenceScreen();
  for (  InputMethodInfo imi : inputMethodProperties) {
    String id=imi.getId();
    HashSet<String> enabledSubtypesSet=enabledSubtypes.get(id);
    for (    InputMethodSubtype subtype : imi.getSubtypes()) {
      String hashCode=String.valueOf(subtype.hashCode());
      if (DEBUG) {
        Log.d(TAG,"--- Set checked state: " + "id" + ", " + hashCode + ", "+ enabledSubtypesSet.contains(hashCode));
      }
      CheckBoxPreference pref=(CheckBoxPreference)preferenceScreen.findPreference(id + hashCode);
      if (pref != null) {
        pref.setChecked(enabledSubtypesSet.contains(hashCode));
      }
    }
  }
}
