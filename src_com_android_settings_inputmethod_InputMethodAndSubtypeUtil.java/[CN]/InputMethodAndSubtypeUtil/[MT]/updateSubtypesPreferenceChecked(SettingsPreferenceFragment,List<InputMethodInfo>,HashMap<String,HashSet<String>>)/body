{
  PreferenceScreen preferenceScreen=context.getPreferenceScreen();
  for (  InputMethodInfo imi : inputMethodProperties) {
    String id=imi.getId();
    if (!enabledSubtypes.containsKey(id))     break;
    final HashSet<String> enabledSubtypesSet=enabledSubtypes.get(id);
    final int subtypeCount=imi.getSubtypeCount();
    for (int i=0; i < subtypeCount; ++i) {
      InputMethodSubtype subtype=imi.getSubtypeAt(i);
      String hashCode=String.valueOf(subtype.hashCode());
      if (DEBUG) {
        Log.d(TAG,"--- Set checked state: " + "id" + ", " + hashCode + ", "+ enabledSubtypesSet.contains(hashCode));
      }
      CheckBoxPreference pref=(CheckBoxPreference)preferenceScreen.findPreference(id + hashCode);
      if (pref != null) {
        pref.setChecked(enabledSubtypesSet.contains(hashCode));
      }
    }
  }
}
