{
  final boolean wasChecked=isChecked();
  super.setChecked(checked);
  if (save) {
    saveImeSettings();
    InputMethodSettingValuesWrapper.getInstance(getContext()).refreshAllInputMethodAndSubtypes();
    if (wasChecked != checked && mOnImePreferenceChangeListener != null) {
      mOnImePreferenceChangeListener.onPreferenceChange(this,checked);
    }
  }
}
