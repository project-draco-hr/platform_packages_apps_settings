{
  if (p instanceof InputMethodSubtypePreference) {
    final InputMethodSubtypePreference pref=((InputMethodSubtypePreference)p);
    final CharSequence t0=getTitle();
    final CharSequence t1=pref.getTitle();
    if (TextUtils.equals(t0,t1)) {
      return 0;
    }
    if (mIsSystemLocale) {
      return -1;
    }
    if (pref.mIsSystemLocale) {
      return 1;
    }
    if (mIsSystemLanguage) {
      return -1;
    }
    if (pref.mIsSystemLanguage) {
      return 1;
    }
    if (TextUtils.isEmpty(t0)) {
      return 1;
    }
    if (TextUtils.isEmpty(t1)) {
      return -1;
    }
    return mCollator.compare(t0.toString(),t1.toString());
  }
  Log.w(TAG,"Illegal preference type.");
  return super.compareTo(p);
}
