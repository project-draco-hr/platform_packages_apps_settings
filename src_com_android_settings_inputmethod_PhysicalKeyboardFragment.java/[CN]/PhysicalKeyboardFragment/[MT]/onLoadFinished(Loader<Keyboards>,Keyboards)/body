{
  final InputDeviceIdentifier deviceId=mLoaderReference.get(loader.getId()).first;
  final PreferenceCategory category=mLoaderReference.get(loader.getId()).second;
  category.removeAll();
  for (  Keyboards.KeyboardInfo info : data.mInfos) {
    Preference pref=new Preference(getPrefContext(),null);
    final InputMethodInfo imi=info.mImi;
    final InputMethodSubtype imSubtype=info.mImSubtype;
    if (imi != null && imSubtype != null) {
      pref.setTitle(getDisplayName(getContext(),imi,imSubtype));
      KeyboardLayout layout=info.mLayout;
      if (layout != null) {
        pref.setSummary(layout.getLabel());
      }
      pref.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener(){
        @Override public boolean onPreferenceClick(        Preference preference){
          showKeyboardLayoutScreen(deviceId,imi,imSubtype);
          return true;
        }
      }
);
      category.addPreference(pref);
    }
  }
}
