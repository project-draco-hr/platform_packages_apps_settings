{
  clearHardKeyboardsData();
  loadInputMethodInfoSubtypes();
  final int[] devices=InputDevice.getDeviceIds();
  for (int deviceIndex=0; deviceIndex < devices.length; deviceIndex++) {
    InputDevice device=InputDevice.getDevice(devices[deviceIndex]);
    if (device != null && !device.isVirtual() && device.isFullKeyboard()) {
      final PreferenceCategory category=new PreferenceCategory(getPrefContext(),null);
      category.setTitle(device.getName());
      category.setOrder(0);
      mLoaderReference.put(deviceIndex,new Pair(device.getIdentifier(),category));
      getPreferenceScreen().addPreference(category);
    }
  }
  mKeyboardAssistanceCategory.setOrder(1);
  getPreferenceScreen().addPreference(mKeyboardAssistanceCategory);
  for (  int deviceIndex : mLoaderReference.keySet()) {
    getLoaderManager().initLoader(deviceIndex,null,this);
  }
  updateShowVirtualKeyboardSwitch();
}
