{
  if (mDialog != null && mDialog.isShowing()) {
    mDialog.dismiss();
  }
  final AlertDialog.Builder builder=new AlertDialog.Builder(mFragment.getActivity());
  builder.setTitle(R.string.phone_language);
  final int size=mSpellCheckerInfo.getSubtypeCount();
  final CharSequence[] items=new CharSequence[size + 1];
  items[0]=mRes.getString(R.string.use_system_language_to_select_input_method_subtypes);
  for (int i=0; i < size; ++i) {
    final SpellCheckerSubtype subtype=mSpellCheckerInfo.getSubtypeAt(i);
    final CharSequence label=subtype.getDisplayName(mFragment.getActivity(),mSpellCheckerInfo.getPackageName(),mSpellCheckerInfo.getServiceInfo().applicationInfo);
    items[i + 1]=label;
  }
  int checkedItem=0;
  final SpellCheckerSubtype currentScs=mTsm.getCurrentSpellCheckerSubtype(false);
  if (currentScs != null) {
    for (int i=0; i < size; ++i) {
      if (mSpellCheckerInfo.getSubtypeAt(i).equals(currentScs)) {
        checkedItem=i + 1;
        break;
      }
    }
  }
  builder.setSingleChoiceItems(items,checkedItem,new AlertDialog.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      if (which == 0) {
        mTsm.setSpellCheckerSubtype(null);
      }
 else {
        mTsm.setSpellCheckerSubtype(mSpellCheckerInfo.getSubtypeAt(which - 1));
      }
      if (DBG) {
        final SpellCheckerSubtype subtype=mTsm.getCurrentSpellCheckerSubtype(true);
        Log.d(TAG,"Current spell check locale is " + subtype == null ? "null" : subtype.getLocale());
      }
      dialog.dismiss();
    }
  }
);
  mDialog=builder.create();
  mDialog.show();
}
