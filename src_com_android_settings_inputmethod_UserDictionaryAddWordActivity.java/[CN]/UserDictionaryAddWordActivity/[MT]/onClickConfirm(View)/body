{
  if (UserDictionaryAddWordContents.MODE_EDIT == mContents.mMode && !TextUtils.isEmpty(mOldWord)) {
    UserDictionarySettings.deleteWord(mOldWord,this.getContentResolver());
  }
  final String newWord=mContents.mEditText.getText().toString();
  if (TextUtils.isEmpty(newWord)) {
    finish();
    return;
  }
  UserDictionarySettings.deleteWord(newWord,this.getContentResolver());
  if (TextUtils.isEmpty(mContents.mLocale)) {
    UserDictionary.Words.addWord(this,newWord.toString(),FREQUENCY_FOR_USER_DICTIONARY_ADDS,UserDictionary.Words.LOCALE_TYPE_ALL);
  }
 else {
    final Locale prevLocale=Locale.getDefault();
    Locale.setDefault(Utils.createLocaleFromString(mContents.mLocale));
    UserDictionary.Words.addWord(this,newWord.toString(),FREQUENCY_FOR_USER_DICTIONARY_ADDS,UserDictionary.Words.LOCALE_TYPE_CURRENT);
    Locale.setDefault(prevLocale);
  }
  finish();
}
