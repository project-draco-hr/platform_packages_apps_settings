{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.user_dictionary_add_word);
  final Intent intent=getIntent();
  final String action=intent.getAction();
  final int mode;
  if (MODE_EDIT_ACTION.equals(action)) {
    mode=UserDictionaryAddWordContents.MODE_EDIT;
  }
 else   if (MODE_INSERT_ACTION.equals(action)) {
    mode=UserDictionaryAddWordContents.MODE_INSERT;
  }
 else {
    throw new RuntimeException("Unsupported action: " + action);
  }
  final Bundle args=intent.getExtras();
  args.putInt(UserDictionaryAddWordContents.EXTRA_MODE,mode);
  if (null != savedInstanceState) {
    mIsShowingMoreOptions=savedInstanceState.getBoolean(STATE_KEY_IS_OPEN,mIsShowingMoreOptions);
    args.putAll(savedInstanceState);
  }
  mOldWord=intent.getStringExtra(UserDictionaryAddWordContents.EXTRA_WORD);
  mContents=new UserDictionaryAddWordContents(getWindow().getDecorView(),args);
  if (mIsShowingMoreOptions) {
    onClickMoreOptions(findViewById(R.id.user_dictionary_settings_add_dialog_more_options));
  }
  final ViewGroup v=(ViewGroup)findViewById(R.id.user_dictionary_add_word_grid);
  final LayoutTransition transition=new LayoutTransition();
  transition.setStartDelay(LayoutTransition.APPEARING,0);
  v.setLayoutTransition(transition);
}
