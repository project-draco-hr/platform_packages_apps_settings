{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.user_dictionary_add_word);
  final Intent intent=getIntent();
  final String action=intent.getAction();
  if (MODE_EDIT_ACTION.equals(action)) {
    mMode=MODE_EDIT;
  }
 else   if (MODE_INSERT_ACTION.equals(action)) {
    mMode=MODE_INSERT;
  }
 else {
    throw new RuntimeException("Unsupported action: " + action);
  }
  String savedWord=null;
  String savedLocale=null;
  if (null != savedInstanceState) {
    mIsShowingMoreOptions=savedInstanceState.getBoolean(STATE_KEY_IS_OPEN,mIsShowingMoreOptions);
    savedWord=savedInstanceState.getString(STATE_KEY_WORD);
    savedLocale=savedInstanceState.getString(STATE_KEY_LOCALE);
  }
  mOldWord=intent.getStringExtra(EXTRA_WORD);
  if (null != savedLocale) {
    mLocale=savedLocale;
  }
 else {
    final String locale=intent.getStringExtra(EXTRA_LOCALE);
    mLocale=null == locale ? Locale.getDefault().toString() : locale;
  }
  mEditText=(EditText)findViewById(R.id.user_dictionary_add_word_text);
  if (null != savedWord) {
    mEditText.setText(savedWord);
    mEditText.setSelection(savedWord.length());
  }
 else   if (null != mOldWord) {
    mEditText.setText(mOldWord);
    mEditText.setSelection(mOldWord.length());
  }
  if (mIsShowingMoreOptions) {
    onClickMoreOptions(findViewById(R.id.user_dictionary_settings_add_dialog_more_options));
  }
  final ViewGroup v=(ViewGroup)findViewById(R.id.user_dict_settings_add_dialog_top);
  final LayoutTransition transition=new LayoutTransition();
  transition.setStartDelay(LayoutTransition.APPEARING,0);
  v.setLayoutTransition(transition);
}
