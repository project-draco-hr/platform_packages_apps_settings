{
  if (isRestricted()) {
    mode=Settings.Secure.getInt(getContentResolver(),Settings.Secure.LOCATION_MODE,Settings.Secure.LOCATION_MODE_OFF);
    onModeChanged(mode,true);
    return;
  }
  Settings.Secure.putInt(getContentResolver(),Settings.Secure.LOCATION_MODE,mode);
  refreshLocationMode();
}
