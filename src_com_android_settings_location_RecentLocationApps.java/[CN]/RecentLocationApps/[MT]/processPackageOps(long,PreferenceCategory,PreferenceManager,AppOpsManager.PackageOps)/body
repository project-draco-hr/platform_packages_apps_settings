{
  String packageName=ops.getPackageName();
  List<AppOpsManager.OpEntry> entries=ops.getOps();
  boolean highBattery=false;
  boolean normalBattery=false;
  for (  AppOpsManager.OpEntry entry : entries) {
    if (now - entry.getTime() <= RECENT_TIME_INTERVAL_MILLIS) {
switch (entry.getOp()) {
case AppOpsManager.OP_MONITOR_LOCATION:
        normalBattery=true;
      break;
case AppOpsManager.OP_MONITOR_HIGH_POWER_LOCATION:
    highBattery=true;
  break;
default :
break;
}
}
}
if (!highBattery && !normalBattery) {
if (Log.isLoggable(TAG,Log.VERBOSE)) {
Log.v(TAG,packageName + " hadn't used location within the time interval.");
}
return;
}
try {
PreferenceScreen screen=preferenceManager.createPreferenceScreen(mContext);
ApplicationInfo appInfo=mPackageManager.getApplicationInfo(packageName,PackageManager.GET_META_DATA);
screen.setIcon(mPackageManager.getApplicationIcon(appInfo));
screen.setTitle(mPackageManager.getApplicationLabel(appInfo));
if (highBattery) {
screen.setSummary(R.string.location_high_battery_use);
}
 else {
screen.setSummary(R.string.location_low_battery_use);
}
container.addPreference(screen);
}
 catch (PackageManager.NameNotFoundException e) {
}
}
