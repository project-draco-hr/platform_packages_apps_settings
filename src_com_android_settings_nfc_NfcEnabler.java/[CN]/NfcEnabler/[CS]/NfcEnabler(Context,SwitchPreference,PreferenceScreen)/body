{
  mContext=context;
  mSwitch=switchPreference;
  mAndroidBeam=androidBeam;
  mNfcAdapter=NfcAdapter.getDefaultAdapter(context);
  mBeamDisallowed=((UserManager)mContext.getSystemService(Context.USER_SERVICE)).hasUserRestriction(UserManager.DISALLOW_OUTGOING_BEAM);
  if (mNfcAdapter == null) {
    mSwitch.setEnabled(false);
    mAndroidBeam.setEnabled(false);
    mIntentFilter=null;
    return;
  }
  if (mBeamDisallowed) {
    mAndroidBeam.setEnabled(false);
  }
  mIntentFilter=new IntentFilter(NfcAdapter.ACTION_ADAPTER_STATE_CHANGED);
}
