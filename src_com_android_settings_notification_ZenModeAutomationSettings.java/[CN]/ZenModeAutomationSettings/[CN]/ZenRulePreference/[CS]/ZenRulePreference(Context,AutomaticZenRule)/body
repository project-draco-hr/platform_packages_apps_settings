{
  super(context);
  mName=rule.getName();
  final boolean isSchedule=ZenModeConfig.isValidScheduleConditionId(rule.getConditionId());
  final boolean isEvent=ZenModeConfig.isValidEventConditionId(rule.getConditionId());
  final boolean isSystemRule=isSchedule || isEvent;
  try {
    ApplicationInfo info=mPm.getApplicationInfo(rule.getOwner().getPackageName(),0);
    LoadIconTask task=new LoadIconTask(this);
    task.execute(info);
    setSummary(computeRuleSummary(rule,isSystemRule,info.loadLabel(mPm)));
  }
 catch (  PackageManager.NameNotFoundException e) {
    setIcon(R.drawable.ic_label);
  }
  setTitle(rule.getName());
  setPersistent(false);
  final String action=isSchedule ? ZenModeScheduleRuleSettings.ACTION : isEvent ? ZenModeEventRuleSettings.ACTION : "";
  ServiceInfo si=mServiceListing.findService(mContext,CONFIG,rule.getOwner());
  ComponentName settingsActivity=getSettingsActivity(si);
  setIntent(getRuleIntent(action,settingsActivity,rule.getName()));
  setWidgetLayoutResource(R.layout.zen_rule_widget);
}
