{
  final PreferenceScreen root=getPreferenceScreen();
  root.removeAll();
  if (mConfig == null)   return;
  final ZenRuleInfo[] sortedRules=sortedRules();
  for (int i=0; i < sortedRules.length; i++) {
    final String id=sortedRules[i].id;
    final ZenRule rule=sortedRules[i].rule;
    root.addPreference(new ZenRulePreference(mContext,rule,id));
  }
  final Preference p=new Preference(mContext);
  p.setIcon(R.drawable.ic_add);
  p.setTitle(R.string.zen_mode_add_rule);
  p.setPersistent(false);
  p.setOnPreferenceClickListener(new OnPreferenceClickListener(){
    @Override public boolean onPreferenceClick(    Preference preference){
      MetricsLogger.action(mContext,MetricsLogger.ACTION_ZEN_ADD_RULE);
      showAddRuleDialog();
      return true;
    }
  }
);
  root.addPreference(p);
}
