{
  final PreferenceScreen root=getPreferenceScreen();
  root.removeAll();
  if (mConfig == null)   return;
  for (int i=0; i < mConfig.automaticRules.size(); i++) {
    final String id=mConfig.automaticRules.keyAt(i);
    final ZenRule rule=mConfig.automaticRules.valueAt(i);
    if (!ZenModeConfig.isValidScheduleConditionId(rule.conditionId))     continue;
    final Preference p=new Preference(mContext);
    p.setTitle(rule.name);
    p.setSummary(rule.enabled ? R.string.switch_on_text : R.string.switch_off_text);
    p.setPersistent(false);
    p.setOnPreferenceClickListener(new OnPreferenceClickListener(){
      @Override public boolean onPreferenceClick(      Preference preference){
        showRule(id,rule.name);
        return true;
      }
    }
);
    root.addPreference(p);
  }
}
