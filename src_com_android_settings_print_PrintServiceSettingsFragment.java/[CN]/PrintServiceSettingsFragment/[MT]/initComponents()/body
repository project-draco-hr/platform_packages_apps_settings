{
  mPrintersAdapter=new PrintersAdapter();
  mPrintersAdapter.registerDataSetObserver(mDataObserver);
  final SettingsActivity activity=(SettingsActivity)getActivity();
  mSwitchBar=activity.getSwitchBar();
  mToggleSwitch=mSwitchBar.getSwitch();
  mToggleSwitch.setOnBeforeCheckedChangeListener(new ToggleSwitch.OnBeforeCheckedChangeListener(){
    @Override public boolean onBeforeCheckedChanged(    ToggleSwitch toggleSwitch,    boolean checked){
      if (checked) {
        if (!TextUtils.isEmpty(mEnableWarningMessage)) {
          toggleSwitch.setCheckedInternal(false);
          getArguments().putBoolean(PrintSettingsFragment.EXTRA_CHECKED,false);
          showDialog(DIALOG_ID_ENABLE_WARNING);
          return true;
        }
        onPreferenceToggled(mPreferenceKey,true);
      }
 else {
        onPreferenceToggled(mPreferenceKey,false);
      }
      return false;
    }
  }
);
  getListView().setSelector(new ColorDrawable(Color.TRANSPARENT));
  getListView().setAdapter(mPrintersAdapter);
}
