{
  mPrintersAdapter=new PrintersAdapter();
  mPrintersAdapter.registerDataSetObserver(mDataObserver);
  mToggleSwitch=createAndAddActionBarToggleSwitch(getActivity());
  mToggleSwitch.setOnBeforeCheckedChangeListener(new OnBeforeCheckedChangeListener(){
    @Override public boolean onBeforeCheckedChanged(    ToggleSwitch toggleSwitch,    boolean checked){
      if (checked) {
        if (!TextUtils.isEmpty(mEnableWarningMessage)) {
          toggleSwitch.setCheckedInternal(false);
          getArguments().putBoolean(PrintSettingsFragment.EXTRA_CHECKED,false);
          showDialog(DIALOG_ID_ENABLE_WARNING);
          return true;
        }
        onPreferenceToggled(mPreferenceKey,true);
      }
 else {
        onPreferenceToggled(mPreferenceKey,false);
      }
      return false;
    }
  }
);
  mToggleSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      updateEmptyView();
    }
  }
);
  getListView().setSelector(new ColorDrawable(Color.TRANSPARENT));
  getListView().setAdapter(mPrintersAdapter);
}
