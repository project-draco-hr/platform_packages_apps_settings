{
  boolean result=false;
  final List<SearchIndexableData> dataToUpdate=params[0].dataToUpdate;
  final List<SearchIndexableData> dataToDelete=params[0].dataToDelete;
  final Map<String,List<String>> nonIndexableKeys=params[0].nonIndexableKeys;
  final boolean forceUpdate=params[0].forceUpdate;
  final SQLiteDatabase database=getWritableDatabase();
  final String localeStr=Locale.getDefault().toString();
  try {
    database.beginTransaction();
    if (dataToUpdate.size() > 0) {
      processDataToUpdate(database,localeStr,dataToUpdate,nonIndexableKeys,forceUpdate);
    }
    if (dataToDelete.size() > 0) {
      processDataToDelete(database,localeStr,dataToDelete);
    }
    database.setTransactionSuccessful();
    result=true;
  }
  finally {
    database.endTransaction();
  }
  return result;
}
