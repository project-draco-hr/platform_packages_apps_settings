{
  XmlResourceParser parser=null;
  try {
    parser=context.getResources().getXml(xmlResId);
    int type;
    while ((type=parser.next()) != XmlPullParser.END_DOCUMENT && type != XmlPullParser.START_TAG) {
    }
    String nodeName=parser.getName();
    if (!NODE_NAME_PREFERENCE_SCREEN.equals(nodeName)) {
      throw new RuntimeException("XML document must start with <PreferenceScreen> tag; found" + nodeName + " at "+ parser.getPositionDescription());
    }
    final int outerDepth=parser.getDepth();
    final AttributeSet attrs=Xml.asAttributeSet(parser);
    final String screenTitle=getDataTitle(context,attrs);
    String title=getDataTitle(context,attrs);
    String summary=getDataSummary(context,attrs);
    String keywords=getDataKeywords(context,attrs);
    String key=getDataKey(context,attrs);
    updateOneRowWithFilteredData(database,localeStr,title,summary,null,null,fragmentName,screenTitle,iconResId,rank,keywords,intentAction,intentTargetPackage,intentTargetClass,true,key);
    while ((type=parser.next()) != XmlPullParser.END_DOCUMENT && (type != XmlPullParser.END_TAG || parser.getDepth() > outerDepth)) {
      if (type == XmlPullParser.END_TAG || type == XmlPullParser.TEXT) {
        continue;
      }
      nodeName=parser.getName();
      title=getDataTitle(context,attrs);
      keywords=getDataKeywords(context,attrs);
      key=getDataKey(context,attrs);
      if (!nodeName.equals(NODE_NAME_CHECK_BOX_PREFERENCE)) {
        summary=getDataSummary(context,attrs);
        String entries=null;
        if (nodeName.endsWith(NODE_NAME_LIST_PREFERENCE)) {
          entries=getDataEntries(context,attrs);
        }
        updateOneRowWithFilteredData(database,localeStr,title,summary,null,entries,fragmentName,screenTitle,iconResId,rank,keywords,intentAction,intentTargetPackage,intentTargetClass,true,key);
      }
 else {
        final String summaryOn=getDataSummaryOn(context,attrs);
        final String summaryOff=getDataSummaryOff(context,attrs);
        updateOneRowWithFilteredData(database,localeStr,title,summaryOn,summaryOff,null,fragmentName,screenTitle,iconResId,rank,keywords,intentAction,intentTargetPackage,intentTargetClass,true,key);
      }
    }
  }
 catch (  XmlPullParserException e) {
    throw new RuntimeException("Error parsing PreferenceScreen",e);
  }
catch (  IOException e) {
    throw new RuntimeException("Error parsing PreferenceScreen",e);
  }
 finally {
    if (parser != null)     parser.close();
  }
}
