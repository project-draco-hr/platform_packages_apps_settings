{
  final int numSlots=mTelephonyManager.getSimCount();
  final boolean isInProvisioning=Settings.Global.getInt(mContext.getContentResolver(),Settings.Global.DEVICE_PROVISIONED,0) == 0;
  boolean notificationSent=false;
  int numSIMsDetected=0;
  int lastSIMSlotDetected=-1;
  if (numSlots < 2 || isInProvisioning) {
    return;
  }
  cancelNotification(mContext);
  mSubscriptionManager.clearDefaultsForInactiveSubIds();
  boolean dataSelected=SubscriptionManager.isUsableSubIdValue(SubscriptionManager.getDefaultDataSubId());
  boolean smsSelected=SubscriptionManager.isUsableSubIdValue(SubscriptionManager.getDefaultSmsSubId());
  if (dataSelected && smsSelected) {
    return;
  }
  List<SubscriptionInfo> sil=mSubscriptionManager.getActiveSubscriptionInfoList();
  if (sil == null || sil.size() < 1) {
    return;
  }
 else {
    createNotification(mContext);
    if (sil.size() == 1) {
      Intent intent=new Intent(mContext,SimDialogActivity.class);
      intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      intent.putExtra(SimDialogActivity.DIALOG_TYPE_KEY,SimDialogActivity.PREFERRED_PICK);
      intent.putExtra(SimDialogActivity.PREFERRED_SIM,sil.get(0).getSimSlotIndex());
      mContext.startActivity(intent);
    }
 else     if (!dataSelected) {
      Intent intent=new Intent(mContext,SimDialogActivity.class);
      intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      intent.putExtra(SimDialogActivity.DIALOG_TYPE_KEY,SimDialogActivity.DATA_PICK);
      mContext.startActivity(intent);
    }
  }
}
