{
  final TelephonyManager tm=(TelephonyManager)getActivity().getSystemService(Context.TELEPHONY_SERVICE);
  addPreferencesFromResource(R.xml.sim_settings);
  mSimCards=(PreferenceScreen)findPreference(SIM_CARD_CATEGORY);
  final int numSlots=tm.getSimCount();
  mAvailableSubInfos=new ArrayList<SubscriptionInfo>(numSlots);
  mSelectableSubInfos=new ArrayList<SubscriptionInfo>();
  for (int i=0; i < numSlots; ++i) {
    final SubscriptionInfo sir=mSubscriptionManager.getActiveSubscriptionInfoForSimSlotIndex(i);
    SimPreference simPreference=new SimPreference(getActivity(),sir,i);
    simPreference.setOrder(i - numSlots);
    mSimCards.addPreference(simPreference);
    mAvailableSubInfos.add(sir);
    if (sir != null) {
      mSelectableSubInfos.add(sir);
    }
  }
  updateActivitesCategory();
}
