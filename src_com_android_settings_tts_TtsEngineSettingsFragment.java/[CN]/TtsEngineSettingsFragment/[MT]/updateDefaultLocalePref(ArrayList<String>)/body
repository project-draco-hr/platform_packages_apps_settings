{
  String currentLocale=mEnginesHelper.getLocalePrefForEngine(getEngineName());
  CharSequence[] entries=new CharSequence[availableLangs.size()];
  CharSequence[] entryValues=new CharSequence[availableLangs.size()];
  int selectedLanguageIndex=-1;
  for (int i=0; i < availableLangs.size(); i++) {
    String[] langCountryVariant=availableLangs.get(i).split("-");
    Locale loc=null;
    if (langCountryVariant.length == 1) {
      loc=new Locale(langCountryVariant[0]);
    }
 else     if (langCountryVariant.length == 2) {
      loc=new Locale(langCountryVariant[0],langCountryVariant[1]);
    }
 else     if (langCountryVariant.length == 3) {
      loc=new Locale(langCountryVariant[0],langCountryVariant[1],langCountryVariant[2]);
    }
    if (loc != null) {
      entries[i]=loc.getDisplayName();
      entryValues[i]=availableLangs.get(i);
      if (availableLangs.get(i).equalsIgnoreCase(currentLocale)) {
        selectedLanguageIndex=i;
      }
    }
  }
  mLocalePreference.setEntries(entries);
  mLocalePreference.setEntryValues(entryValues);
  if (selectedLanguageIndex > -1) {
    mLocalePreference.setValueIndex(selectedLanguageIndex);
  }
 else {
    mLocalePreference.setValueIndex(0);
    mEnginesHelper.updateLocalePrefForEngine(getEngineName(),availableLangs.get(0));
  }
}
