{
  int selectedLocaleIndex=-1;
  for (int i=0; i < mLocalePreference.getEntryValues().length; i++) {
    if (locale.equalsIgnoreCase(mLocalePreference.getEntryValues()[i].toString())) {
      selectedLocaleIndex=i;
      break;
    }
  }
  if (selectedLocaleIndex == -1) {
    Log.w(TAG,"updateLanguageTo called with unknown locale argument");
    return;
  }
  mLocalePreference.setSummary(mLocalePreference.getEntries()[selectedLocaleIndex]);
  mSelectedLocaleIndex=selectedLocaleIndex;
  mEnginesHelper.updateLocalePrefForEngine(getEngineName(),locale);
  if (getEngineName().equals(mTts.getCurrentEngine())) {
    if (!locale.isEmpty()) {
      String[] localeArray=TtsEngines.parseLocalePref(locale);
      if (localeArray != null) {
        mTts.setLanguage(new Locale(localeArray[0],localeArray[1],localeArray[2]));
      }
    }
 else {
      mTts.setLanguage(Locale.getDefault());
    }
  }
}
