{
  final Intent voiceDataDetails=getArguments().getParcelable(TtsEnginePreference.FRAGMENT_ARGS_VOICES);
  if (DBG)   Log.d(TAG,"Parsing voice data details, data: " + voiceDataDetails.toUri(0));
  final ArrayList<String> available=voiceDataDetails.getStringArrayListExtra(TextToSpeech.Engine.EXTRA_AVAILABLE_VOICES);
  final ArrayList<String> unavailable=voiceDataDetails.getStringArrayListExtra(TextToSpeech.Engine.EXTRA_UNAVAILABLE_VOICES);
  if (available == null) {
    Log.e(TAG,"TTS data check failed (available == null).");
    final CharSequence[] empty=new CharSequence[0];
    mLocalePreference.setEntries(empty);
    mLocalePreference.setEntryValues(empty);
    return;
  }
  if (unavailable != null && unavailable.size() > 0) {
    mInstallVoicesPreference.setEnabled(true);
    getPreferenceScreen().addPreference(mInstallVoicesPreference);
  }
 else {
    getPreferenceScreen().removePreference(mInstallVoicesPreference);
  }
  if (available.size() > 0) {
    updateDefaultLocalePref(available);
  }
 else {
    final CharSequence[] empty=new CharSequence[0];
    mLocalePreference.setEntries(empty);
    mLocalePreference.setEntryValues(empty);
  }
}
