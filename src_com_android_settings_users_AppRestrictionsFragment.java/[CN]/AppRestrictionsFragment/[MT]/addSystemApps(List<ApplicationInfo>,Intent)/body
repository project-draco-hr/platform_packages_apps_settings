{
  final PackageManager pm=getActivity().getPackageManager();
  List<ResolveInfo> launchableApps=pm.queryIntentActivities(intent,0);
  for (  ResolveInfo app : launchableApps) {
    if (app.activityInfo != null && app.activityInfo.applicationInfo != null) {
      int flags=app.activityInfo.applicationInfo.flags;
      if ((flags & ApplicationInfo.FLAG_SYSTEM) != 0 || (flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) != 0) {
        visibleApps.add(app.activityInfo.applicationInfo);
      }
    }
  }
}
