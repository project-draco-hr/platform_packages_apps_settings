{
  if (preference.getKey().startsWith(PKG_PREFIX)) {
    if (preference.mPanelOpen) {
      for (      Preference p : preference.mChildren) {
        mAppList.removePreference(p);
      }
      preference.mChildren.clear();
    }
 else {
      String packageName=preference.getKey().substring(PKG_PREFIX.length());
      if (packageName.equals(getActivity().getPackageName())) {
        ArrayList<RestrictionEntry> restrictions=RestrictionUtils.getRestrictions(getActivity(),mUser);
        onRestrictionsReceived(preference,packageName,restrictions);
      }
 else {
        requestRestrictionsForApp(packageName,preference);
      }
    }
    preference.mPanelOpen=!preference.mPanelOpen;
  }
}
