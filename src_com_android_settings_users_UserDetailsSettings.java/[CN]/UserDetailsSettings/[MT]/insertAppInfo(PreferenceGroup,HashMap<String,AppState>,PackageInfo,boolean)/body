{
  if (info != null) {
    String pkgName=info.packageName;
    String name=info.applicationInfo.loadLabel(mPm).toString();
    Drawable icon=info.applicationInfo.loadIcon(mPm);
    AppState appState=appStateMap.get(info.packageName);
    boolean enabled=appState == null ? defaultState : appState.enabled;
    CheckBoxPreference appPref=new CheckBoxPreference(getActivity());
    appPref.setTitle(name != null ? name : pkgName);
    appPref.setIcon(icon);
    appPref.setChecked(enabled);
    appPref.setKey(pkgName);
    appPref.setPersistent(false);
    appPref.setOnPreferenceChangeListener(this);
    group.addPreference(appPref);
  }
}
