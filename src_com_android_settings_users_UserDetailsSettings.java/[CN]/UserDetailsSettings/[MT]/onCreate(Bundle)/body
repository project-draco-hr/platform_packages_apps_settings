{
  super.onCreate(icicle);
  addPreferencesFromResource(R.xml.user_details);
  Bundle args=getArguments();
  mNewUser=args == null || args.getInt(EXTRA_USER_ID,-1) == -1;
  mUserId=mNewUser ? -1 : args.getInt(EXTRA_USER_ID,-1);
  mIPm=IPackageManager.Stub.asInterface(ServiceManager.getService("package"));
  mUm=(UserManager)getActivity().getSystemService(Context.USER_SERVICE);
  if (mUserId == -1) {
    mUserId=mUm.createUser(getString(R.string.user_new_user_name),0).id;
  }
  mNamePref=(EditTextPreference)findPreference(KEY_USER_NAME);
  mNamePref.setOnPreferenceChangeListener(this);
  mPicturePref=findPreference(KEY_USER_PICTURE);
  mPicturePref.setOnPreferenceClickListener(this);
  setHasOptionsMenu(true);
}
