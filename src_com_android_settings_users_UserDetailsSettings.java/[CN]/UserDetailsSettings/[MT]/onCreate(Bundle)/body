{
  super.onCreate(icicle);
  addPreferencesFromResource(R.xml.user_details);
  Bundle args=getArguments();
  mNewUser=args == null || args.getInt(EXTRA_USER_ID,-1) == -1;
  mUserId=mNewUser ? -1 : args.getInt(EXTRA_USER_ID,-1);
  mIPm=IPackageManager.Stub.asInterface(ServiceManager.getService("package"));
  if (mUserId == -1) {
    try {
      mUserId=mIPm.createUser(getString(R.string.user_new_user_name),0).id;
    }
 catch (    RemoteException re) {
    }
  }
  mSystemAppGroup=(PreferenceGroup)findPreference(KEY_SYSTEM_APPS);
  mInstalledAppGroup=(PreferenceGroup)findPreference(KEY_INSTALLED_APPS);
  mNamePref=(EditTextPreference)findPreference(KEY_USER_NAME);
  mNamePref.setOnPreferenceChangeListener(this);
  mPicturePref=findPreference(KEY_USER_PICTURE);
  mPicturePref.setOnPreferenceClickListener(this);
  mAccountPref=findPreference(KEY_ACCOUNT);
  mAccountPref.setOnPreferenceClickListener(this);
  if (mUserId == 0) {
    getPreferenceScreen().removePreference(mSystemAppGroup);
    getPreferenceScreen().removePreference(mInstalledAppGroup);
    getPreferenceScreen().removePreference(findPreference(KEY_RESTRICTIONS));
  }
  setHasOptionsMenu(true);
}
