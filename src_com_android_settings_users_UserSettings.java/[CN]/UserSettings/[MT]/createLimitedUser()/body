{
  UserInfo newUserInfo=mUserManager.createUser(getResources().getString(R.string.user_new_profile_name),UserInfo.FLAG_RESTRICTED);
  int userId=newUserInfo.id;
  UserHandle user=new UserHandle(userId);
  mUserManager.setUserRestriction(UserManager.DISALLOW_MODIFY_ACCOUNTS,true,user);
  mUserManager.setUserRestriction(UserManager.DISALLOW_SHARE_LOCATION,true,user);
  Secure.putStringForUser(getContentResolver(),Secure.LOCATION_PROVIDERS_ALLOWED,"",userId);
  Bitmap bitmap=BitmapFactory.decodeResource(getResources(),UserSettings.USER_DRAWABLES[userId % UserSettings.USER_DRAWABLES.length]);
  mUserManager.setUserIcon(userId,bitmap);
  AccountManager am=AccountManager.get(getActivity());
  Account[] accounts=am.getAccounts();
  if (accounts != null) {
    for (    Account account : accounts) {
      am.addSharedAccount(account,user);
    }
  }
  return newUserInfo;
}
