{
  super.onCreate(icicle);
  mUserManager=(UserManager)getActivity().getSystemService(Context.USER_SERVICE);
  addPreferencesFromResource(R.xml.user_settings);
  mUserListCategory=(PreferenceGroup)findPreference(KEY_USER_LIST);
  mMePreference=(Preference)findPreference(KEY_USER_ME);
  mMePreference.setOnPreferenceClickListener(this);
  if (UserHandle.myUserId() != UserHandle.USER_OWNER) {
    mMePreference.setSummary(null);
  }
  mNicknamePreference=(EditTextPreference)findPreference(KEY_USER_NICKNAME);
  mNicknamePreference.setOnPreferenceChangeListener(this);
  mNicknamePreference.getEditText().setInputType(InputType.TYPE_TEXT_VARIATION_NORMAL | InputType.TYPE_TEXT_FLAG_CAP_WORDS);
  loadProfile();
  setHasOptionsMenu(true);
  getActivity().registerReceiver(mUserChangeReceiver,new IntentFilter(Intent.ACTION_USER_REMOVED));
}
