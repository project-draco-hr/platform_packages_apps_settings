{
  if (!editing) {
    return mUsername.getText().length() != 0 && mPassword.getText().length() != 0;
  }
  if (mName.getText().length() == 0 || mServer.getText().length() == 0) {
    return false;
  }
switch (mType.getSelectedItemPosition()) {
case VpnProfile.TYPE_PPTP:
    return true;
case VpnProfile.TYPE_L2TP_IPSEC_PSK:
case VpnProfile.TYPE_IPSEC_XAUTH_PSK:
  return mIpsecSecret.getText().length() != 0;
case VpnProfile.TYPE_L2TP_IPSEC_RSA:
case VpnProfile.TYPE_IPSEC_XAUTH_RSA:
case VpnProfile.TYPE_IPSEC_HYBRID_RSA:
return mIpsecUserCert.getSelectedItemPosition() != 0;
}
return false;
}
