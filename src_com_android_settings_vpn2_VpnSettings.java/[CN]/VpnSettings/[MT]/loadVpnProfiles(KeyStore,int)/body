{
  final ArrayList<VpnProfile> result=Lists.newArrayList();
  if (!keyStore.isUnlocked()) {
    return result;
  }
  for (  String key : keyStore.saw(Credentials.VPN)) {
    final VpnProfile profile=VpnProfile.decode(key,keyStore.get(Credentials.VPN + key));
    if (profile != null && !ArrayUtils.contains(excludeTypes,profile.type)) {
      result.add(profile);
    }
  }
  return result;
}
