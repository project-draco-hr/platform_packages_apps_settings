{
  final ConditionVariable cv=new ConditionVariable();
  cv.close();
  ServiceConnection c=new ServiceConnection(){
    public synchronized void onServiceConnected(    ComponentName className,    IBinder service){
      cv.open();
      try {
        IVpnService.Stub.asInterface(service).checkStatus(mProfile);
      }
 catch (      RemoteException e) {
        Log.e(TAG,"checkStatus()",e);
        broadcastConnectivity(VpnState.IDLE);
      }
 finally {
        mContext.unbindService(this);
      }
    }
    public void onServiceDisconnected(    ComponentName className){
      cv.open();
      broadcastConnectivity(VpnState.IDLE);
      mContext.unbindService(this);
    }
  }
;
  if (bindService(c)) {
    if (!cv.block(1000))     broadcastConnectivity(VpnState.IDLE);
  }
}
