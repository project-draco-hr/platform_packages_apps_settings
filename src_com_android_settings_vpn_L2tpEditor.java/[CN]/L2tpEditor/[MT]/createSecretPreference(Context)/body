{
  final L2tpProfile profile=(L2tpProfile)getProfile();
  CheckBoxPreference secret=mSecret=new CheckBoxPreference(c);
  boolean enabled=profile.isSecretEnabled();
  setCheckBoxTitle(secret,R.string.vpn_l2tp_secret);
  secret.setChecked(enabled);
  setSecretSummary(secret,enabled);
  secret.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener(){
    public boolean onPreferenceChange(    Preference pref,    Object newValue){
      boolean enabled=(Boolean)newValue;
      profile.setSecretEnabled(enabled);
      mSecretHandler.getPreference().setEnabled(enabled);
      setSecretSummary(mSecret,enabled);
      return true;
    }
  }
);
  return secret;
}
