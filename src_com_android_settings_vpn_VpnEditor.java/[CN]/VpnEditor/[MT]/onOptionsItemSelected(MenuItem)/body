{
switch (item.getItemId()) {
case MENU_SAVE:
    Intent resultIntent=validateAndGetResult();
  if (resultIntent != null) {
    PreferenceActivity activity=(PreferenceActivity)getActivity();
    if (!mVpnManager.isIdle()) {
      Toast.makeText(activity,R.string.service_busy,Toast.LENGTH_SHORT).show();
    }
 else {
      activity.finishPreferencePanel(this,Activity.RESULT_OK,resultIntent);
    }
  }
return true;
case MENU_CANCEL:
if (profileChanged()) {
showDialog(CONFIRM_DIALOG_ID);
}
 else {
finishFragment();
}
return true;
}
return super.onOptionsItemSelected(item);
}
