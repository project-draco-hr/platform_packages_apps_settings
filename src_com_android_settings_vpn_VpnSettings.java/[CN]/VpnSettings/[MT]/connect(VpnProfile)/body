{
  if (needKeyStoreToConnect(p)) {
    Runnable action=new Runnable(){
      public void run(){
        connect(p);
      }
    }
;
    if (!unlockKeyStore(p,action))     return;
  }
  if (!checkSecrets(p))   return;
  changeState(p,VpnState.CONNECTING);
  if (mConnectingActor.isConnectDialogNeeded()) {
    showDialog(DIALOG_CONNECT);
  }
 else {
    mConnectingActor.connect(null);
  }
}
