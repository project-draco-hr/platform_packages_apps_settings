{
  setOnCancelListener(new DialogInterface.OnCancelListener(){
    public void onCancel(    DialogInterface dialog){
      if (mActiveProfile != null) {
        changeState(mActiveProfile,VpnState.IDLE);
      }
      onIdle();
    }
  }
);
switch (id) {
case DIALOG_CONNECT:
    mConnectDialogShowing=true;
  setOnDismissListener(new DialogInterface.OnDismissListener(){
    public void onDismiss(    DialogInterface dialog){
      mConnectDialogShowing=false;
    }
  }
);
return createConnectDialog();
case DIALOG_SECRET_NOT_SET:
return createSecretNotSetDialog();
case VpnManager.VPN_ERROR_CHALLENGE:
case VpnManager.VPN_ERROR_UNKNOWN_SERVER:
case VpnManager.VPN_ERROR_PPP_NEGOTIATION_FAILED:
return createEditDialog(id);
default :
Log.d(TAG,"create reconnect dialog for event " + id);
return createReconnectDialog(id);
}
}
