{
  super.onResume();
  if (DEBUG)   Log.d(TAG,"onResume");
  mVpnManager.registerConnectivityReceiver(mConnectivityReceiver);
  if ((mUnlockAction != null) && isKeyStoreUnlocked()) {
    Runnable action=mUnlockAction;
    mUnlockAction=null;
    getActivity().runOnUiThread(action);
  }
  if (mConnectDialog == null || !mConnectDialog.isShowing()) {
    checkVpnConnectionStatus();
  }
 else {
    if (!mVpnManager.isIdle())     removeConnectDialog();
  }
}
