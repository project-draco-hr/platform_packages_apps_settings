{
  WifiDisplayPreference p=new WifiDisplayPreference(getActivity(),d);
  if (d.equals(mWifiDisplayStatus.getActiveDisplay())) {
switch (mWifiDisplayStatus.getActiveDisplayState()) {
case WifiDisplayStatus.DISPLAY_STATE_CONNECTED:
      p.setSummary(R.string.wifi_display_status_connected);
    break;
case WifiDisplayStatus.DISPLAY_STATE_CONNECTING:
  p.setSummary(R.string.wifi_display_status_connecting);
break;
}
}
 else if (d.isAvailable()) {
if (!d.canConnect()) {
p.setSummary(R.string.wifi_display_status_in_use);
p.setEnabled(false);
}
 else if (d.isRemembered()) {
p.setSummary(R.string.wifi_display_status_available);
}
}
if (d.isRemembered()) {
p.setWidgetLayoutResource(R.layout.wifi_display_preference);
}
return p;
}
