{
  super.onActivityCreated(savedInstanceState);
  Activity activity=getActivity();
  mActionBarSwitch=new Switch(activity);
  mActionBarSwitch.setOnCheckedChangeListener(mSwitchOnCheckedChangedListener);
  final int padding=activity.getResources().getDimensionPixelSize(R.dimen.action_bar_switch_padding);
  mActionBarSwitch.setPadding(0,0,padding,0);
  activity.getActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,ActionBar.DISPLAY_SHOW_CUSTOM);
  activity.getActionBar().setCustomView(mActionBarSwitch,new ActionBar.LayoutParams(ActionBar.LayoutParams.WRAP_CONTENT,ActionBar.LayoutParams.WRAP_CONTENT,Gravity.CENTER_VERTICAL | Gravity.END));
  mEmptyView=(TextView)getView().findViewById(android.R.id.empty);
  getListView().setEmptyView(mEmptyView);
  update();
  if (mWifiDisplayStatus.getFeatureState() == WifiDisplayStatus.FEATURE_STATE_UNAVAILABLE) {
    activity.finish();
  }
}
