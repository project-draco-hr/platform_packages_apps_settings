{
  final boolean changed=mHoriz.setBounds(visibleStart,visibleEnd);
  mGrid.setBounds(visibleStart,visibleEnd);
  mSeries.setBounds(visibleStart,visibleEnd);
  mDetailSeries.setBounds(visibleStart,visibleEnd);
  final long historyStart=getHistoryStart();
  final long historyEnd=getHistoryEnd();
  final long validStart=historyStart == Long.MAX_VALUE ? visibleStart : Math.max(visibleStart,historyStart);
  final long validEnd=historyEnd == Long.MIN_VALUE ? visibleEnd : Math.min(visibleEnd,historyEnd);
  if (LIMIT_SWEEPS_TO_VALID_DATA) {
    mSweepLeft.setValidRange(validStart,validEnd);
    mSweepRight.setValidRange(validStart,validEnd);
  }
 else {
    mSweepLeft.setValidRange(visibleStart,visibleEnd);
    mSweepRight.setValidRange(visibleStart,visibleEnd);
  }
  final long halfRange=(visibleEnd + visibleStart) / 2;
  final long sweepMax=validEnd;
  final long sweepMin=Math.max(visibleStart,(sweepMax - DateUtils.WEEK_IN_MILLIS));
  mSweepLeft.setValue(sweepMin);
  mSweepRight.setValue(sweepMax);
  requestLayout();
  if (changed) {
    mSeries.invalidatePath();
    mDetailSeries.invalidatePath();
  }
  updateVertAxisBounds(null);
  updateEstimateVisible();
  updatePrimaryRange();
}
