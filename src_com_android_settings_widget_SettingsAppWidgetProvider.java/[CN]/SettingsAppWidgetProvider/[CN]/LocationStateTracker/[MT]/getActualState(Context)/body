{
  ContentResolver resolver=context.getContentResolver();
  int currentLocationMode=Settings.Secure.getLocationMode(resolver);
switch (currentLocationMode) {
case Settings.Secure.LOCATION_MODE_BATTERY_SAVING:
case Settings.Secure.LOCATION_MODE_OFF:
    return STATE_DISABLED;
}
return STATE_ENABLED;
}
