{
  int i;
  String value;
  for (i=AccessPointState.IDENTITY; i <= AccessPointState.ANONYMOUS_IDENTITY; i++) {
    value=mEnterpriseTextFields[i].getText().toString();
    if (!TextUtils.isEmpty(value)) {
      mState.setEnterpriseField(i,value);
    }
  }
  Spinner spinner=mClientCertSpinner;
  int index=spinner.getSelectedItemPosition();
  if (index != (spinner.getCount() - 1)) {
    String key=(String)spinner.getSelectedItem();
    value=mCertTool.getUserCertificate(key);
    if (!TextUtils.isEmpty(value)) {
      mState.setEnterpriseField(AccessPointState.CLIENT_CERT,BLOB_HEADER + value);
    }
    value=mCertTool.getUserPrivateKey(key);
    if (!TextUtils.isEmpty(value)) {
      mState.setEnterpriseField(AccessPointState.PRIVATE_KEY,BLOB_HEADER + value);
    }
  }
  spinner=mCaCertSpinner;
  index=spinner.getSelectedItemPosition();
  if (index != (spinner.getCount() - 1)) {
    String key=(String)spinner.getSelectedItem();
    value=mCertTool.getCaCertificate(key);
    if (!TextUtils.isEmpty(value)) {
      mState.setEnterpriseField(AccessPointState.CA_CERT,BLOB_HEADER + value);
    }
  }
  mState.setSecurity(AccessPointState.EAP);
  mState.setEap(mEapSpinner.getSelectedItemPosition());
  mState.setPhase2((String)mPhase2Spinner.getSelectedItem());
}
