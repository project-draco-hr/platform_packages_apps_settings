{
  CheckBoxPreference notifyOpenNetworks=(CheckBoxPreference)findPreference(KEY_NOTIFY_OPEN_NETWORKS);
  notifyOpenNetworks.setChecked(Secure.getInt(getContentResolver(),Secure.WIFI_NETWORKS_AVAILABLE_NOTIFICATION_ON,0) == 1);
  notifyOpenNetworks.setEnabled(mWifiManager.isWifiEnabled());
  CheckBoxPreference watchdogEnabled=(CheckBoxPreference)findPreference(KEY_ENABLE_WIFI_WATCHDOG);
  if (watchdogEnabled != null) {
    watchdogEnabled.setChecked(Secure.getInt(getContentResolver(),Secure.WIFI_WATCHDOG_ON,1) == 1);
    getPreferenceScreen().removePreference(watchdogEnabled);
  }
  ListPreference frequencyPref=(ListPreference)findPreference(KEY_FREQUENCY_BAND);
  if (mWifiManager.isDualBandSupported()) {
    frequencyPref.setOnPreferenceChangeListener(this);
    int value=mWifiManager.getFrequencyBand();
    if (value != -1) {
      frequencyPref.setValue(String.valueOf(value));
    }
 else {
      Log.e(TAG,"Failed to fetch frequency band");
    }
  }
 else {
    if (frequencyPref != null) {
      getPreferenceScreen().removePreference(frequencyPref);
    }
  }
  ListPreference sleepPolicyPref=(ListPreference)findPreference(KEY_SLEEP_POLICY);
  if (sleepPolicyPref != null) {
    if (Utils.isWifiOnly(getActivity())) {
      sleepPolicyPref.setEntries(R.array.wifi_sleep_policy_entries_wifi_only);
    }
    sleepPolicyPref.setOnPreferenceChangeListener(this);
    int value=Settings.System.getInt(getContentResolver(),Settings.System.WIFI_SLEEP_POLICY,Settings.System.WIFI_SLEEP_POLICY_NEVER);
    String stringValue=String.valueOf(value);
    sleepPolicyPref.setValue(stringValue);
    updateSleepPolicySummary(sleepPolicyPref,stringValue);
  }
}
