{
  if (state == DetailedState.CONNECTED && isEphemeral && ssid == null) {
    return context.getString(R.string.connected_via_wfa);
  }
  String[] formats=context.getResources().getStringArray((ssid == null) ? R.array.wifi_status : R.array.wifi_status_with_ssid);
  int index=state.ordinal();
  if (index >= formats.length || formats[index].length() == 0) {
    return null;
  }
  return String.format(formats[index],ssid);
}
