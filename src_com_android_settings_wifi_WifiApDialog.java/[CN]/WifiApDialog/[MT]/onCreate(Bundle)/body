{
  mView=getLayoutInflater().inflate(R.layout.wifi_ap_dialog,null);
  Spinner mSecurity=((Spinner)mView.findViewById(R.id.security));
  setView(mView);
  setInverseBackgroundForced(true);
  Context context=getContext();
  setTitle(R.string.wifi_tether_configure_ap_text);
  mView.findViewById(R.id.type).setVisibility(View.VISIBLE);
  mSsid=(TextView)mView.findViewById(R.id.ssid);
  mPassword=(EditText)mView.findViewById(R.id.password);
  setButton(BUTTON_SUBMIT,context.getString(R.string.wifi_save),mListener);
  setButton(DialogInterface.BUTTON_NEGATIVE,context.getString(R.string.wifi_cancel),mListener);
  if (mWifiConfig != null) {
    mSsid.setText(mWifiConfig.SSID);
    mSecurity.setSelection(mSecurityTypeIndex);
    if (mSecurityTypeIndex == WPA2_INDEX) {
      mPassword.setText(mWifiConfig.preSharedKey);
    }
  }
  mSsid.addTextChangedListener(this);
  mPassword.addTextChangedListener(this);
  ((CheckBox)mView.findViewById(R.id.show_password)).setOnClickListener(this);
  mSecurity.setOnItemSelectedListener(this);
  super.onCreate(savedInstanceState);
  showSecurityFields();
  validate();
}
