{
  WifiConfiguration config=null;
  mView.findViewById(R.id.ip_fields).setVisibility(View.VISIBLE);
  if (mAccessPoint != null && mAccessPoint.networkId != INVALID_NETWORK_ID) {
    config=mAccessPoint.getConfig();
  }
  if (mIpSettingsSpinner.getSelectedItemPosition() == STATIC_IP) {
    mView.findViewById(R.id.staticip).setVisibility(View.VISIBLE);
    if (mIpAddressView == null) {
      mIpAddressView=(TextView)mView.findViewById(R.id.ipaddress);
      mGatewayView=(TextView)mView.findViewById(R.id.gateway);
      mNetworkPrefixLengthView=(TextView)mView.findViewById(R.id.network_prefix_length);
      mDns1View=(TextView)mView.findViewById(R.id.dns1);
      mDns2View=(TextView)mView.findViewById(R.id.dns2);
    }
    if (config != null) {
      LinkProperties linkProperties=config.linkProperties;
      Iterator<LinkAddress> iterator=linkProperties.getLinkAddresses().iterator();
      if (iterator.hasNext()) {
        LinkAddress linkAddress=iterator.next();
        mIpAddressView.setText(linkAddress.getAddress().getHostAddress());
        mNetworkPrefixLengthView.setText(Integer.toString(linkAddress.getNetworkPrefixLength()));
      }
      Iterator<InetAddress> gateways=linkProperties.getGateways().iterator();
      if (gateways.hasNext()) {
        mGatewayView.setText(gateways.next().getHostAddress());
      }
      Iterator<InetAddress> dnsIterator=linkProperties.getDnses().iterator();
      if (dnsIterator.hasNext()) {
        mDns1View.setText(dnsIterator.next().getHostAddress());
      }
      if (dnsIterator.hasNext()) {
        mDns2View.setText(dnsIterator.next().getHostAddress());
      }
    }
  }
 else {
    mView.findViewById(R.id.staticip).setVisibility(View.GONE);
  }
}
