{
  WifiConfiguration config=null;
  mView.findViewById(R.id.ip_fields).setVisibility(View.VISIBLE);
  if (mAccessPoint != null && mAccessPoint.networkId != INVALID_NETWORK_ID) {
    config=mAccessPoint.getConfig();
  }
  if (mIpSettingsSpinner.getSelectedItemPosition() == STATIC_IP) {
    mView.findViewById(R.id.staticip).setVisibility(View.VISIBLE);
    if (mIpAddressView == null) {
      mIpAddressView=(TextView)mView.findViewById(R.id.ipaddress);
      mIpAddressView.addTextChangedListener(this);
      mGatewayView=(TextView)mView.findViewById(R.id.gateway);
      mGatewayView.addTextChangedListener(this);
      mNetworkPrefixLengthView=(TextView)mView.findViewById(R.id.network_prefix_length);
      mNetworkPrefixLengthView.addTextChangedListener(this);
      mDns1View=(TextView)mView.findViewById(R.id.dns1);
      mDns1View.addTextChangedListener(this);
      mDns2View=(TextView)mView.findViewById(R.id.dns2);
      mDns2View.addTextChangedListener(this);
    }
    if (config != null) {
      LinkProperties linkProperties=config.getLinkProperties();
      Iterator<LinkAddress> iterator=linkProperties.getLinkAddresses().iterator();
      if (iterator.hasNext()) {
        LinkAddress linkAddress=iterator.next();
        mIpAddressView.setText(linkAddress.getAddress().getHostAddress());
        mNetworkPrefixLengthView.setText(Integer.toString(linkAddress.getNetworkPrefixLength()));
      }
      for (      RouteInfo route : linkProperties.getRoutes()) {
        if (route.isDefaultRoute()) {
          mGatewayView.setText(route.getGateway().getHostAddress());
          break;
        }
      }
      Iterator<InetAddress> dnsIterator=linkProperties.getDnses().iterator();
      if (dnsIterator.hasNext()) {
        mDns1View.setText(dnsIterator.next().getHostAddress());
      }
      if (dnsIterator.hasNext()) {
        mDns2View.setText(dnsIterator.next().getHostAddress());
      }
    }
  }
 else {
    mView.findViewById(R.id.staticip).setVisibility(View.GONE);
  }
}
