{
  if (LOCAL_LOGD) {
    Log.d(TAG,"Received wifi state changed from " + getHumanReadableWifiState(previousWifiState) + " to "+ getHumanReadableWifiState(wifiState));
  }
  if (wifiState == WIFI_STATE_DISABLED || wifiState == WIFI_STATE_ENABLED) {
    mWifiCheckBoxPref.setChecked(wifiState == WIFI_STATE_ENABLED);
    mWifiCheckBoxPref.setSummary(wifiState == WIFI_STATE_DISABLED ? mOriginalSummary : null);
    mWifiCheckBoxPref.setEnabled(isEnabledByDependency());
  }
 else   if (wifiState == WIFI_STATE_DISABLING || wifiState == WIFI_STATE_ENABLING) {
    mWifiCheckBoxPref.setSummary(wifiState == WIFI_STATE_ENABLING ? R.string.wifi_starting : R.string.wifi_stopping);
  }
 else   if (wifiState == WIFI_STATE_UNKNOWN) {
    int message=R.string.wifi_error;
    if (previousWifiState == WIFI_STATE_ENABLING)     message=R.string.error_starting;
 else     if (previousWifiState == WIFI_STATE_DISABLING)     message=R.string.error_stopping;
    mWifiCheckBoxPref.setChecked(false);
    mWifiCheckBoxPref.setSummary(message);
    mWifiCheckBoxPref.setEnabled(true);
  }
}
