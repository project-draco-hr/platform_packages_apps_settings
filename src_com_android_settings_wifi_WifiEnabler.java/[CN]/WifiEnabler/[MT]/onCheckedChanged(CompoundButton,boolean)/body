{
  if (mStateMachineEvent) {
    return;
  }
  if (isChecked && !WirelessSettings.isRadioAllowed(mContext,Settings.Global.RADIO_WIFI)) {
    Toast.makeText(mContext,R.string.wifi_in_airplane_mode,Toast.LENGTH_SHORT).show();
    buttonView.setChecked(false);
  }
  int wifiApState=mWifiManager.getWifiApState();
  if (isChecked && ((wifiApState == WifiManager.WIFI_AP_STATE_ENABLING) || (wifiApState == WifiManager.WIFI_AP_STATE_ENABLED))) {
    mWifiManager.setWifiApEnabled(null,false);
  }
  if (mWifiManager.setWifiEnabled(isChecked)) {
    mSwitch.setEnabled(false);
  }
 else {
    Toast.makeText(mContext,R.string.wifi_error,Toast.LENGTH_SHORT).show();
  }
}
