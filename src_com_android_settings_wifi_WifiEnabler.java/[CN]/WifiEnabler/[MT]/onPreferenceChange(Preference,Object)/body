{
  boolean enable=(Boolean)value;
  if (enable && !WirelessSettings.isRadioAllowed(mContext,Settings.System.RADIO_WIFI)) {
    Toast.makeText(mContext,R.string.wifi_in_airplane_mode,Toast.LENGTH_SHORT).show();
    return false;
  }
  int wifiApState=mWifiManager.getWifiApState();
  if (enable && ((wifiApState == WifiManager.WIFI_AP_STATE_ENABLING) || (wifiApState == WifiManager.WIFI_AP_STATE_ENABLED))) {
    mWifiManager.setWifiApEnabled(null,false);
  }
  if (mWifiManager.setWifiEnabled(enable)) {
    mCheckBox.setEnabled(false);
  }
 else {
    mCheckBox.setSummary(R.string.wifi_error);
  }
  return false;
}
