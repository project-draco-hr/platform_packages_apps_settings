{
  final WifiInfo wifiInfo=mWifiManager.getConnectionInfo();
  if (detailedState == null) {
    detailedState=WifiInfo.getDetailedStateOf(wifiInfo.getSupplicantState());
  }
  if (ap == null && WifiStatus.isLiveConnection(detailedState)) {
    ap=findApLocked(wifiInfo.getNetworkId(),wifiInfo.getBSSID(),wifiInfo.getSSID(),null);
  }
  if (ap != null) {
    ap.blockRefresh();
    ap.updateFromWifiInfo(wifiInfo,detailedState);
    ap.setStatus(detailedState);
    ap.unblockRefresh();
  }
}
