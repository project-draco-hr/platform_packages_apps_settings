{
  String action=intent.getAction();
  if (WifiManager.WIFI_STATE_CHANGED_ACTION.equals(action)) {
    updateWifiState(intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE,WifiManager.WIFI_STATE_UNKNOWN));
  }
 else   if (WifiManager.SCAN_RESULTS_AVAILABLE_ACTION.equals(action) || WifiManager.CONFIGURED_NETWORKS_CHANGED_ACTION.equals(action) || WifiManager.LINK_CONFIGURATION_CHANGED_ACTION.equals(action)) {
    updateAccessPoints();
  }
 else   if (WifiManager.SUPPLICANT_STATE_CHANGED_ACTION.equals(action)) {
    SupplicantState state=(SupplicantState)intent.getParcelableExtra(WifiManager.EXTRA_NEW_STATE);
    if (!mConnected.get() && SupplicantState.isHandshakeState(state)) {
      updateConnectionState(WifiInfo.getDetailedStateOf(state));
    }
  }
 else   if (WifiManager.NETWORK_STATE_CHANGED_ACTION.equals(action)) {
    NetworkInfo info=(NetworkInfo)intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
    mConnected.set(info.isConnected());
    changeNextButtonState(info.isConnected());
    updateAccessPoints();
    updateConnectionState(info.getDetailedState());
    if (mAutoFinishOnConnection && info.isConnected()) {
      Activity activity=getActivity();
      if (activity != null) {
        activity.finish();
      }
      return;
    }
  }
 else   if (WifiManager.RSSI_CHANGED_ACTION.equals(action)) {
    updateConnectionState(null);
  }
}
