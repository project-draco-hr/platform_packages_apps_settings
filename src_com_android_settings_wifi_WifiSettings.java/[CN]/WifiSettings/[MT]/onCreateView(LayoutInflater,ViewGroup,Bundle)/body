{
  if (mSetupWizardMode) {
    View view=inflater.inflate(R.layout.setup_preference,container,false);
    View other=view.findViewById(R.id.other_network);
    other.setOnClickListener(new OnClickListener(){
      @Override public void onClick(      View v){
        if (mWifiManager.isWifiEnabled()) {
          onAddNetworkPressed();
        }
      }
    }
);
    final ImageButton b=(ImageButton)view.findViewById(R.id.more);
    if (b != null) {
      b.setOnClickListener(new OnClickListener(){
        @Override public void onClick(        View v){
          if (mWifiManager.isWifiEnabled()) {
            PopupMenu pm=new PopupMenu(inflater.getContext(),b);
            pm.inflate(R.menu.wifi_setup);
            pm.setOnMenuItemClickListener(new OnMenuItemClickListener(){
              @Override public boolean onMenuItemClick(              MenuItem item){
                if (R.id.wifi_wps == item.getItemId()) {
                  showDialog(WPS_PBC_DIALOG_ID);
                  return true;
                }
                return false;
              }
            }
);
            pm.show();
          }
        }
      }
);
    }
    if (getActivity().getIntent().getBooleanExtra(EXTRA_SHOW_CUSTOM_BUTTON,false)) {
      view.findViewById(R.id.button_bar).setVisibility(View.VISIBLE);
      view.findViewById(R.id.back_button).setVisibility(View.INVISIBLE);
      view.findViewById(R.id.skip_button).setVisibility(View.INVISIBLE);
      view.findViewById(R.id.next_button).setVisibility(View.INVISIBLE);
      Button customButton=(Button)view.findViewById(R.id.custom_button);
      customButton.setVisibility(View.VISIBLE);
      customButton.setOnClickListener(new OnClickListener(){
        @Override public void onClick(        View v){
          if (isPhone() && !hasSimProblem()) {
            showDialog(WIFI_SKIPPED_DIALOG_ID);
          }
 else {
            showDialog(WIFI_AND_MOBILE_SKIPPED_DIALOG_ID);
          }
        }
      }
);
    }
    return view;
  }
 else {
    return super.onCreateView(inflater,container,savedInstanceState);
  }
}
