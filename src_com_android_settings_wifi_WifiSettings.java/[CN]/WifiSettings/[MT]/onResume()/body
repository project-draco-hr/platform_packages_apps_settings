{
  super.onResume();
  if (mWifiEnabler != null) {
    mWifiEnabler.resume();
  }
  getActivity().registerReceiver(mReceiver,mFilter);
  if (mKeyStoreNetworkId != -1 && KeyStore.getInstance().test() == KeyStore.NO_ERROR) {
    mWifiManager.connectNetwork(mKeyStoreNetworkId);
  }
  mKeyStoreNetworkId=-1;
  if (mInXlSetupWizard) {
    final int wifiState=mWifiManager.getWifiState();
switch (wifiState) {
case WifiManager.WIFI_STATE_ENABLED:
{
        updateAccessPoints();
        break;
      }
case WifiManager.WIFI_STATE_DISABLED:
case WifiManager.WIFI_STATE_DISABLING:
case WifiManager.WIFI_STATE_UNKNOWN:
{
      mWifiManager.setWifiEnabled(true);
    }
default :
{
    mAccessPoints.removeAll();
    Preference preference=new Preference(getActivity());
    preference.setLayoutResource(R.layout.preference_widget_shortcut);
    preference.setSelectable(false);
    preference.setTitle("Connecting");
    preference.setSummary("COONNECTING");
    mAccessPoints.addPreference(preference);
    break;
  }
}
}
 else {
Log.d("@@@","updateAccessPoints");
updateAccessPoints();
}
}
