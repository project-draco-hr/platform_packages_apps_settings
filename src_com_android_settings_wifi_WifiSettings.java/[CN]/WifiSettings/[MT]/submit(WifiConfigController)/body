{
  final WifiConfiguration config=configController.getConfig();
  if (config == null) {
    if (mSelectedAccessPoint != null && !requireKeyStore(mSelectedAccessPoint.getConfig()) && mSelectedAccessPoint.networkId != INVALID_NETWORK_ID) {
      mWifiManager.connect(mChannel,mSelectedAccessPoint.networkId,mConnectListener);
    }
  }
 else   if (config.networkId != INVALID_NETWORK_ID) {
    if (mSelectedAccessPoint != null) {
      saveNetwork(config);
    }
  }
 else {
    if (configController.isEdit() || requireKeyStore(config)) {
      saveNetwork(config);
    }
 else {
      mWifiManager.connect(mChannel,config,mConnectListener);
    }
  }
  if (mWifiManager.isWifiEnabled()) {
    mScanner.resume();
  }
  updateAccessPoints();
}
