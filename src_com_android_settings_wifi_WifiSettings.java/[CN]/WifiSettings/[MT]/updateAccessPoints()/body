{
  if (getActivity() == null)   return;
  final int wifiState=mWifiManager.getWifiState();
switch (wifiState) {
case WifiManager.WIFI_STATE_ENABLED:
    final Collection<AccessPoint> accessPoints=constructAccessPoints();
  getPreferenceScreen().removeAll();
if (mInXlSetupWizard) {
  ((WifiSettingsForSetupWizardXL)getActivity()).onAccessPointsUpdated(getPreferenceScreen(),accessPoints);
}
 else {
  if (accessPoints.size() == 0) {
    addMessagePreference(R.string.wifi_empty_list_wifi_on);
  }
  for (  AccessPoint accessPoint : accessPoints) {
    getPreferenceScreen().addPreference(accessPoint);
  }
}
break;
case WifiManager.WIFI_STATE_ENABLING:
getPreferenceScreen().removeAll();
break;
case WifiManager.WIFI_STATE_DISABLING:
addMessagePreference(R.string.wifi_stopping);
break;
case WifiManager.WIFI_STATE_DISABLED:
addMessagePreference(R.string.wifi_empty_list_wifi_off);
break;
}
}
