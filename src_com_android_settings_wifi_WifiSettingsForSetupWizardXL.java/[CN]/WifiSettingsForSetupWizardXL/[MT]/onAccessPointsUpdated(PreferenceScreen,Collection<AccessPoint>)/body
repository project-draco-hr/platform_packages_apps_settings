{
  if (mProgressBar.isIndeterminate() && accessPoints.size() > 0) {
    showDisconnectedProgressBar();
    if (mScreenState == SCREEN_STATE_DISCONNECTED) {
      mWifiSettingsFragmentLayout.setVisibility(View.VISIBLE);
      mBottomPadding.setVisibility(View.GONE);
    }
    mAddNetworkButton.setEnabled(true);
    mRefreshButton.setEnabled(true);
  }
  for (  AccessPoint accessPoint : accessPoints) {
    AccessPointPreference preference=(AccessPointPreference)accessPoint.getTag();
    if (preference == null)     continue;
    preference.setLayoutResource(R.layout.custom_preference);
    preferenceScreen.addPreference(preference);
  }
}
