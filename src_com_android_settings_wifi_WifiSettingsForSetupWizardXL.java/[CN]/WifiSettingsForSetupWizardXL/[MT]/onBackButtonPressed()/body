{
  if (mScreenState == SCREEN_STATE_CONNECTING || mScreenState == SCREEN_STATE_CONNECTED) {
    if (DEBUG)     Log.d(TAG,"Back button pressed after connect action.");
    mScreenState=SCREEN_STATE_DISCONNECTED;
    restoreFirstVisibilityState();
    mSkipOrNextButton.setEnabled(true);
    changeNextButtonState(false);
    showScanningState();
    final List<WifiConfiguration> configs=mWifiManager.getConfiguredNetworks();
    for (    WifiConfiguration config : configs) {
      if (DEBUG) {
        Log.d(TAG,String.format("forgeting Wi-Fi network \"%s\" (id: %d)",config.SSID,config.networkId));
      }
      mWifiManager.forget(mChannel,config.networkId,new WifiManager.ActionListener(){
        public void onSuccess(){
        }
        public void onFailure(        int reason){
        }
      }
);
    }
    mWifiSettingsFragmentLayout.setVisibility(View.GONE);
    refreshAccessPoints(true);
  }
 else {
    mScreenState=SCREEN_STATE_DISCONNECTED;
    mWifiSettings.resumeWifiScan();
    restoreFirstVisibilityState();
    mAddNetworkButton.setEnabled(true);
    mRefreshButton.setEnabled(true);
    mSkipOrNextButton.setEnabled(true);
    showDisconnectedProgressBar();
    mWifiSettingsFragmentLayout.setVisibility(View.VISIBLE);
    mBottomPadding.setVisibility(View.GONE);
  }
  setPaddingVisibility(View.VISIBLE);
  mConnectingStatusLayout.setVisibility(View.GONE);
  final ViewGroup parent=(ViewGroup)findViewById(R.id.wifi_config_ui);
  parent.removeAllViews();
  parent.setVisibility(View.GONE);
  mWifiConfig=null;
}
