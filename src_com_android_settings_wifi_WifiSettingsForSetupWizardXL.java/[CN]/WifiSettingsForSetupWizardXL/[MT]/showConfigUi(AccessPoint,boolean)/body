{
  if (selectedAccessPoint != null && (selectedAccessPoint.security == AccessPoint.SECURITY_WEP || selectedAccessPoint.security == AccessPoint.SECURITY_PSK)) {
    edit=true;
  }
  trySetBackground(R.drawable.setups_bg_default);
  mWifiSettings.pauseWifiScan();
  findViewById(R.id.wifi_setup).setVisibility(View.GONE);
  mConnectingStatusLayout.setVisibility(View.GONE);
  final ViewGroup parent=(ViewGroup)findViewById(R.id.wifi_config_ui);
  parent.setVisibility(View.VISIBLE);
  parent.removeAllViews();
  mWifiConfig=new WifiConfigUiForSetupWizardXL(this,parent,selectedAccessPoint,edit);
  mConnectButton.setTag(null);
  if (selectedAccessPoint == null) {
    showAddNetworkTitle();
    if (mWifiConfig != null) {
      mWifiConfig.getView().findViewById(R.id.wifi_general_info).setVisibility(View.GONE);
    }
    mConnectButton.setVisibility(View.VISIBLE);
    mConnectButton.setTag(CONNECT_BUTTON_TAG_ADD_NETWORK);
    showEditingButtonState();
  }
 else   if (selectedAccessPoint.security == AccessPoint.SECURITY_NONE) {
    mNetworkName=selectedAccessPoint.getTitle().toString();
    mConnectButton.performClick();
  }
 else {
    mNetworkName=selectedAccessPoint.getTitle().toString();
    showEditingTitle();
    showEditingButtonState();
    if (selectedAccessPoint.security == AccessPoint.SECURITY_EAP) {
      mConnectButton.setVisibility(View.GONE);
      mBackButton.setText(R.string.wifi_setup_back);
    }
 else {
      mConnectButton.setVisibility(View.VISIBLE);
      mConnectButton.setText(R.string.wifi_connect);
      mBackButton.setText(R.string.wifi_setup_cancel);
    }
  }
}
