{
  if (selectedAccessPoint != null && (selectedAccessPoint.security == AccessPoint.SECURITY_WEP || selectedAccessPoint.security == AccessPoint.SECURITY_PSK)) {
    edit=true;
  }
  mWifiSettings.pauseWifiScan();
  findViewById(R.id.wifi_setup).setVisibility(View.GONE);
  final ViewGroup parent=(ViewGroup)findViewById(R.id.wifi_config_ui);
  parent.setVisibility(View.VISIBLE);
  parent.removeAllViews();
  mWifiConfig=new WifiConfigUiForSetupWizardXL(this,parent,selectedAccessPoint,edit);
  final View view=mWifiConfig.getView();
  if (selectedAccessPoint != null) {
    mNetworkName=selectedAccessPoint.getTitle().toString();
    mTitleView.setText(getString(R.string.wifi_setup_title_editing_network,mNetworkName));
  }
 else {
    mNetworkName="";
    mTitleView.setText(R.string.wifi_setup_title_add_network);
    view.findViewById(R.id.wifi_general_info).setVisibility(View.GONE);
  }
  if (selectedAccessPoint != null && selectedAccessPoint.security == AccessPoint.SECURITY_NONE) {
    mConnectButton.performClick();
  }
 else   if (selectedAccessPoint != null && selectedAccessPoint.security == AccessPoint.SECURITY_EAP) {
    mConnectButton.setVisibility(View.GONE);
    mSkipOrNextButton.setVisibility(View.GONE);
    mAddNetworkButton.setVisibility(View.GONE);
    mRefreshButton.setVisibility(View.GONE);
    mBackButton.setVisibility(View.VISIBLE);
  }
 else {
    mConnectButton.setVisibility(View.VISIBLE);
    mConnectButton.setText(R.string.wifi_connect);
    mSkipOrNextButton.setVisibility(View.GONE);
    mAddNetworkButton.setVisibility(View.GONE);
    mRefreshButton.setVisibility(View.GONE);
    mBackButton.setVisibility(View.VISIBLE);
  }
}
