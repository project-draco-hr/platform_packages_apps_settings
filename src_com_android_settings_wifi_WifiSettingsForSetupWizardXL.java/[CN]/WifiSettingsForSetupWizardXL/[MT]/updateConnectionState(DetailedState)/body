{
  final DetailedState state=stateMap.get(originalState);
switch (state) {
case SCANNING:
{
      if (mWifiSettings.getAccessPointsCount() == 0) {
        mProgressBar.setIndeterminate(true);
        mProgressText.setText(Summary.get(this,DetailedState.SCANNING));
      }
 else {
        mProgressBar.setIndeterminate(false);
      }
      break;
    }
case CONNECTING:
{
    mProgressBar.setIndeterminate(false);
    mProgressBar.setProgress(1);
    mStatusText.setText(R.string.wifi_setup_status_connecting);
    mProgressText.setText(Summary.get(this,state));
    break;
  }
case CONNECTED:
{
  mProgressBar.setIndeterminate(false);
  mProgressBar.setProgress(2);
  mStatusText.setText(R.string.wifi_setup_status_connected);
  mProgressText.setText(Summary.get(this,state));
  setResult(Activity.RESULT_OK);
  finish();
  break;
}
case FAILED:
{
mProgressBar.setIndeterminate(false);
mProgressBar.setProgress(0);
mStatusText.setText(R.string.wifi_setup_status_select_network);
mProgressText.setText(Summary.get(this,state));
break;
}
default :
if (mWifiSettings.getAccessPointsCount() == 0 && mIgnoringWifiNotificationCount > 0) {
mIgnoringWifiNotificationCount--;
mProgressBar.setIndeterminate(true);
mProgressText.setText(Summary.get(this,DetailedState.SCANNING));
return;
}
 else {
mProgressBar.setIndeterminate(false);
mProgressBar.setProgress(0);
mStatusText.setText(R.string.wifi_setup_status_select_network);
mProgressText.setText(getString(R.string.wifi_setup_not_connected));
}
break;
}
}
